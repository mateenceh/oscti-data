<!DOCTYPE html>
<html lang="en">

<head class="sans-serif">

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="baidu-site-verification" content="KeThzeyMOr" />
    <meta name="baidu-site-verification" content="code-NIlrS7gNhx" />

    <title>Getting started with Terraform and Cloudflare (Part 1 of 2)</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/tippy.js/3.4.1/themes/light.css" />

    <link rel="stylesheet" type="text/css" href="/assets/built/index.css?v=fdf4009e30" />

    <script type="text/javascript" src="/assets/built/index.js?v=fdf4009e30"></script>
    <script src="/assets/js/check-for-tex.js" defer></script>

    <link rel="shortcut icon" href="/favicon.png" type="image/png" />
    <link rel="canonical" href="https://blog.cloudflare.com/getting-started-with-terraform-and-cloudflare-part-1/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    
    <meta property="og:site_name" content="The Cloudflare Blog" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Getting started with Terraform and Cloudflare (Part 1 of 2)" />
    <meta property="og:description" content="Write code to manage your Cloudflare configuration using Terraform, and store it in your source code repository of choice for versioned history and rollback." />
    <meta property="og:url" content="https://blog.cloudflare.com/getting-started-with-terraform-and-cloudflare-part-1/" />
    <meta property="og:image" content="https://blog.cloudflare.com/content/images/2018/04/Screen-Shot-2018-04-30-at-9.23.22-AM.png" />
    <meta property="article:published_time" content="2018-04-27T20:18:10.000Z" />
    <meta property="article:modified_time" content="2020-08-20T17:37:26.000Z" />
    <meta property="article:tag" content="Developers" />
    <meta property="article:tag" content="Terraform" />
    <meta property="article:tag" content="HashiCorp" />
    <meta property="article:tag" content="Programming" />
    
    <meta property="article:publisher" content="https://www.facebook.com/cloudflare" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Getting started with Terraform and Cloudflare (Part 1 of 2)" />
    <meta name="twitter:description" content="Write code to manage your Cloudflare configuration using Terraform, and store it in your source code repository of choice for versioned history and rollback." />
    <meta name="twitter:url" content="https://blog.cloudflare.com/getting-started-with-terraform-and-cloudflare-part-1/" />
    <meta name="twitter:image" content="https://blog.cloudflare.com/content/images/2018/04/Screen-Shot-2018-04-30-at-9.23.22-AM.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Patrick R. Donahue" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Developers, Terraform, HashiCorp, Programming" />
    <meta name="twitter:site" content="@cloudflare" />
    <meta name="twitter:creator" content="@prdonahue" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "The Cloudflare Blog",
        "logo": {
            "@type": "ImageObject",
            "url": "https://blog-cloudflare-com-assets.storage.googleapis.com/2019/06/logo-cloudflare-dark-1.svg",
            "width": 109,
            "height": 40.5
        }
    },
    "author": {
        "@type": "Person",
        "name": "Patrick R. Donahue",
        "image": {
            "@type": "ImageObject",
            "url": "https://blog-cloudflare-com-assets.storage.googleapis.com/2020/04/me0-1.png",
            "width": 300,
            "height": 291
        },
        "url": "https://blog.cloudflare.com/author/patrick/",
        "sameAs": [
            "https://www.cloudflare.com",
            "https://twitter.com/prdonahue"
        ]
    },
    "headline": "Getting started with Terraform and Cloudflare (Part 1 of 2)",
    "url": "https://blog.cloudflare.com/getting-started-with-terraform-and-cloudflare-part-1/",
    "datePublished": "2018-04-27T20:18:10.000Z",
    "dateModified": "2020-08-20T17:37:26.000Z",
    "image": "https://blog.cloudflare.com/content/images/2018/04/Screen-Shot-2018-04-30-at-9.23.22-AM.png",
    "keywords": "Developers, Terraform, HashiCorp, Programming",
    "description": "Write code to manage your Cloudflare configuration using Terraform, and store it in your source code repository of choice for versioned history and rollback.",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://blog.cloudflare.com/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.5" />
    <link rel="alternate" type="application/rss+xml" title="The Cloudflare Blog" href="https://blog.cloudflare.com/rss/" />
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','cfDataLayer','GTM-PKQFGQB');</script>
<!-- End Google Tag Manager -->

<!-- Google Optimize -->
<script src="https://www.googleoptimize.com/optimize.js?id=GTM-N4JSZJ8"></script>

<link rel="shortcut icon" href="https://blog.cloudflare.com/content/images/2019/12/favicon-8.png" type="image/png">

<meta name="msvalidate.01" content="CF295E1604697F9CAD18B5A232E871F6" />
<meta class="swiftype" name="language" data-type="string" content="en" />
<!--<script src="/assets/js/index.js"></script>-->
<script type="text/javascript" src="//cdn.bizible.com/scripts/bizible.js" async=""></script>
<script>
var trackRecruitingLink = function(role, url) {
   ga('send', 'event', 'recruiting', 'jobscore-click', role, {
     'transport': 'beacon',
     'hitCallback': function(){document.location = url;}
   });
}
</script> 
<script type="text/javascript">
	(function() {
		var didInit = false;
		function initMunchkin() {
			if(didInit === false) {
				didInit = true;
				Munchkin.init('713-XSC-918');
			}
		}
		var s = document.createElement('script');
		s.type = 'text/javascript';
		s.async = true;
		s.src = '//munchkin.marketo.net/munchkin.js';
		s.onreadystatechange = function() {
			if (this.readyState == 'complete' || this.readyState == 'loaded') {
				initMunchkin();
			}
		};
		s.onload = initMunchkin;
		document.getElementsByTagName('head')[0].appendChild(s);
		})();
</script>
<script>
var HTMLAttrToAdd = document.querySelector("html");
HTMLAttrToAdd.setAttribute("lang", "en");
</script>
<style>
    table {
        background-color: transparent;
    }
    td {
		padding: 5px 1em;
    }
    pre {
        max-height: 500px;
        overflow-y: scroll;
    }
</style>
<!-- Cloudflare Web Analytics -->
<script
        defer
        src='https://static.cloudflareinsights.com/beacon.min.js'
        data-cf-beacon='{"token": "f446eacb44504e50864bad7c47ffa9e8"}'></script>
<!-- End Cloudflare Web Analytics -->

</head>

<body id="main-body" class="post-template tag-developers tag-terraform tag-hashicorp tag-programming sans-serif">

    <div class="site-wrapper">

        <header class="flex flex-row flex-wrap justify-between items-end mw8 center mv3 pl3 pr2">
    <div class="w-100 flex items-end justify-between justify-start-l">
        <div class="w-100 tr">
            <span class="dn di-l">
                <a href="https://www.cloudflare.com/plans/enterprise/contact/" class="f1 gray4 no-underline underline-hover">Contact Sales:
                </a>
                <a href="tel:+18889935273" class="f1 gray4 no-underline underline-hover">+1 (888) 274-3482</a>
            </span>
        </div>
    </div>
    <div class="w-100 w-50-l flex items-end justify-between justify-start-l">
        <a href="https://blog.cloudflare.com" class="header-logo mr4">
            <img src="https://blog-cloudflare-com-assets.storage.googleapis.com/2019/06/logo-cloudflare-dark-1.svg" alt="The Cloudflare Blog" class="header-logo" />
        </a>
        <h2 class="mt0 mb1">
            <a href="/" class="fw5 f5 gray3 no-underline">
                <span class="dn di-l">The Cloudflare Blog</span>
            </a>
        </h2>
    </div>
    <div class="w-100 w-50-l dn db-l">
        <div class="w-100 tr mkto-sub-message">
            <p class="f2">Thanks for being here, come back soon. Get notified of new posts:</p>
        </div>
        <div class="w-100 tr">
            <script src="//app-ab13.marketo.com/js/forms2/js/forms2.min.js"></script>
            <div class="marketo-form-container">
                <form id="mktoForm_1653"></form>
            </div>
            <script>
                MktoForms2.loadForm("//app-ab13.marketo.com", "713-XSC-918", 1653, function(form) {
                    document.querySelectorAll('#mktoForm_1653 .mktoEmailField')[0].placeholder = "Email Address";

                    form.onSuccess(function(vals, thanksURL){
                        // Hide form and show success msg
                        document.getElementById("mktoForm_1653").style.display = "none";
                        document.getElementsByClassName("mkto-sub-message")[0].style.display = "none";

                        document.getElementsByClassName("js-form-success-msg")[0].style.display = "block";
                        return false;
                    });
                });
            </script>
        </div>
        <div class="w-100 tr dn js-form-success-msg">
            <p class="f2">Subscription confirmed. Thank you for subscribing!</p>
        </div>
    </div>
</header>

<nav id="nav" class="w-100 bb b--black-10 z-1">
    <div id="desktop-nav-items-container" class="flex flex-row flex-wrap justify-between items-center mw8 center mv3 mv0-l">
        <div class="nav-item nav-item-desktop ml3 mr2 dn db-l pv3" data-tag="product-news">
            <a href="/tag/product-news/" class="no-underline gray1 f2 fw5 pv3">Product News</a>
        </div>
        <div class="nav-item nav-item-desktop mh2 dn db-l pv3" data-tag="speed-and-reliability">
            <a href="/tag/speed-and-reliability/" class="no-underline gray1 f2 fw5 pv3">Speed &amp; Reliability</a>
        </div>
        <div class="nav-item nav-item-desktop mh2 dn db-l pv3" data-tag="security">
            <a href="/tag/security/" class="no-underline gray1 f2 fw5 pv3">Security</a>
        </div>
        <div class="nav-item nav-item-desktop mh2 dn db-l pv3" data-tag="serverless">
            <a href="/tag/serverless/" class="no-underline gray1 f2 fw5 pv3">Serverless</a>
        </div>
        <div class="nav-item nav-item-desktop mh2 dn db-l pv3" data-tag="cloudflare-network">
            <a href="/tag/cloudflare-network/" class="no-underline gray1 f2 fw5 pv3">Cloudflare Network</a>
        </div>
        <div class="nav-item nav-item-desktop mh2 dn db-l pv3" data-tag="developers">
            <a href="/tag/developers/" class="no-underline gray1 f2 fw5 pv3">Developers</a>
        </div>
        <div class="nav-item nav-item-desktop mh2 dn db-l pv3" data-tag="deep-dive">
            <a href="/tag/deep-dive/" class="no-underline gray1 f2 fw5 pv3">Deep Dive</a>
        </div>
        <div class="nav-item nav-item-desktop ml2 mr3 dn db-l pv3" data-tag="life-at-cloudflare">
            <a href="/tag/life-at-cloudflare/" class="no-underline gray1 f2 fw5 pv3">Life @Cloudflare</a>
        </div>
        <a href="/search/"><img src="/assets/images/magnifier.svg?v=fdf4009e30" class="js-search-box-trigger mw2 pointer ph3 ph2-l" />
        </a>
        <img src="/assets/images/hamburger.svg?v=fdf4009e30" class="w2 pointer js-mobile-nav-trigger ph3 db dn-l" />
    </div>

    <div class="js-mobile-nav-container dn">
        <div class="flex flex-column flex-wrap bg-gray9 o-95 absolute w-100 ph3 z-1">
            <div class="pv3 ph2">
                <a href="/tag/product-news/" class="no-underline gray1 f4 fw7">Product News</a>
            </div>
            <div class="pv3 ph2">
                <a href="/tag/speed-and-reliability/" class="no-underline gray1 f4 fw7">Speed &amp; Reliability</a>
            </div>
            <div class="pv3 ph2">
                <a href="/tag/security/" class="no-underline gray1 f4 fw7">Security</a>
            </div>
            <div class="pv3 ph2">
                <a href="/tag/serverless/" class="no-underline gray1 f4 fw7">Serverless</a>
            </div>
            <div class="pv3 ph2">
                <a href="/tag/cloudflare-network/" class="no-underline gray1 f4 fw7">Cloudflare Network</a>
            </div>
            <div class="pv3 ph2">
                <a href="/tag/developers/" class="no-underline gray1 f4 fw7">Developers</a>
            </div>
            <div class="pv3 ph2">
                <a href="/tag/deep-dive/" class="no-underline gray1 f4 fw7">Deep Dive</a>
            </div>
            <div class="pv3 ph2">
                <a href="/tag/life-at-cloudflare/" class="no-underline gray1 f4 fw7">Life @Cloudflare</a>
            </div>
        </div>
    </div>
</nav>
        


<main id="post" class="flex flex-row flex-wrap items-center justify-center pt2 pt4-l">
    <article
        class="post-full mw-100 ph3 ph0-l fs-20px post tag-developers tag-terraform tag-hashicorp tag-programming ">
        <h1 class="f6 f7-l fw4 gray1 pt1 pt3-l mb1">Getting started with Terraform and Cloudflare (Part 1 of 2)</h1>


        <p class="f3 fw5 gray5 db di-l mt2" localize datetime="2018-04-27T21:18:10+01:00">Loading...</p>
        <noscript>
            <p class="f3 fw5 gray5 db di-l mt2">April 27, 2018 9:18PM</p>
        </noscript>

        <ul class="flex flex-wrap pl0 mt4">
            <li class="list flex items-center ml0 pl0 pb1">
                <a href="/author/patrick/" class="static-avatar pr1">
                    <img class="author-profile-image h2 w2 br-100 mr2" src="https://blog-cloudflare-com-assets.storage.googleapis.com/2020/04/me0-1.png" alt="Patrick R. Donahue" />
                </a>
                <div class="author-name-tooltip">
                    <a href="/author/patrick" class="fw5 f3 no-underline black mr3">Patrick R. Donahue</a>
                </div>
            </li>
        </ul>

        <section class="post-full-content">
            <div class="post-content lh-copy gray1">
                <!--kg-card-begin: markdown--><p><em>You can read Part 2 of Getting Started with Terraform <a href="https://blog.cloudflare.com/getting-started-with-terraform-and-cloudflare-part-2/">here</a>.</em></p>
<p>As a Product Manager at Cloudflare, I spend quite a bit of my time talking to customers. One of the most common topics I'm asked about is configuration management. Developers want to know how they can write code to manage their Cloudflare config, without interacting with our APIs or UI directly.</p>
<p>Following best practices in software development, they want to store configuration in their own source code repository (be it <a href="https://github.com">GitHub</a> or otherwise), institute a change management process that includes code review, and be able to track their configuration versions and history over time. Additionally, they want the ability to quickly and easily roll back changes when required.</p>
<p>When I first spoke with our engineering teams about these requirements, they gave me the best answer a Product Manager could hope to hear: there's already an open source tool out there that does all of that (and more), with a strong community and plugin system to boot—it's called <a href="https://terraform.io">Terraform</a>.</p>
<p>This blog post is about getting started using Terraform with Cloudflare and the new version 1.0 of our Terraform provider. A &quot;provider&quot; is simply a plugin that knows how to talk to a specific set of APIs—in this case, Cloudflare, but there are also providers available for AWS, Azure, Google Cloud, Kubernetes, VMware, and <a href="https://www.terraform.io/docs/providers/">many more services</a>. Today's release extends our existing provider that previously only supported DNS records with support for Zone Settings, Rate Limiting, Load Balancing, and Page Rules.</p>
<h3 id="beforeandafterterraform">Before and after Terraform</h3>
<p>Before we jump into some real-world examples of using Terraform with Cloudflare, here is a set of diagrams that depicts the paradigm shift.</p>
<p><img src="https://blog.cloudflare.com/content/images/2018/04/before-terraform-@3x.png" alt="before-terraform-@3x"></p>
<p>Before Terraform, you needed to learn how to use the configuration interfaces or APIs of each cloud and edge provider, e.g., Google Cloud and Cloudflare below. Additionally, your ability to store your configuration in your own source code control system depends on vendor-specific configuration export mechanisms (which may or may not exist).<br>
<br/></p>
<p><img src="https://blog.cloudflare.com/content/images/2018/04/with-terraform-@3x-2.png" alt="with-terraform-@3x-2"></p>
<p>With Terraform, you can store and version your configuration in GitHub (or your source code control system of choice). Once you learn Terraform's configuration syntax, you don't need to bother learning how to use providers' UIs or APIs—you just tell Terraform what you want and it figures out the rest.</p>
<h3 id="installingterraform">Installing Terraform</h3>
<p>The installation process for Terraform is extremely simple as it ships as a single binary file. Official instructions for installing Terraform can be found <a href="https://www.terraform.io/intro/getting-started/install.html">here</a>, and for purposes of this example we'll show to do so on a macOS using <a href="https://brew.sh/">Homebrew</a>:</p>
<pre><code>$ brew install terraform
==&gt; Downloading https://homebrew.bintray.com/bottles/terraform-0.11.7.sierra.bottle.tar.gz
######################################################################## 100.0%
==&gt; Pouring terraform-0.11.7.sierra.bottle.tar.gz
🍺  /usr/local/Cellar/terraform/0.11.7: 6 files, 80.2MB

$ terraform version
Terraform v0.11.7
</code></pre>
<p><mark>The following instructions are adapted from the <a href="https://developers.cloudflare.com/terraform/">Cloudflare Developers - Terraform documentation</a> site, which includes a <a href="https://developers.cloudflare.com/terraform/tutorial/">full tutorial</a> and coverage of <a href="https://developers.cloudflare.com/terraform/advanced-topics/">advanced topics</a>.</mark></p>
<p>If you're interested in seeing how to use a specific Terraform resource or technique, click on one of the following anchor links:</p>
<ul>
<li><a href="#installingterraform">Installing Terraform</a></li>
<li><a href="#helloworld">Hello, world!</a></li>
<li><a href="#trackingchangehistory">Tracking Change History</a></li>
<li><a href="#applyingzonesettings">Applying Zone Settings</a></li>
<li><a href="#managingratelimits">Managing Rate Limits</a></li>
<li>Load Balancing Resource (next post!)</li>
<li>Page Rules Resource (next post!)</li>
<li>Reviewing and Rolling Back Configuration (next post!)</li>
<li>Importing Existing State and Configuration (next post!)</li>
</ul>
<h3 id="helloworld">Hello, world!</h3>
<p>Now that Terraform is installed, it's time to start using it. Let's assume you have a web server for your domain that's accessible on <code>203.0.113.10</code>. You just signed up your domain, <code>example.com</code>, on Cloudflare and want to manage everything with Terraform.</p>
<h4 id="1defineyourfirstterraformconfigfile">1. Define your first Terraform config file</h4>
<p>First we'll create a initial Terraform config file. Any files ending in <code>.tf</code> will be processed by Terraform. As you configuration gets more complex you'll want to split the config into separate files and modules, but for now we'll proceed with a single file:</p>
<pre><code>$ cat &gt; cloudflare.tf &lt;&lt;'EOF'
provider &quot;cloudflare&quot; {
  email = &quot;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="ea93859faa8f928b879a868fc4898587">[email&#160;protected]</a>&quot;
  token = &quot;your-api-key&quot;
}

variable &quot;domain&quot; {
  default = &quot;example.com&quot;
}

resource &quot;cloudflare_record&quot; &quot;www&quot; {
  domain  = &quot;${var.domain}&quot;
  name    = &quot;www&quot;
  value   = &quot;203.0.113.10&quot;
  type    = &quot;A&quot;
  proxied = true
}
EOF
</code></pre>
<h4 id="2initializeterraformandthecloudflareprovider">2. Initialize Terraform and the Cloudflare provider</h4>
<p>Now that you've created your basic configuration in HCL let's initialize Terraform and ask it to apply the configuration to Cloudflare. HCL stands for HashiCorp Configuration Lanaguage, and is named after the maker of Terraform.</p>
<pre><code>$ terraform init

Initializing provider plugins...
- Checking for available provider plugins on https://releases.hashicorp.com...
- Downloading plugin for provider &quot;cloudflare&quot; (1.0.0)...

The following providers do not have any version constraints in configuration,
so the latest version was installed.

To prevent automatic upgrades to new major versions that may contain breaking
changes, it is recommended to add version = &quot;...&quot; constraints to the
corresponding provider blocks in configuration, with the constraint strings
suggested below.

* provider.cloudflare: version = &quot;~&gt; 1.0&quot;

Terraform has been successfully initialized!

You may now begin working with Terraform. Try running &quot;terraform plan&quot; to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.
When you run terraform init, any plugins required, such as the Cloudflare Terraform provider, are automatically downloaded and saved locally to a .terraform directory:

$ find .terraform/
.terraform/
.terraform//plugins
.terraform//plugins/darwin_amd64
.terraform//plugins/darwin_amd64/lock.json
.terraform//plugins/darwin_amd64/terraform-provider-cloudflare_v1.0.0_x4
</code></pre>
<h4 id="3reviewtheexecutionplan">3. Review the execution plan</h4>
<p>With the Cloudflare provider installed, let's ask Terraform to show the changes it's planning to make to your Cloudflare account so you can confirm it matches the configuration you intended:</p>
<pre><code>$ terraform plan
Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.


------------------------------------------------------------------------

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  + cloudflare_record.www
      id:          &lt;computed&gt;
      created_on:  &lt;computed&gt;
      domain:      &quot;example.com&quot;
      hostname:    &lt;computed&gt;
      metadata.%:  &lt;computed&gt;
      modified_on: &lt;computed&gt;
      name:        &quot;www&quot;
      proxiable:   &lt;computed&gt;
      proxied:     &quot;true&quot;
      ttl:         &lt;computed&gt;
      type:        &quot;A&quot;
      value:       &quot;203.0.113.10&quot;
      zone_id:     &lt;computed&gt;


Plan: 1 to add, 0 to change, 0 to destroy.

------------------------------------------------------------------------

Note: You didn't specify an &quot;-out&quot; parameter to save this plan, so Terraform
can't guarantee that exactly these actions will be performed if
&quot;terraform apply&quot; is subsequently run.
</code></pre>
<p>As you can see in the above &quot;execution plan”, Terraform is going to create a new DNS record, as requested. Values that you've explicitly specified are displayed, e.g., the value of the <code>A</code> record—<code>203.0.113.10</code>—while values that are derived based on other API calls, e.g., looking up the zone_id, or returned after the object is created, are displayed as <code>&lt;computed&gt;</code>.</p>
<h4 id="4applyingyourchanges">4. Applying Your Changes</h4>
<p>The plan command is important, as it allows you to preview the changes for accuracy before actually making them. Once you're comfortable with the execution plan, it's time to apply it:</p>
<pre><code>$ terraform apply --auto-approve
cloudflare_record.www: Creating...
  created_on:  &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  domain:      &quot;&quot; =&gt; &quot;example.com&quot;
  hostname:    &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  metadata.%:  &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  modified_on: &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  name:        &quot;&quot; =&gt; &quot;www&quot;
  proxiable:   &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  proxied:     &quot;&quot; =&gt; &quot;true&quot;
  ttl:         &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  type:        &quot;&quot; =&gt; &quot;A&quot;
  value:       &quot;&quot; =&gt; &quot;203.0.113.10&quot;
  zone_id:     &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
cloudflare_record.www: Creation complete after 1s (ID: c38d3103767284e7cd14d5dad3ab8668)

Apply complete! Resources: 1 added, 0 changed, 0 destroyed.

</code></pre>
<p>Note that I specified –auto-approve on the command line for briefer output; without this flag, Terraform will show you the output of <code>terraform plan</code> and then ask for confirmation before applying it.</p>
<h4 id="verifytheresults">Verify the results</h4>
<p>Logging back into the Cloudflare Dashboard and selecting the DNS tab, I can see the record that was created by Terraform:</p>
<p><img src="https://blog.cloudflare.com/content/images/2018/04/Verify-DNS.png" alt="Verify-DNS"></p>
<p>If you'd like to see the full results returned from the API call (including the default values that you didn't specify but let Terraform compute), you can run <code>terraform show</code>:</p>
<pre><code>$ terraform show
cloudflare_record.www:
  id = c38d3103767284e7cd14d5dad3ab8668
  created_on = 2018-04-08T00:37:33.76321Z
  data.% = 0
  domain = example.com
  hostname = www.example.com
  metadata.% = 2
  metadata.auto_added = false
  metadata.managed_by_apps = false
  modified_on = 2018-04-08T00:37:33.76321Z
  name = www
  priority = 0
  proxiable = true
  proxied = true
  ttl = 1
  type = A
  value = 203.0.113.10
  zone_id = e2e6391340be87a3726f91fc4148b122
</code></pre>
<pre><code>$ curl https://www.example.com
Hello, this is 203.0.113.10!
</code></pre>
<h3 id="trackingchangehistory">Tracking change history</h3>
<p>In the <code>terraform apply</code> step above, you created and applied some basic Cloudflare configuration. Terraform was able to apply this configuration to your account because you provided your email address and API token at the top of the cloudflare.tf file:</p>
<pre><code>$ head -n4 cloudflare.tf 
provider &quot;cloudflare&quot; {
  email = &quot;<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="126b7d6752776a737f627e773c717d7f">[email&#160;protected]</a>&quot;
  token = &quot;your-api-key&quot;
}
</code></pre>
<p>We're now going to store your configuration in GitHub where it can be tracked, peer-reviewed, and rolled back to as needed. But before we do so, we're going to remove your credentials from the Terraform config file so it doesn't get committed to a repository.</p>
<h4 id="1useenvironmentvariablesforauthentication">1. Use environment variables for authentication</h4>
<p>As a good security practice we need to remove your Cloudflare credentials from anything that will be committed to a repository. The Cloudflare Terraform provider supports reading these values from the <code>CLOUDFLARE_EMAIL</code> and <code>CLOUDFLARE_TOKEN</code> environment variables, so all we need to do is:</p>
<pre><code>$ sed -ie 's/^.*email =.*$/  # email pulled from $CLOUDFLARE_EMAIL/' cloudflare.tf
$ sed -ie 's/^.*token =.*$/  # token pulled from $CLOUDFLARE_TOKEN/' cloudflare.tf

$ head -n4 cloudflare.tf 
provider &quot;cloudflare&quot; {
  # email pulled from $CLOUDFLARE_EMAIL
  # token pulled from $CLOUDFLARE_TOKEN
}

$ export <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="84c7c8cbd1c0c2c8c5d6c1dbc1c9c5cdc8b9fdebf1c4e1fce5e9f4e8e1aae7ebe9">[email&#160;protected]</a>
$ export CLOUDFLARE_TOKEN=your-api-key
</code></pre>
<p>Note that you need to leave the empty provider definition in the file, so that Terraform knows to install the Cloudflare plugin.</p>
<p>After completing the above step, it's a good idea to make sure that you can still authenticate to Cloudflare. By running <code>terraform plan</code> we can get Terraform to pull the current state (which requires a valid email and API key):</p>
<pre><code>$ terraform plan
Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.

cloudflare_record.www: Refreshing state... (ID: c38d3102767284e7ca14d5dad3ab8b69)

------------------------------------------------------------------------

No changes. Infrastructure is up-to-date.

This means that Terraform did not detect any differences between your
configuration and real physical resources that exist. As a result, no
actions need to be performed.
</code></pre>
<ol start="2">
<li>Store your configuration in GitHub<br>
Now that credentials have been removed, it's time to initialize a git repository with your Cloudflare configuration and then push it to GitHub.</li>
</ol>
<p>First we'll create the GitHub repository to store the config. This can be done via the GitHub UI or with a simple API call:</p>
<pre><code>$ export GITHUB_USER=your-github-user
$ export GITHUB_TOKEN=your-github-token

$ export GITHUB_URL=$(curl -sSXPOST https://api.github.com/user/repos?access_token=$GITHUB_TOKEN -H 'Content-Type: application/json' \
-d '{&quot;name&quot;: &quot;cf-config&quot;, &quot;private&quot;:&quot;true&quot;}' 2&gt;/dev/null | jq -r .ssh_url)

$ echo $GITHUB_URL
<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="9afdf3eedafdf3eef2eff8b4f9f5f7">[email&#160;protected]</a>:$GITHUB_USER/cf-config.git
</code></pre>
<p>Now we'll initialize a git repository and make our first commit:</p>
<pre><code>$ git init
Initialized empty Git repository in $HOME/cf-config/.git/

$ git remote add origin $GITHUB_URL
$ git add cloudflare.tf

$ git commit -m &quot;Step 2 - Initial commit with webserver definition.&quot;
[master (root-commit) 5acea17] Step 2 - Initial commit with webserver definition.
 1 file changed, 16 insertions(+)
 create mode 100644 cloudflare.tf
</code></pre>
<p>An astute reader may have noticed that we did not commit the <code>.terraform</code> directory nor did we commit the <code>terraform.tfstate</code> file. The former was not committed because this repository may be used on a different architecture, and the plugins contained in this directory are built for the system on which terraform init was run. The latter was not committed as i) it may eventually contain sensitive strings and ii) it is not a good way to keep state in sync, as HashiCorp [explains].</p>
<p>To prevent git from bugging us about these files, let's add them to a new <code>.gitignore</code> file, commit it, and push everything to GitHub:</p>
<pre><code>$ cat &gt; .gitignore &lt;&lt;'EOF'
.terraform/
terraform.tfstate*
EOF

$ git add .gitignore

$ git commit -m &quot;Step 2 - Ignore terraform plugin directory and state file.&quot;
[master 494c6d6] Step 2 - Ignore terraform plugin directory and state file.
 1 file changed, 2 insertions(+)
 create mode 100644 .gitignore

$ git push
Counting objects: 6, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (6/6), 762 bytes | 0 bytes/s, done.
Total 6 (delta 0), reused 0 (delta 0)
To <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="47202e3307202e332f32256924282a">[email&#160;protected]</a>:$GITHUB_USER/cf-config.git
 * [new branch]      master -&gt; master
</code></pre>
<h3 id="applyingzonesettings">Applying zone settings</h3>
<p>Now that you've got a basic website proxied through Cloudflare, it's time to use Terraform to adjust some additional settings on your zone. Below we'll configure some optional HTTPS settings, and then push the updated configuration to GitHub for posterity.</p>
<p>We'll use a new git branch for the changes, and then merge it into master before applying. On a team, you might consider using this step as an opportunity for others to review your change before merging and deploying it. Or you may integrate Terraform into your CI/CD system to perform tests automatically using another Cloudflare domain.</p>
<h4 id="1createanewbranchandappendthenewzonesettings">1. Create a new branch and append the new zone settings</h4>
<p>Here, we modify the Terraform configuration to enable the following settings: <a href="https://www.cloudflare.com/learning-resources/tls-1-3/">TLS 1.3</a>, <a href="https://blog.cloudflare.com/how-to-make-your-site-https-only/">Always Use HTTPS</a>, <a href="https://blog.cloudflare.com/introducing-strict-ssl-protecting-against-a-man-in-the-middle-attack-on-origin-traffic/">Strict SSL mode</a>, and the <a href="https://www.cloudflare.com/waf/">Cloudflare WAF</a>. Strict mode requires a valid SSL certificate on your origin, so be sure to use the <a href="https://blog.cloudflare.com/cloudflare-ca-encryption-origin/">Cloudflare Origin CA</a> to generate one.</p>
<pre><code>$ git checkout -b step3-https
Switched to a new branch 'step3-https'

$ cat &gt;&gt; cloudflare.tf &lt;&lt;'EOF'

resource &quot;cloudflare_zone_settings_override&quot; &quot;example-com-settings&quot; {
  name = &quot;${var.domain}&quot;

  settings {
    tls_1_3 = &quot;on&quot;
    automatic_https_rewrites = &quot;on&quot;
    ssl = &quot;strict&quot;
    waf = &quot;on&quot;
  }
}
EOF
</code></pre>
<h4 id="2previewandmergethechanges">2. Preview and merge the changes</h4>
<p>Let's take a look at what Terraform is proposing before we apply it. We filter the <code>terraform plan</code> output to ignore those values that will be &quot;computed”—in this case, settings that will be left at their default values. For brevity from here on out, we'll omit some extranneous Terraform output; if you'd like to see the output exactly as run, please see the <a href="https://developers.cloudflare.com/terraform/tutorial/">full tutorial</a>.</p>
<pre><code>$ terraform plan | grep -v &quot;&lt;computed&gt;&quot;
Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.

cloudflare_record.www: Refreshing state... (ID: c38d3103767284e7cd14d5dad3ab8668)

------------------------------------------------------------------------

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  + create

Terraform will perform the following actions:

  + cloudflare_zone_settings_override.example-com-settings
      name:                                   &quot;example.com&quot;
      settings.#:                             &quot;1&quot;
      settings.0.automatic_https_rewrites:    &quot;on&quot;
      settings.0.ssl:                         &quot;strict&quot;
      settings.0.tls_1_3:                     &quot;on&quot;
      settings.0.waf:                         &quot;on&quot;


Plan: 1 to add, 0 to change, 0 to destroy.
</code></pre>
<p>The proposed changes look good, so we'll merge them into primary and then apply them with <code>terraform apply</code>. When working on a team, you may want to require pull requests and use this opportunity to peer review any proposed configuration changes.</p>
<pre><code>$ git add cloudflare.tf
$ git commit -m &quot;Step 3 - Enable TLS 1.3, Always Use HTTPS, and SSL Strict mode.&quot;
[step3-https d540600] Step 3 - Enable TLS 1.3, Always Use HTTPS, and SSL Strict mode.
 1 file changed, 11 insertions(+)

$ git checkout master
Switched to branch 'master'

$ git merge step3-https
Updating d26f40b..d540600
Fast-forward
 cloudflare.tf | 11 +++++++++++
 1 file changed, 11 insertions(+)

$ git push
Counting objects: 3, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 501 bytes | 0 bytes/s, done.
Total 3 (delta 1), reused 0 (delta 0)
remote: Resolving deltas: 100% (1/1), completed with 1 local object.
To <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="99fef0edd9fef0edf1ecfbb7faf6f4">[email&#160;protected]</a>:$GITHUB_USER/cf-config.git
   d26f40b..d540600  master -&gt; master
</code></pre>
<h4 id="3applyandverifythechanges">3. Apply and verify the changes</h4>
<p>Before applying the changes, let's see if we can connect with TLS 1.3. Hint: we should <em>not</em> be able to with default settings. If you want to follow along with this test, you'll need to [compile curl against BoringSSL].</p>
<pre><code>$ curl -v --tlsv1.3 https://www.upinatoms.com 2&gt;&amp;1 | grep &quot;SSL connection\|error&quot;
* error:1000042e:SSL routines:OPENSSL_internal:TLSV1_ALERT_PROTOCOL_VERSION
curl: (35) error:1000042e:SSL routines:OPENSSL_internal:TLSV1_ALERT_PROTOCOL_VERSION
</code></pre>
<p>As shown above, we receive an error as TLS 1.3 is not yet enabled on your zone. Let's enable it by running terraform apply and try again:</p>
<pre><code>$ terraform apply --auto-approve
cloudflare_record.www: Refreshing state... (ID: c38d3103767284e7cd14d5dad3ab8668)
cloudflare_zone_settings_override.example-com-settings: Creating...
  initial_settings.#:                     &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  initial_settings_read_at:               &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  name:                                   &quot;&quot; =&gt; &quot;example.com&quot;
  readonly_settings.#:                    &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.#:                             &quot;&quot; =&gt; &quot;1&quot;
  settings.0.advanced_ddos:               &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.always_online:               &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.always_use_https:            &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.automatic_https_rewrites:    &quot;&quot; =&gt; &quot;on&quot;
  settings.0.brotli:                      &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.browser_cache_ttl:           &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.browser_check:               &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.cache_level:                 &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.challenge_ttl:               &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.cname_flattening:            &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.development_mode:            &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.edge_cache_ttl:              &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.email_obfuscation:           &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.hotlink_protection:          &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.http2:                       &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.ip_geolocation:              &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.ipv6:                        &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.max_upload:                  &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.minify.#:                    &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.mirage:                      &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.mobile_redirect.#:           &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.opportunistic_encryption:    &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.origin_error_page_pass_thru: &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.polish:                      &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.prefetch_preload:            &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.privacy_pass:                &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.pseudo_ipv4:                 &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.response_buffering:          &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.rocket_loader:               &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.security_header.#:           &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.security_level:              &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.server_side_exclude:         &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.sha1_support:                &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.sort_query_string_for_cache: &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.ssl:                         &quot;&quot; =&gt; &quot;strict&quot;
  settings.0.tls_1_2_only:                &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.tls_1_3:                     &quot;&quot; =&gt; &quot;on&quot;
  settings.0.tls_client_auth:             &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.true_client_ip_header:       &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.waf:                         &quot;&quot; =&gt; &quot;on&quot;
  settings.0.webp:                        &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  settings.0.websockets:                  &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  zone_status:                            &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
  zone_type:                              &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
cloudflare_zone_settings_override.example-com-settings: Creation complete after 2s (ID: e2e6491340be87a3726f91fc4148b125)

Apply complete! Resources: 1 added, 0 changed, 0 destroyed.
</code></pre>
<p>Now we can try the same command as above, and see that it succeeds. Niiice, TLS 1.3!</p>
<pre><code>$ curl -v --tlsv1.3 https://www.example.com 2&gt;&amp;1 | grep &quot;SSL connection\|error&quot;
* SSL connection using TLSv1.3 / AEAD-AES128-GCM-SHA256
</code></pre>
<h3 id="managingratelimits">Managing rate limits</h3>
<p><em>Before proceeding, make sure that your account is enabled for Rate Limiting. If you’re on an Enterprise plan, you should ask your Customer Success Manager to do this; otherwise, you can subscribe to Rate Limiting within the Cloudflare Dashboard.</em></p>
<p>With our zone settings locked down, and our site starting to get some more attention, it's unfortunately begun attracting some of the less scrupulous characters on the internet. Our server access logs show attempts to brute force our login page at <code>https://www.example.com/login</code>. Let's see what we can do with Cloudflare's <a href="https://blog.cloudflare.com/getting-started-with-terraform-and-cloudflare-part-1/(https://www.cloudflare.com/rate-limiting/)">rate limiting product</a> to put a stop to these efforts.</p>
<h4 id="1createanewbranchandappendtheratelimitingsettings">1. Create a new branch and append the rate limiting settings</h4>
<p>After creating a new branch we specify the rate limiting rule:</p>
<pre><code>$ git checkout -b step4-ratelimit
Switched to a new branch 'step4-ratelimit'

$ cat &gt;&gt; cloudflare.cf &lt;&lt;'EOF'
resource &quot;cloudflare_rate_limit&quot; &quot;login-limit&quot; {
  zone = &quot;${var.domain}&quot;

  threshold = 5
  period = 60
  match {
    request {
      url_pattern = &quot;${var.domain}/login&quot;
      schemes = [&quot;HTTP&quot;, &quot;HTTPS&quot;]
      methods = [&quot;POST&quot;]
    }
    response {
      statuses = [401, 403]
      origin_traffic = true
    }
  }
  action {
    mode = &quot;simulate&quot;
    timeout = 300
    response {
      content_type = &quot;text/plain&quot;
      body = &quot;You have failed to login 5 times in a 60 second period and will be blocked from attempting to login again for the next 5 minutes.&quot;
    }
  }
  disabled = false
  description = &quot;Block failed login attempts (5 in 1 min) for 5 minutes.&quot;
}
EOF
</code></pre>
<p>This rule is a bit more complex than the zone settings rule, so let's break it down:</p>
<pre><code>00: resource &quot;cloudflare_rate_limit&quot; &quot;login-limit&quot; {
01:   zone = &quot;${var.domain}&quot;
02:
03:   threshold = 5
04:   period = 60
</code></pre>
<p>The threshold is an integer count of how many times an event (defined by the match block below) has to be detected in the period before the rule takes action. The period is measured in seconds, so the above rule says to take action if the match fires 5 times in 60 seconds.</p>
<pre><code>05:   match {
06:     request {
07:       url_pattern = &quot;${var.domain}/login&quot;
08:       schemes = [&quot;HTTP&quot;, &quot;HTTPS&quot;]
09:       methods = [&quot;POST&quot;]
10:     }
11:     response {
12:       statuses = [401, 403]
13:     }
14:   }
</code></pre>
<p>The match block tells the Cloudflare edge what to be on the lookout for, i.e., HTTP or HTTPS POST requests to <code>https://www.example.com/login</code>. We further restrict the match to HTTP <code>401/Unauthorized</code> or <code>403/Forbidden</code> response codes returned from the origin.</p>
<pre><code>15:   action {
16:     mode = &quot;simulate&quot;
17:     timeout = 300
18:     response {
19:       content_type = &quot;text/plain&quot;
20:       body = &quot;You have failed to login 5 times in a 60 second period and will be blocked from attempting to login again for the next 5 minutes.&quot;
21:     }
22:   }
23:   disabled = false
24:   description = &quot;Block failed login attempts (5 in 1 min) for 5 minutes.&quot;
25: }
</code></pre>
<p>After matching traffic, we set the action for our edge to take. When testing, it's a good idea to set the mode to simulate and review logs before taking enforcement action (see below). The timeout field here indicates that we want to enforce this action for 300 seconds (5 minutes) and the response block indicates what should be sent back to the caller that tripped the rate limit.</p>
<h4 id="2previewandmergethechanges">2. Preview and merge the changes</h4>
<p>As usual, we take a look at the proposed plan before we apply any changes:</p>
<pre><code>$ terraform plan
...
Terraform will perform the following actions:

  + cloudflare_rate_limit.login-limit
      id:                                     &lt;computed&gt;
      action.#:                               &quot;1&quot;
      action.0.mode:                          &quot;simulate&quot;
      action.0.response.#:                    &quot;1&quot;
      action.0.response.0.body:               &quot;You have failed to login 5 times in a 60 second period and will be blocked from attempting to login again for the next 5 minutes.&quot;
      action.0.response.0.content_type:       &quot;text/plain&quot;
      action.0.timeout:                       &quot;300&quot;
      description:                            &quot;Block failed login attempts (5 in 1 min) for 5 minutes.&quot;
      disabled:                               &quot;false&quot;
      match.#:                                &quot;1&quot;
      match.0.request.#:                      &quot;1&quot;
      match.0.request.0.methods.#:            &quot;1&quot;
      match.0.request.0.methods.1012961568:   &quot;POST&quot;
      match.0.request.0.schemes.#:            &quot;2&quot;
      match.0.request.0.schemes.2328579708:   &quot;HTTP&quot;
      match.0.request.0.schemes.2534674783:   &quot;HTTPS&quot;
      match.0.request.0.url_pattern:          &quot;www.example.com/login&quot;
      match.0.response.#:                     &quot;1&quot;
      match.0.response.0.origin_traffic:      &quot;true&quot;
      match.0.response.0.statuses.#:          &quot;2&quot;
      match.0.response.0.statuses.1057413486: &quot;403&quot;
      match.0.response.0.statuses.221297644:  &quot;401&quot;
      period:                                 &quot;60&quot;
      threshold:                              &quot;5&quot;
      zone:                                   &quot;example.com&quot;
      zone_id:                                &lt;computed&gt;


Plan: 1 to add, 0 to change, 0 to destroy.
</code></pre>
<p>The plan looks good so let's go ahead, merge it in, and apply it.</p>
<pre><code>$ git add cloudflare.tf
$ git commit -m &quot;Step 4 - Add rate limiting rule to protect /login.&quot;
[step4-ratelimit 0f7e499] Step 4 - Add rate limiting rule to protect /login.
 1 file changed, 28 insertions(+)

$ git checkout master
Switched to branch 'master'

$ git merge step4-ratelimit
Updating 321c2bd..0f7e499
Fast-forward
 cloudflare.tf | 28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)

$ terraform apply --auto-approve
cloudflare_record.www: Refreshing state... (ID: c38d3103767284e7cd14d5dad3ab8668)
cloudflare_zone_settings_override.example-com-settings: Refreshing state... (ID: e2e6491340be87a3726f91fc4148b125)
cloudflare_rate_limit.login-limit: Creating...
  action.#:                               &quot;&quot; =&gt; &quot;1&quot;
  action.0.mode:                          &quot;&quot; =&gt; &quot;simulate&quot;
  action.0.response.#:                    &quot;&quot; =&gt; &quot;1&quot;
  action.0.response.0.body:               &quot;&quot; =&gt; &quot;You have failed to login 5 times in a 60 second period and will be blocked from attempting to login again for the next 5 minutes.&quot;
  action.0.response.0.content_type:       &quot;&quot; =&gt; &quot;text/plain&quot;
  action.0.timeout:                       &quot;&quot; =&gt; &quot;300&quot;
  description:                            &quot;&quot; =&gt; &quot;Block failed login attempts (5 in 1 min) for 5 minutes.&quot;
  disabled:                               &quot;&quot; =&gt; &quot;false&quot;
  match.#:                                &quot;&quot; =&gt; &quot;1&quot;
  match.0.request.#:                      &quot;&quot; =&gt; &quot;1&quot;
  match.0.request.0.methods.#:            &quot;&quot; =&gt; &quot;1&quot;
  match.0.request.0.methods.1012961568:   &quot;&quot; =&gt; &quot;POST&quot;
  match.0.request.0.schemes.#:            &quot;&quot; =&gt; &quot;2&quot;
  match.0.request.0.schemes.2328579708:   &quot;&quot; =&gt; &quot;HTTP&quot;
  match.0.request.0.schemes.2534674783:   &quot;&quot; =&gt; &quot;HTTPS&quot;
  match.0.request.0.url_pattern:          &quot;&quot; =&gt; &quot;www.example.com/login&quot;
  match.0.response.#:                     &quot;&quot; =&gt; &quot;1&quot;
  match.0.response.0.origin_traffic:      &quot;&quot; =&gt; &quot;true&quot;
  match.0.response.0.statuses.#:          &quot;&quot; =&gt; &quot;2&quot;
  match.0.response.0.statuses.1057413486: &quot;&quot; =&gt; &quot;403&quot;
  match.0.response.0.statuses.221297644:  &quot;&quot; =&gt; &quot;401&quot;
  period:                                 &quot;&quot; =&gt; &quot;60&quot;
  threshold:                              &quot;&quot; =&gt; &quot;5&quot;
  zone:                                   &quot;&quot; =&gt; &quot;example.com&quot;
  zone_id:                                &quot;&quot; =&gt; &quot;&lt;computed&gt;&quot;
cloudflare_rate_limit.login-limit: Creation complete after 1s (ID: 8d518c5d6e63406a9466d83cb8675bb6)

Apply complete! Resources: 1 added, 0 changed, 0 destroyed.
</code></pre>
<p>Note that if you haven't purchased rate limiting yet, you will see the following error when attempting to apply the new rule:</p>
<pre><code>Error: Error applying plan:

1 error(s) occurred:

* cloudflare_rate_limit.login-limit: 1 error(s) occurred:

* cloudflare_rate_limit.login-limit: error creating rate limit for zone: error from makeRequest: HTTP status 400: content &quot;{\n  \&quot;result\&quot;: null,\n  \&quot;success\&quot;: false,\n  \&quot;errors\&quot;: [\n    {\n      \&quot;code\&quot;: 10021,\n      \&quot;message\&quot;: \&quot;ratelimit.api.not_entitled.account\&quot;\n    }\n  ],\n  \&quot;messages\&quot;: []\n}\n&quot;
</code></pre>
<h4 id="3updatetheruletobannotjustsimulate">3. Update the rule to ban (not just simulate)</h4>
<p>After confirming that the rule is triggering as planned in logs (but not yet enforcing), it's time to switch from simulate to ban:</p>
<pre><code>$ git checkout step4-ratelimit
$ sed -i.bak -e 's/simulate/ban/' cloudflare.tf

$ git diff
diff --git a/cloudflare.tf b/cloudflare.tf
index ed5157c..9f25a0c 100644
--- a/cloudflare.tf
+++ b/cloudflare.tf
@@ -42,7 +42,7 @@ resource &quot;cloudflare_rate_limit&quot; &quot;login-limit&quot; {
     }
   }
   action {
-    mode = &quot;simulate&quot;
+    mode = &quot;ban&quot;
     timeout = 300
     response {
       content_type = &quot;text/plain&quot;
</code></pre>
<pre><code>$ terraform plan
Refreshing Terraform state in-memory prior to plan...
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.

cloudflare_zone_settings_override.example-com-settings: Refreshing state... (ID: e2e6491340be87a3726f91fc4148b126)
cloudflare_rate_limit.login-limit: Refreshing state... (ID: 8d518c5d6e63406a9466d83cb8675bb6)
cloudflare_record.www: Refreshing state... (ID: c38d3103767284e7cd14d5dad3ab8669)

------------------------------------------------------------------------

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  ~ update in-place

Terraform will perform the following actions:

  ~ cloudflare_rate_limit.login-limit
      action.0.mode: &quot;simulate&quot; =&gt; &quot;ban&quot;

Plan: 0 to add, 1 to change, 0 to destroy.
</code></pre>
<h4 id="4mergeanddeploytheupdatedrulethenpushconfigtogithub">4. Merge and deploy the updated rule, then push config to GitHub</h4>
<pre><code>$ git add cloudflare.tf

$ git commit -m &quot;Step 4 - Update /login rate limit rule from 'simulate' to 'ban'.&quot;
[step4-ratelimit e1c38cf] Step 4 - Update /login rate limit rule from 'simulate' to 'ban'.
 1 file changed, 1 insertion(+), 1 deletion(-)

$ git checkout master &amp;&amp; git merge step4-ratelimit &amp;&amp; git push
Switched to branch 'master'
Updating 0f7e499..e1c38cf
Fast-forward
 cloudflare.tf | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
Counting objects: 3, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 361 bytes | 0 bytes/s, done.
Total 3 (delta 1), reused 0 (delta 0)
remote: Resolving deltas: 100% (1/1), completed with 1 local object.
To <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="8ee9e7facee9e7fae6fbeca0ede1e3">[email&#160;protected]</a>:$GITHUB_USER/cf-config.git
   0f7e499..e1c38cf  master -&gt; master
</code></pre>
<pre><code>$ terraform apply --auto-approve
cloudflare_rate_limit.login-limit: Refreshing state... (ID: 8d518c5d6e63406a9466d83cb8675bb6)
cloudflare_record.www: Refreshing state... (ID: c38d3103767284e7cd14d5dad3ab8669)
cloudflare_zone_settings_override.example-com-settings: Refreshing state... (ID: e2e6491340be87a3726f91fc4148b126)
cloudflare_rate_limit.login-limit: Modifying... (ID: 8d518c5d6e63406a9466d83cb8675bb6)
  action.0.mode: &quot;simulate&quot; =&gt; &quot;ban&quot;
cloudflare_rate_limit.login-limit: Modifications complete after 0s (ID: 8d518c5d6e63406a9466d83cb8675bb6)

Apply complete! Resources: 0 added, 1 changed, 0 destroyed.
</code></pre>
<h4 id="5confirmtheruleworksasexpected">5. Confirm the rule works as expected</h4>
<p>This step is optional, but it's a good way to demonstrate that the rule is working as expected (note the final <code>429</code> response):</p>
<pre><code>$ for i in {1..6}; do curl -XPOST -d '{&quot;username&quot;: &quot;foo&quot;, &quot;password&quot;: &quot;bar&quot;}' -vso /dev/null https://www.example.com/login 2&gt;&amp;1 | grep &quot;&lt; HTTP&quot;; sleep 1; done
&lt; HTTP/1.1 401 Unauthorized
&lt; HTTP/1.1 401 Unauthorized
&lt; HTTP/1.1 401 Unauthorized
&lt; HTTP/1.1 401 Unauthorized
&lt; HTTP/1.1 401 Unauthorized
&lt; HTTP/1.1 429 Too Many Requests
</code></pre>
<h3 id="wrappingup">Wrapping up</h3>
<p>That's it for today! Stay tuned next week for <a href="https://blog.cloudflare.com/getting-started-with-terraform-and-cloudflare-part-2/">part 2 of this post</a>, where we continue the tour through the following resources and techniques:</p>
<ul>
<li>Load Balancing Resource</li>
<li>Page Rules Resource</li>
<li>Reviewing and Rolling Back Changes</li>
<li>Importing Existing State and Configuration</li>
</ul>
<!--kg-card-end: markdown-->
            </div>
        </section>

        <a href="/tag/developers/" class="dib pl2 pr2 pt1 pb1 mb2 bg-gray8 no-underline blue3 f2">Developers</a>
        <a href="/tag/terraform/" class="dib pl2 pr2 pt1 pb1 mb2 bg-gray8 no-underline blue3 f2">Terraform</a>
        <a href="/tag/hashicorp/" class="dib pl2 pr2 pt1 pb1 mb2 bg-gray8 no-underline blue3 f2">HashiCorp</a>
        <a href="/tag/programming/" class="dib pl2 pr2 pt1 pb1 mb2 bg-gray8 no-underline blue3 f2">Programming</a>
    </article>
</main>

<div class="pv4 flex flex-row flex-wrap mw7 center">
    <div class="w-100 ph3 bt b--gray8">
        <p class="orange fw5 f4 mt4 ttu">Related Posts</p>
    </div>

    <article class="w-100 w-100-m w-50-l ph3 mb4">
        <p class="f3 fw5 gray5" data-iso-date="2019-05-18T01:01:00+01:00">May 18, 2019 1:01AM</p>
        <a href="/moscow-developers-join-cloudflare-yandex-at-our-meetup/" class="no-underline gray1 f4 fw5">
            <h2 class="gray1 f4 fw5 mt2">Join Cloudflare &amp; Yandex at our Moscow meetup! Присоединяйтесь к митапу в Москве!</h2>
        </a>

        <p class="gray1 lh-copy">Are you based in Moscow? Cloudflare is partnering with Yandex to produce a meetup this month in Yandex's Moscow headquarters.  We would love to invite you to join us to learn about the newest in the Internet industry....</p>
        <ul class="flex pl0 fw6 f2">
            <span>By&nbsp;</span>
            <li class="list flex items-center">
                <div class="author-name-tooltip">
                    
                    <a href="/author/andrew/" class="fw5 f2 black no-underline">Andrew Fitch</a>
                </div>
            </li>
            <li class="list flex items-center">
                <div class="author-name-tooltip">
                    <span class="fw5 f2 black no-underline">,&nbsp;</span>
                    <a href="/author/albina/" class="fw5 f2 black no-underline">Albina Sultangulova</a>
                </div>
            </li>
        </ul>
        <div class="flex flex-row flex-wrap">
            
            <a href="/tag/developers/" class="no-underline f1 fw2 blue3 underline-hover">Developers</a>
            <span class="f1 fw2 blue3 no-underline underline-hover">,&nbsp;</span>
            <a href="/tag/russia/" class="no-underline f1 fw2 blue3 underline-hover">Russia</a>
            <span class="f1 fw2 blue3 no-underline underline-hover">,&nbsp;</span>
            <a href="/tag/cloudflare-meetups/" class="no-underline f1 fw2 blue3 underline-hover">Cloudflare Meetups</a>
            <span class="f1 fw2 blue3 no-underline underline-hover">,&nbsp;</span>
            <a href="/tag/meetup/" class="no-underline f1 fw2 blue3 underline-hover">MeetUp</a>
            <span class="f1 fw2 blue3 no-underline underline-hover">,&nbsp;</span>
            <a href="/tag/events/" class="no-underline f1 fw2 blue3 underline-hover">Events</a>
        </div>
    </article>
    <article class="w-100 w-100-m w-50-l ph3 mb4">
        <p class="f3 fw5 gray5" data-iso-date="2018-11-23T15:49:00Z">November 23, 2018 3:49PM</p>
        <a href="/every-7-8us-your-computers-memory-has-a-hiccup/" class="no-underline gray1 f4 fw5">
            <h2 class="gray1 f4 fw5 mt2">Every 7.8μs your computer’s memory has a hiccup</h2>
        </a>

        <p class="gray1 lh-copy">I was particularly interested in one of the consequences of how dynamic RAM works. You see, each bit of data is stored by the charge (or lack of it) on a tiny capacitor within the RAM chip. But these capacitors gradually lose their charge over time....</p>
        <ul class="flex pl0 fw6 f2">
            <span>By&nbsp;</span>
            <li class="list flex items-center">
                <div class="author-name-tooltip">
                    
                    <a href="/author/marek-majkowski/" class="fw5 f2 black no-underline">Marek Majkowski</a>
                </div>
            </li>
        </ul>
        <div class="flex flex-row flex-wrap">
            
            <a href="/tag/developers/" class="no-underline f1 fw2 blue3 underline-hover">Developers</a>
            <span class="f1 fw2 blue3 no-underline underline-hover">,&nbsp;</span>
            <a href="/tag/programming/" class="no-underline f1 fw2 blue3 underline-hover">Programming</a>
        </div>
    </article>
    <article class="w-100 w-100-m w-50-l ph3 mb4">
        <p class="f3 fw5 gray5" data-iso-date="2018-05-08T22:28:44+01:00">May 08, 2018 10:28PM</p>
        <a href="/rise-of-edge-compute-the-video/" class="no-underline gray1 f4 fw5">
            <h2 class="gray1 f4 fw5 mt2">The Rise of Edge Compute: The Video</h2>
        </a>

        <p class="gray1 lh-copy">At the end of March, Kenton Varda, tech lead and architect for Cloudflare Workers, traveled to London and led a talk about the Rise of Edge Compute where he laid out our vision for the future of the Internet as a platform....</p>
        <ul class="flex pl0 fw6 f2">
            <span>By&nbsp;</span>
            <li class="list flex items-center">
                <div class="author-name-tooltip">
                    
                    <a href="/author/andrew/" class="fw5 f2 black no-underline">Andrew Fitch</a>
                </div>
            </li>
        </ul>
        <div class="flex flex-row flex-wrap">
            
            <a href="/tag/developers/" class="no-underline f1 fw2 blue3 underline-hover">Developers</a>
            <span class="f1 fw2 blue3 no-underline underline-hover">,&nbsp;</span>
            <a href="/tag/community/" class="no-underline f1 fw2 blue3 underline-hover">Community</a>
            <span class="f1 fw2 blue3 no-underline underline-hover">,&nbsp;</span>
            <a href="/tag/events/" class="no-underline f1 fw2 blue3 underline-hover">Events</a>
            <span class="f1 fw2 blue3 no-underline underline-hover">,&nbsp;</span>
            <a href="/tag/video/" class="no-underline f1 fw2 blue3 underline-hover">Video</a>
            <span class="f1 fw2 blue3 no-underline underline-hover">,&nbsp;</span>
            <a href="/tag/cloudflare-apps/" class="no-underline f1 fw2 blue3 underline-hover">Cloudflare Apps</a>
        </div>
    </article>
    <article class="w-100 w-100-m w-50-l ph3 mb4">
        <p class="f3 fw5 gray5" data-iso-date="2018-04-30T17:20:45+01:00">April 30, 2018 5:20PM</p>
        <a href="/getting-started-with-terraform-and-cloudflare-part-2/" class="no-underline gray1 f4 fw5">
            <h2 class="gray1 f4 fw5 mt2">Getting started with Terraform and Cloudflare (Part 2 of 2)</h2>
        </a>

        <p class="gray1 lh-copy">Continue exploring Terraform with Cloudflare by enabling load balancing, creating page rules, and rolling back changes....</p>
        <ul class="flex pl0 fw6 f2">
            <span>By&nbsp;</span>
            <li class="list flex items-center">
                <div class="author-name-tooltip">
                    
                    <a href="/author/patrick/" class="fw5 f2 black no-underline">Patrick R. Donahue</a>
                </div>
            </li>
        </ul>
        <div class="flex flex-row flex-wrap">
            
            <a href="/tag/developers/" class="no-underline f1 fw2 blue3 underline-hover">Developers</a>
            <span class="f1 fw2 blue3 no-underline underline-hover">,&nbsp;</span>
            <a href="/tag/terraform/" class="no-underline f1 fw2 blue3 underline-hover">Terraform</a>
            <span class="f1 fw2 blue3 no-underline underline-hover">,&nbsp;</span>
            <a href="/tag/loadbalancing/" class="no-underline f1 fw2 blue3 underline-hover">Load Balancing</a>
            <span class="f1 fw2 blue3 no-underline underline-hover">,&nbsp;</span>
            <a href="/tag/page-rules/" class="no-underline f1 fw2 blue3 underline-hover">Page Rules</a>
            <span class="f1 fw2 blue3 no-underline underline-hover">,&nbsp;</span>
            <a href="/tag/hashicorp/" class="no-underline f1 fw2 blue3 underline-hover">HashiCorp</a>
        </div>
    </article>

</div>
<div class="pv4 ph3 mw7 center">
    <div id="disqus_thread"></div>
</div>



        <footer class="pt4 pb4 pl1 pr1 main-footer">
  <div class="mw8 center dn db-l ph3">
    <div class="flex flex-row justify-between">
      <div class="main-footer__menu-group">
        <ul id="sales-menu" class="list pl0">
          <li class="pt1 pb1 f1" data-submenu="sales-menu"
            class="main-footer__menu-group__header js-toggle-footer-group f1">
            Sales
            <i class="icon-caret-down"></i>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/plans/enterprise/contact/" data-tracking-category="footer"
              data-tracking-action="click" data-tracking-label="enterprise_sales"
              class="f1 blue3 no-underline underline-hover">
              Enterprise Sales
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/partners/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="become_a_partner" class="f1 blue3 no-underline underline-hover">
              Become a Partner
            </a>
          </li>
        </ul>
        <p class="phone f1 blue3 no-underline underline-hover">
          <p class="tel f1 blue3 no-underline underline-hover">Contact Sales:</p>
          <p><a data-i18n-phonenumber="" class="tel f1 blue3 no-underline underline-hover" href="tel:+18889935273">+1
              (888) 99 FLARE</a></p>

          <noscript><a class="phone f1 blue3 no-underline underline-hover" href="tel:+16503198930">+1 650 319
              8930</a></noscript>
        </p>
      </div>
      <div class="main-footer__menu-group">
        <ul id="getting-started-menu" class="list pl0">
          <li class="pt1 pb1 f1" data-submenu="getting-started-menu"
            class="main-footer__menu-group__header js-toggle-footer-group">
            Getting Started
            <i class="icon-caret-down"></i>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/plans/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="plans" class="f1 blue3 no-underline underline-hover">
              Pricing
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/case-studies/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="case_studies" class="f1 blue3 no-underline underline-hover">
              Case Studies
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/resources/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="white_papers" class="f1 blue3 no-underline underline-hover">
              White Papers
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/webinars/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="webinars" class="f1 blue3 no-underline underline-hover">
              Webinars
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/learning/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="learning_center" class="f1 blue3 no-underline underline-hover">
              Learning Center
            </a>
          </li>
        </ul>
      </div>
      <div class="main-footer__menu-group">
        <ul id="community-menu" class="list pl0">
          <li class="pt1 pb1 f1" data-submenu="community-menu"
            class="main-footer__menu-group__header js-toggle-footer-group">
            Community
            <i class="icon-caret-down"></i>
          </li>
          <li class="pt1 pb1">
            <a href="https://community.cloudflare.com" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="community_hub" class="f1 blue3 no-underline underline-hover">
              Community Hub
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://blog.cloudflare.com" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="blog" class="f1 blue3 no-underline underline-hover">
              Blog
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/galileo/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="galileo" class="f1 blue3 no-underline underline-hover">
              Project Galileo
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/athenian/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="athenian" class="f1 blue3 no-underline underline-hover">
              Athenian Project
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.tv/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="tv" class="f1 blue3 no-underline underline-hover">
              Cloudflare TV
            </a>
          </li>
        </ul>
      </div>
      <div class="main-footer__menu-group">
        <ul id="developers-menu" class="list pl0">
          <li class="pt1 pb1 f1" data-submenu="developers-menu"
            class="main-footer__menu-group__header js-toggle-footer-group">
            Developers
            <i class="icon-caret-down"></i>
          </li>
          <li class="pt1 pb1">
            <a href="https://developers.cloudflare.com" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="developer_hub" class="f1 blue3 no-underline underline-hover">
              Developer Hub
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/technical-resources/" data-tracking-category="footer"
              data-tracking-action="click" data-tracking-label="technical_resources"
              class="f1 blue3 no-underline underline-hover">
              Technical Resources
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/products/cloudflare-workers/" data-tracking-category="footer"
              data-tracking-action="click" data-tracking-label="cloudflare_workers"
              class="f1 blue3 no-underline underline-hover">
              Cloudflare Workers
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/integrations/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="integrations" class="f1 blue3 no-underline underline-hover">
              Integrations
            </a>
          </li>
        </ul>
      </div>
      <div class="main-footer__menu-group">
        <ul id="support-menu" class="list pl0">
          <li class="pt1 pb1 f1" data-submenu="support-menu"
            class="main-footer__menu-group__header js-toggle-footer-group">
            Support
            <i class="icon-caret-down"></i>
          </li>
          <li class="pt1 pb1">
            <a href="https://support.cloudflare.com" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="support" class="f1 blue3 no-underline underline-hover">
              Support
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://www.cloudflarestatus.com" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="status" class="f1 blue3 no-underline underline-hover">
              Cloudflare Status
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/compliance/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="compliance" class="f1 blue3 no-underline underline-hover">
              Compliance
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/gdpr/introduction/" data-tracking-category="footer"
              data-tracking-action="click" data-tracking-label="gdpr" class="f1 blue3 no-underline underline-hover">
              GDPR
            </a>
          </li>
        </ul>
      </div>
      <div class="main-footer__menu-group">
        <ul id="company-menu" class="list pl0">
          <li class="pt1 pb1 f1" data-submenu="company-menu"
            class="main-footer__menu-group__header js-toggle-footer-group">
            Company
            <i class="icon-caret-down"></i>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/about-overview/" data-tracking-category="footer"
              data-tracking-action="click" data-tracking-label="overview" class="f1 blue3 no-underline underline-hover">
              About Cloudflare
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/people/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="our_team" class="f1 blue3 no-underline underline-hover">
              Our Team
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/press/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="press" class="f1 blue3 no-underline underline-hover">
              Press
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/analysts/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="analysts" class="f1 blue3 no-underline underline-hover">
              Analysts
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/careers/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="careers" class="f1 blue3 no-underline underline-hover">
              Careers
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/internetsummit/" data-tracking-category="footer"
              data-tracking-action="click" data-tracking-label="internet_summit"
              class="f1 blue3 no-underline underline-hover">
              Internet Summit
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/logo/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="logo" class="f1 blue3 no-underline underline-hover">
              Logo
            </a>
          </li>
          <li class="pt1 pb1">
            <a href="https://cloudflare.com/network/" data-tracking-category="footer" data-tracking-action="click"
              data-tracking-label="network_map" class="f1 blue3 no-underline underline-hover">
              Network Map
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="mw8 center ph3">
    <div class="flex flex-row flex-wrap justify-between pt4">
      <div class="flex flex-row items-start w-100 w-50-l pb4 pb0-l">
        <a target="_blank" rel="noopener" href="https://www.facebook.com/Cloudflare/" class="w-10"><img
            src="https://cloudflare.com/img/footer/facebook.svg" class="w-60"></a>
        <a target=" _blank" rel="noopener" href="https://twitter.com/Cloudflare" class="w-10"><img
            src="https://cloudflare.com/img/footer/twitter.svg" class="w-60"></a>
        <a target="_blank" rel="noopener" href="https://www.linkedin.com/company/cloudflare-inc-" class="w-10"><img
            src="https://cloudflare.com/img/footer/linkedin.svg" class="w-60"></a>
        <a target="_blank" rel="noopener" href="https://www.youtube.com/cloudflare" class="w-10"><img
            src="https://cloudflare.com/img/footer/youtube.svg" class="w-60"></a>
        <a target="_blank" rel="noopener" href="https://www.instagram.com/cloudflare" class="w-10"><img
            src="https://cloudflare.com/img/footer/instagram.svg" class="w-60"></a>
      </div>
      <div class="w-100 w-50-l tr-l tl-ns">
        <div>
          <span class="main-footer__copyright f1">© 2020 Cloudflare, Inc.</span>
          <span class="main-footer__copyright f1">|</span>
          <a href="https://cloudflare.com/privacypolicy/"
            class="main-footer__copyright f1 no-underline underline-hover">Privacy
            Policy</a>
          <span class="main-footer__copyright f1">|</span>
          <a href="https://cloudflare.com/website-terms/"
            class="main-footer__copyright f1 no-underline underline-hover">Terms of Use</a>
          <span class="main-footer__copyright f1">|</span>
          <a href="https://cloudflare.com/abuse/"
            class="main-footer__copyright f1 no-underline underline-hover">Trust &amp; Safety</a>
          <span class="main-footer__copyright f1">|</span>
          <a href="https://cloudflare.com/trademark/"
            class="main-footer__copyright f1 no-underline underline-hover">Trademark</a>
        </div>
      </div>
    </div>
  </div>
</footer>    </div>


    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="text/javascript" src="/assets/built/prism.js?v=fdf4009e30"></script>
<script type="text/javascript">
    var disqus_shortname = 'cloudflare';
    (function () {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
        Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + '://platform.twitter.com/widgets.js'; fjs.parentNode.insertBefore(js, fjs); } }(document, 'script', 'twitter-wjs');
</script>
<script>(function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=596756540369391";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>
<script src="//platform.linkedin.com/in.js" type="text/javascript">lang: en_US</script>
<script type="text/javascript">
        (function () {
            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
            po.src = 'https://apis.google.com/js/platform.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
        })();
</script>

<script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = p + '://platform.twitter.com/widgets.js'; fjs.parentNode.insertBefore(js, fjs); } }(document, 'script', 'twitter-wjs');
</script>
<script>(function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=596756540369391";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>
<script src="//platform.linkedin.com/in.js" type="text/javascript">lang: en_US</script>
<script type="text/javascript">
        (function () {
            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
            po.src = 'https://apis.google.com/js/platform.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
        })();
</script>


    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PKQFGQB"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<script>
    var links = document.links;

    for (var i = 0, linksLength = links.length; i < linksLength; i++) {  
       if (links[i].hostname != window.location.hostname) {
           links[i].target = '_blank';
       } 
    } 
</script>

<script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon='{"si":10,"rayId":"633cc7d4eb28cebc","version":"2021.2.0"}'></script>
</body>

</html>