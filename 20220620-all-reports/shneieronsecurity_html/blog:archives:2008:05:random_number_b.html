<!DOCTYPE html>
<html lang="en-US">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<title>Random Number Bug in Debian Linux - Schneier on Security</title>
	<meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel='dns-prefetch' href='//c0.wp.com' />
<link rel="alternate" type="application/rss+xml" title="Schneier on Security &raquo; Feed" href="https://www.schneier.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Schneier on Security &raquo; Comments Feed" href="https://www.schneier.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Schneier on Security &raquo; Random Number Bug in Debian Linux Comments Feed" href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/feed/" />
<link rel='stylesheet' id='wp-block-library-css'  href='https://c0.wp.com/c/5.7/wp-includes/css/dist/block-library/style.min.css' type='text/css' media='all' />
<style id='wp-block-library-inline-css' type='text/css'>
.has-text-align-justify{text-align:justify;}
</style>
<style id='woocommerce-inline-inline-css' type='text/css'>
.woocommerce form .form-row .required { visibility: visible; }
</style>
<link rel='stylesheet' id='schneier-css'  href='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/style.css?ver=1.0.0' type='text/css' media='all' />
<link rel='stylesheet' id='schneier-main-css'  href='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/dist/css/style.css?ver=1.0.2' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='https://c0.wp.com/p/jetpack/9.5.2/css/jetpack.css' type='text/css' media='all' />
<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js?ver=3.5.1' id='jquery-js'></script>
<link rel="https://api.w.org/" href="https://www.schneier.com/wp-json/" /><link rel="alternate" type="application/json" href="https://www.schneier.com/wp-json/wp/v2/posts/2258" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.schneier.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.schneier.com/wp-includes/wlwmanifest.xml" /> 

<link rel="canonical" href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html" />
<link rel='shortlink' href='https://www.schneier.com/?p=2258' />
<link rel="alternate" type="application/json+oembed" href="https://www.schneier.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.schneier.com%2Fblog%2Farchives%2F2008%2F05%2Frandom_number_b.html" />
<link rel="alternate" type="text/xml+oembed" href="https://www.schneier.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.schneier.com%2Fblog%2Farchives%2F2008%2F05%2Frandom_number_b.html&#038;format=xml" />
	<noscript><style>.woocommerce-product-gallery{ opacity: 1 !important; }</style></noscript>
	<link rel="icon" href="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-32x32.png" sizes="32x32" />
<link rel="icon" href="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon" href="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-180x180.png" />
<meta name="msapplication-TileImage" content="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-270x270.png" />
		<style type="text/css" id="wp-custom-css">
			#schneier_promotion-2 img {
    max-width: 180px;
}		</style>
		</head>

<body class="post-template-default single single-post postid-2258 single-format-standard theme-schneier woocommerce-no-js">

	<div id="wrapper">
		<div id="main">

			<header>
				<div id="header">
					<h1>
						<a href="https://www.schneier.com/" rel="home">
							Schneier on Security						</a>
					</h1>
				</div>
			</header>

			<nav>
				<div class="nav" id="header-nav">
					<div class="menu-main-menu-container"><ul id="menu-main-menu" class="menu"><li id="menu-item-50175" class="menu1 menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-50175 current-menu-item"><a href="https://www.schneier.com">Blog</a></li>
<li id="menu-item-50916" class="menu2 menu-item menu-item-type-post_type menu-item-object-page menu-item-50916"><a href="https://www.schneier.com/crypto-gram/">Newsletter</a></li>
<li id="menu-item-50166" class="menu3 menu-item menu-item-type-post_type menu-item-object-page menu-item-50166"><a href="https://www.schneier.com/books/">Books</a></li>
<li id="menu-item-50169" class="menu4 menu-item menu-item-type-custom menu-item-object-custom menu-item-50169"><a href="https://www.schneier.com/essays/">Essays</a></li>
<li id="menu-item-50170" class="menu5 menu-item menu-item-type-custom menu-item-object-custom menu-item-50170"><a href="https://www.schneier.com/news/">News</a></li>
<li id="menu-item-50171" class="menu6 menu-item menu-item-type-custom menu-item-object-custom menu-item-50171"><a href="https://www.schneier.com/talks/">Talks</a></li>
<li id="menu-item-50167" class="menu7 menu-item menu-item-type-post_type menu-item-object-page menu-item-50167"><a href="https://www.schneier.com/academic/">Academic</a></li>
<li id="menu-item-50174" class="menu8 menu-item menu-item-type-post_type menu-item-object-page menu-item-50174"><a href="https://www.schneier.com/blog/about/">About Me</a></li>
</ul></div>				</div>
			</nav>

			
<aside>
	<div class="sidebar" id="sidebar-one">
		<section><div class="sidesection widget widget_schneier_search" id="schneier_search-3"><h3>Search</h3>
<p class="small">
	<em>Powered by <a href="https://duckduckgo.com/">DuckDuckGo</a></em></p>

<form method="get" action="https://duckduckgo.com/">

	<input type="hidden" name="kh" value="1" /><!-- use https -->

	<input id="search" name="q" size="15" maxlength="255" />

	<input type="submit" value="Go" /><br>

	<input type="radio" name="sites" id="searchblog" value="www.schneier.com/blog" />
	<label for="searchblog">Blog</label>

	<input type="radio" name="sites" id="searchessays" value="www.schneier.com/essays" />
	<label for="searchessays">Essays</label>

	<input type="radio" name="sites" id="searchall" value="www.schneier.com" checked="" />
	<label for="searchall">Whole site</label>

</form>
</div></section><section><div class="sidesection widget widget_schneier_social" id="schneier_social-2"><h3>Subscribe</h3>
<div id="subscription-buttons">

	<a href="https://www.schneier.com/feed/atom"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/rss-32px.png" alt="Atom Feed" /></a><a href="https://www.facebook.com/bruce.schneier"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/facebook-32px.png" alt="Facebook" /></a><a href="https://twitter.com/schneierblog/"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/twitter-32px.png" alt="Twitter" /></a><a href="https://www.amazon.com/Schneier-on-Security/dp/B0053HDDWW/"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/kindle-32px.png" alt="Kindle" /></a><a href="https://www.schneier.com/crypto-gram"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/email-32px.png" alt="E-Mail Newsletter (Crypto-Gram)" /></a>
</div>
</div></section>	</div>
</aside>

			<div id="content">

				
		<p id="breadcrumbs">

			<a href="https://www.schneier.com">Home</a><a href="https://www.schneier.com/blog/archives/">Blog</a>		</p>

		
<article id="post-2258" class="post-2258 post type-post status-publish format-standard hentry category-uncategorized tag-cryptography tag-hacking tag-linux tag-nsa tag-operating-systems tag-random-numbers tag-vulnerabilities">

	<div class="article">

		<h2 class="entry">Random Number Bug in Debian Linux</h2>
		<p>This is a <a href="http://metasploit.com/users/hdm/tools/debian-openssl/">big deal</a>:</p>
<blockquote><p>On May 13th, 2008 the Debian project <a href="http://www.debian.org/security/2008/dsa-1571">announced</a> that Luciano Bello found an interesting vulnerability in the OpenSSL package they were distributing. The bug in question was caused by the removal of the following line of code from <i>md_rand.c</i></p>
<pre>
	MD_Update(&m,buf,j);
	[ .. ]
	MD_Update(&m,buf,j); /* purify complains */
</pre>
<p>These lines were <a href="http://svn.debian.org/viewsvn/pkg-openssl/openssl/trunk/rand/md_rand.c?rev=141&#038;view=diff&#038;r1=141&#038;r2=140&#038;p1=openssl/trunk/rand/md_rand.c&#038;p2=/openssl/trunk/rand/md_rand.c">removed</a> because they caused the <a href="http://valgrind.org/">Valgrind</a> and Purify tools to produce warnings about the use of uninitialized data in any code that was linked to OpenSSL. You can see one such report to the OpenSSL team <a href="http://rt.openssl.org/Ticket/Display.html?id=521&#038;user=guest&#038;pass=guest">here</a>. Removing this code has the side effect of crippling the seeding process for the OpenSSL PRNG. Instead of mixing in random data for the initial seed, the only &#8220;random&#8221; value that was used was the current process ID. On the Linux platform, the default maximum process ID is 32,768, resulting in a very small number of seed values being used for all PRNG operations.</p></blockquote>
<p>More info, from Debian, <a href="http://www.debian.org/security/2008/dsa-1571">here</a>.  And from the hacker community <a href="http://milw0rm.com/exploits/5622">here</a>.  Seems that the bug was introduced in September 2006.</p>
<p>More <a href="http://.sesse.net/blog/tech/2008-05-14-17-21_some_maths.html">analysis</a> <a href="http://taint.org/2008/05/13/153959a.html">here</a>.  And a <a href="http://www.xkcd.com/424/#">cartoon</a>.</p>
<p>Random numbers are used everywhere in cryptography, for both short- and long-term security.  And, as we&#8217;ve seen here, security flaws in random number generators are really easy to accidently create and really hard to discover after the fact.  Back when the NSA was routinely weakening commercial cryptography, their favorite technique was reducing the entropy of the random number generator.</p>

		
			<p class="entry-tags">
				<span class="tags-links">Tags: <a href="https://www.schneier.com/tag/cryptography/" rel="tag">cryptography</a>, <a href="https://www.schneier.com/tag/hacking/" rel="tag">hacking</a>, <a href="https://www.schneier.com/tag/linux/" rel="tag">Linux</a>, <a href="https://www.schneier.com/tag/nsa/" rel="tag">NSA</a>, <a href="https://www.schneier.com/tag/operating-systems/" rel="tag">operating systems</a>, <a href="https://www.schneier.com/tag/random-numbers/" rel="tag">random numbers</a>, <a href="https://www.schneier.com/tag/vulnerabilities/" rel="tag">vulnerabilities</a></span>			</p>

		
		
		<p class="posted">
			<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html" rel="bookmark">Posted on May 19, 2008 at 6:07 AM</a>			•
			<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html#comments">88 Comments</a>		</p>

		<aside><div class="schneier-share share" data-uri="https://www.schneier.com/blog/archives/2008/05/random_number_b.html" data-title="Random Number Bug in Debian Linux" data-order="facebook twitter tumblr" data-social-share-privacy="true" /></aside>
	</div>

</article>


	<h3 id="comments">Comments</h3>

	
		<article class="comment even thread-even depth-1" id="comment-88684">

			<div class="comment by-erlehmann ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://dieweltistgarnichtso.net' rel='external nofollow ugc' class='url'>erlehmann</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88684">
						May 19, 2008 6:47 AM					</a>

				</p>

				<p>If you watch Battlestar Galactica, you might find this cartoon funnier: <a href="http://dieweltistgarnichtso.net/index.php?/archives/21-Caprica,-2-years-ago.html" rel="nofollow ugc">http://dieweltistgarnichtso.net/index.php?/archives/21-Caprica,-2-years-ago.html</a></p>
<p>(Shameless self promotion, I admit it. But people on IRC told me it&#8217;s better than the xkcd one.)</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88685">

			<div class="comment by-chojin ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.qualifilms.com' rel='external nofollow ugc' class='url'>ChoJin</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88685">
						May 19, 2008 6:55 AM					</a>

				</p>

				<p>Well, we could also argue this line should have been properly commented considering how important it was&#8230;</p>
<p>IMHO, the so called &#8220;self-documented code&#8221; is pure madness, since it never documents the intent. But that&#8217;s another debate I guess.</p>
<p>Anyway, somehow, it&#8217;s a beautiful bug 🙂</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88686">

			<div class="comment by-anonymous ">

				<p class="commentcredit">

					<span class="commenter">Anonymous</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88686">
						May 19, 2008 7:14 AM					</a>

				</p>

				<p>Maybe the documentation could have been better, but someone whose thought process includes &#8220;Hm, this line causes a warning. Oh, well, it&#8217;s probably nothing important, I&#8217;ll just comment it out&#8221; doesn&#8217;t deserve commit-privileges, as fas as I&#8217;m concerned.</p>
<p>Of course, this whole thing required a string of failures (reviews, regression tests etc) to grow into the fiasco it has become.</p>
<p>Nice detail: Even if YOUR keys are secure, just the fact that you communicated with someone with an insecure key could compromise your key. So, in effect, to be really safe, we should regenerate every private key in the world.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88687">

			<div class="comment by-merijn-vogel ">

				<p class="commentcredit">

					<span class="commenter">Merijn Vogel</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88687">
						May 19, 2008 7:15 AM					</a>

				</p>

				<p>In the last week Ubuntu and Debian both have submitted patches to their users fixing this issue, with a few informational messages about this issue.</p>
<p>Personally, I consider that a quick response 🙂</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88688">

			<div class="comment by-clvrmnky ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://clevermonkey.org' rel='external nofollow ugc' class='url'>clvrmnky</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88688">
						May 19, 2008 7:25 AM					</a>

				</p>

				<p>@Merijn Vogel: yes, easy to fix, but the problem is that any server key you have generated before the fix has to be retired, and new keys distributed.  In some deployments this is seriously non-trivial.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88689">

			<div class="comment by-andrey-sverdlichenko ">

				<p class="commentcredit">

					<span class="commenter">Andrey Sverdlichenko</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88689">
						May 19, 2008 7:43 AM					</a>

				</p>

				<p>Using uninitialized data as entropy source is an AMAZING idea in first place. &#8220;Fixing&#8221; or &#8220;unfixing&#8221; doesn&#8217;t make it any better.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88690">

			<div class="comment by-not-bruce ">

				<p class="commentcredit">

					<span class="commenter">Not Bruce</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88690">
						May 19, 2008 7:44 AM					</a>

				</p>

				<p>Lessons learned:</p>
<p>The implemenation of encryption in computer hardware and software is so complex that you can never be certain that no vulnerability has been introduced.</p>
<p>The open source approach is not inherently more secure.</p>
<p>Expertise in cryptography is rare among computer programmers.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88691">

			<div class="comment by-clvrmnky ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://clevermonkey.org' rel='external nofollow ugc' class='url'>clvrmnky</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88691">
						May 19, 2008 7:45 AM					</a>

				</p>

				<p>Take a look at the OpenSSL bug report history (link is in OP).  Sure, we can argue that using uninitialized data to help seed your PRNG is weak, but the code in question /was/ documented very clearly, at least to anyone who codes in C for a living.  And, technically, this is not wrong to do.  Tools like Purify and Valgrind assume the use of /any/ uninitialized data is wrong.  This assumption is wrong.</p>
<p>The question posed, &#8220;can I just remove this obviously broken line permanently?&#8221; and the answer was &#8220;no, the reason Purify/Valgrind is complaining is well-known, hence the ifdef.  It will not hurt actual running code, and /may/ help a little in terms of seeding values.  Don&#8217;t do this.&#8221;</p>
<p>The solution is to change a compile flag and update the FAQ and manual pages.  The code has not been otherwise changed, AFAICS.</p>
<p>This was a obvious error committed by a coder who assumed that a band-aid solution was the correct way forward.  Not only was the real reason for the Valgrind/Purify errors not understood, the solution of commenting out the code to clear the warning was never properly thought through.</p>
<p>I&#8217;m sure the coder in question is properly chastened, and we have all made bone-headed choices like this.  But the fault lies squarely with the person who made this change for Debian, not OpenSSL.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88692">

			<div class="comment by-stine ">

				<p class="commentcredit">

					<span class="commenter">Stine</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88692">
						May 19, 2008 7:46 AM					</a>

				</p>

				<p>I&#8217;m going to get it out of the way (and be extremely pedantic) because I know someone else would have if I didn&#8217;t &#8230; it&#8217;s called &#8220;Debian GNU/Linux&#8221; not &#8220;Debian Linux&#8221;.</p>
<p>🙂</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88693">

			<div class="comment by-betabug ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://betabug.ch/blogs/ch-athens' rel='external nofollow ugc' class='url'>betabug</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88693">
						May 19, 2008 7:48 AM					</a>

				</p>

				<p>@Merijn Vogel: judging from the running about and nervous activity of the debian/ubuntu crowd, just installing the update is the smallest part of the cleanup. Replacing every key and every password that was transmitted over a connection with one of those keys kept them much more active.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88694">

			<div class="comment by-nicholas-weaver ">

				<p class="commentcredit">

					<span class="commenter">Nicholas Weaver</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88694">
						May 19, 2008 7:59 AM					</a>

				</p>

				<p>Actually, its worse.  The first reference, the one with the #ifndef PURIFY, is the one that valgrind/purify complain about, and only includes uninitiaziled memroy.</p>
<p>It was the other reference, which purify does NOT complain about (why do you think there is no #ifndef PURIFY?) that was NEEDLESSLY removed.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88695">

			<div class="comment by-rob-funk ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://funknet.net/rfunk' rel='external nofollow ugc' class='url'>Rob Funk</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88695">
						May 19, 2008 7:59 AM					</a>

				</p>

				<p>It&#8217;s important to note that the fatal flaw here wasn&#8217;t the removal of the &#8220;purify complains&#8221; line that opportunistically adds uninitialized memory to the entropy pool.  It was removing the similar line earlier that was used to add all other entropy.</p>
<p>That more important line happened to be called with potentially-uninitialized memory at some point elsewhere in openssl, causing the valgrind warning.</p>
<p>Sorry, I&#8217;m just getting tired of seeing comments about the non-wisdom of using uninitialized memory as an entropy source.  Uninitialized-memory-as-entropy is a total red herring here.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88696">

			<div class="comment by-rob-funk ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://funknet.net/rfunk' rel='external nofollow ugc' class='url'>Rob Funk</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88696">
						May 19, 2008 8:05 AM					</a>

				</p>

				<p>@Nicholas Weaver, you have it partly right and partly backwards.</p>
<p>The line with #ifndef PURIFY and &#8220;purify complains&#8221; comment is the one that could optionally have been removed, and was also the one generating most of the warnings.  The obvious solution to that, of course, was to define PURIFY when checking with valgrind.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88697">

			<div class="comment by-matt ">

				<p class="commentcredit">

					<span class="commenter">Matt</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88697">
						May 19, 2008 8:06 AM					</a>

				</p>

				<p>This is a situation in which open-source is LESS secure than closed-source.  Experienced developers created a program that worked.  Less experienced system integrators with access to the source created a version that did not, and released it to end users.  If they had not had access to the source the bug would never have been introduced.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88698">

			<div class="comment by-sejanus ">

				<p class="commentcredit">

					<span class="commenter">Sejanus</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88698">
						May 19, 2008 8:33 AM					</a>

				</p>

				<p>Matt,<br />
I can imagine the opposite: not-so-experienced programmers created program with security hole. Experienced programmers had access to the source and therefore quickly discovered and fixed it.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88699">

			<div class="comment by-colossal-squid ">

				<p class="commentcredit">

					<span class="commenter">Colossal Squid</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88699">
						May 19, 2008 8:51 AM					</a>

				</p>

				<p>Debian really, really screwed the pooch on this one. More worrying than the existence of the exploit is that the patch was submitted to their repository a number of days before the vulnerability was announced.<br />
<a href="http://svn.debian.org/viewsvn/pkg-openssl/openssl/trunk/crypto/rand/md_rand.c?rev=300&#038;view=diff&#038;r1=300&#038;r2=299" rel="nofollow ugc">http://svn.debian.org/viewsvn/pkg-openssl/openssl/trunk/crypto/rand/md_rand.c?rev=300&#038;view=diff&#038;r1=300&#038;r2=299</a><br />
&#8220;If they had not had access to the source the bug would never have been introduced.&#8221;<br />
No, but instead black hats  could just reverse-engineer the algorithm and we could sit around twiddling our thumbs until the devs decided to fix it:<br />
<a href="http://www.computerworld.com/action/article.do?command=viewArticleBasic&#038;articleId=9048438" rel="nofollow ugc">http://www.computerworld.com/action/article.do?command=viewArticleBasic&#038;articleId=9048438</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88700">

			<div class="comment by-jpj ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.jeroenpercivaljesus.com/' rel='external nofollow ugc' class='url'>JPJ</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88700">
						May 19, 2008 8:53 AM					</a>

				</p>

				<p>@Sejanus.</p>
<p>You can imagine the opposite, but can you provide a reference to it?</p>
<p>&#8211;JPJ</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88701">

			<div class="comment by-dash ">

				<p class="commentcredit">

					<span class="commenter">Dash</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88701">
						May 19, 2008 9:04 AM					</a>

				</p>

				<p>What I don&#8217;t understand is why a package maintainer with no cryptography background thinks it&#8217;s his business to &#8220;correct&#8221; experts&#8217; code. After the fact all kind of justifications have appeared, but I still haven&#8217;t read an actual apology, just blaming OpenSSL developers. Sigh.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88702">

			<div class="comment by-carlo-graziani ">

				<p class="commentcredit">

					<span class="commenter">Carlo Graziani</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88702">
						May 19, 2008 9:06 AM					</a>

				</p>

				<p>Unfortunately, this sort of thing is not that uncommon when Linux distribution packagers (like Debian, but also Red Hat/Fedora, SuSE, etc.) take application source and start applying their own patches.  It&#8217;s just that it gets more attention when it&#8217;s a security bug, rather than just misbehavior by an application.</p>
<p>Frequently, source patches made by distributors are not passed back upstream to the original code maintainers (Licenses like GPL insist on source code release to downstream, not to upstream).  So the people who are best-qualified to vet those changes never see them, until after a distribution release.</p>
<p>Not infrequently, those changes are poorly conceived and poorly tested, and lead to unexpected behavior by the application for some fraction of users.  Then the application&#8217;s mailing lists (as opposed to those pertaining to the distribution) get flooded with reports of &#8216;bugs&#8217; that the application maintainer is powerless to fix.  This happens regularly to the pilot-link maintainer, as an example from a mailing list that I happen to follow.</p>
<p>Unfortunately &#8212; I say this as a Linux-exclusively computing person &#8212; the FOSS culture&#8217;s values of forward re-distribution, while generally positive,  have the pathological aspect that anyone who <em>can</em> modify the code for the benefit of downstream users thinks that they <em>ought</em> to.  This idealism, coupled to the driving pace of distribution release schedules means that changes are often not fed back to the original developers for approval before redistribution, with the consequences that attend this sorry story.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88703">

			<div class="comment by-dmytry ">

				<p class="commentcredit">

					<span class="commenter">dmytry</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88703">
						May 19, 2008 9:08 AM					</a>

				</p>

				<p>It is important to provide more context when discussing source code.<br />
Those 2 lines were located <em>in different functions</em>, which do very different, in fact <em>opposite</em> things.</p>
<p>The first (by order) was in<br />
static void ssleay_rand_add(const void *buf, int num, double add)<br />
This function adds entropy to the pool. The &#8220;const void *&#8221; means that it is input parameter, and incidently, the commented out line is the only line that uses buf.<br />
Commenting out MD_Update(&amp;m,buf,j); here turns whole function into almost no-op!</p>
<p>This line does not cause any problem with debugger tools; ssleay_rand_add is meant to be called with initialized buffer (though calling with unitialized doesnt do any real harm).</p>
<p>The second is in<br />
static int ssleay_rand_bytes(unsigned char *buf, int num)<br />
This function outputs random bytes into buf, &#8220;taking&#8221; entropy from the pool.<br />
It is sometimes called with unitialized buf, and sometimes with buffer that contains previous random numbers. It makes perfect sense here to hash buf to increase randomness; it doesnt do any harm when buf is unitialized, and it improves randomness when buff contains old key data.</p>
<p>Nonetheless, since debugging tools complain about any use of unitialized data, this function has #ifndef PURIFY around that call.</p>
<p>The distro maintainer probably assumed that the original developers were dumb/whatever and just forgot #ifndef PURIFY in the first function.<br />
He didnt even bother to look what is first function for, and what does it do. He just commented out right away.</p>
<p>That kind of modification is a recipe for disaster. Regardless of whever this is linux kernel or some file system module, or ssl. Regardless of the amount of comments in the file (you cant comment every line in internal functions, can you? and even if you do, that is near useless).</p>
<p>It is completely wrong to assume that same line would do same thing, especially when it is used inside different functions with very different (opposite) purproses.</p>
<p>Sejanus:<br />
That is indeed possible, but it is highly uncommon for distro maintainers to be better programmers than original developers. Most often, distro maintainer is not even a programmer, or is not familiar with the language that source is written in.<br />
It happens however that highly experienced <em>user</em> (who also happens to be a programmer) fixes something. But chances are low; the code bases are big, you dont look at it except for fixing crash.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88704">

			<div class="comment by-m-welinder ">

				<p class="commentcredit">

					<span class="commenter">M Welinder</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88704">
						May 19, 2008 9:09 AM					</a>

				</p>

				<p>Note, that the original OpenSSL code was buggy and could, depending on the C compiler&#8217;s mood, give you a constant key.  Or worse.  It appears that the developers did not think the C standard applied to their code.</p>
<p>But, yeah, the Debian team screwed up the fixing.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88705">

			<div class="comment by-anonymous ">

				<p class="commentcredit">

					<span class="commenter">Anonymous</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88705">
						May 19, 2008 9:16 AM					</a>

				</p>

				<p>&#8220;the only &#8220;random&#8221; value that was used was the current process ID&#8221;</p>
<p>Wait, what?  Why are they not using the kernel entropy pool?  Maybe this is because I&#8217;m not an expert, but I don&#8217;t see any reason not to use /dev/random or /dev/urandom.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88706">

			<div class="comment by-lol ">

				<p class="commentcredit">

					<span class="commenter">lol</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88706">
						May 19, 2008 9:16 AM					</a>

				</p>

				<p>Bruce, this is old news already.  It sure took you long enough to post this to your blog.</p>
<p>LOL.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88707">

			<div class="comment by-grendelkhan ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://grendelkhan.livejournal.com' rel='external nofollow ugc' class='url'>grendelkhan</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88707">
						May 19, 2008 9:20 AM					</a>

				</p>

				<blockquote><p><b>Not Bruce</b>: &#8220;The open source approach is not inherently more secure.&#8221;</p></blockquote>
<p>It certainly points out a weakness in the distribution chain; one wonders how on earth someone ended up poking around in cryptographic code. I suppose that somewhere, Dan Bernstein is having a great big I-Told-You-So moment.</p>
<p>On the other hand, patching the vulnerability once it was found was very quick; there was a very similar <a href="http://eprint.iacr.org/2007/419" rel="nofollow ugc">bug in the Windows 2000/XP PRNG</a> which led to the creation of weak SSL keys. (Similar in effect, not in cause&#8211;as nobody outside Redmond can see the source, there&#8217;s no way to know what the cause was.) However, the time between its disclosure (2007-11-04) and the release of a fix in Windows XP (with SP3, 2008-05-06) was far greater than the disclosure-to-patch time for Debian. (Unless you upgraded to Vista, maybe.) I don&#8217;t think there&#8217;s a patch available for Windows 2000 at all. The moral of the story is that there&#8217;s no rush to patch security issues, <a href="http://www.schneier.com/essay-126.html" rel="nofollow ugc">unless you break their DRM</a>.</p>
<p>Additionally, the bug itself was in the Debian sources from 2006 to 2008; it was apparently in the Windows codebase since <i>Windows 95</i>.</p>
<p>While the open source model&#8211;especially distributors sticking their fingers in critical code they don&#8217;t understand&#8211;isn&#8217;t inherently superior to the closed-source model, the response is quite different.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88708">

			<div class="comment by-grendelkhan ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://grendelkhan.livejournal.com' rel='external nofollow ugc' class='url'>grendelkhan</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88708">
						May 19, 2008 9:22 AM					</a>

				</p>

				<p>I didn&#8217;t notice that the software here strips tags. That&#8217;s what the preview button is for, I suppose. The Windows vulnerability was disclosed here:</p>
<p><a href="http://eprint.iacr.org/2007/419" rel="nofollow ugc">http://eprint.iacr.org/2007/419</a></p>
<p>And this is the essay I was referring to with &#8220;unless you break their DRM&#8221;:</p>
<p><a href="http://www.schneier.com/essay-126.html" rel="nofollow ugc">http://www.schneier.com/essay-126.html</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88709">

			<div class="comment by-carlo-graziani ">

				<p class="commentcredit">

					<span class="commenter">Carlo Graziani</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88709">
						May 19, 2008 9:24 AM					</a>

				</p>

				<p>@Anonymous asks, &#8220;&#8230;don&#8217;t see any reason not to use /dev/random or /dev/urandom&#8221;</p>
<p>The OpenSSL code is not a Linux-only system.  It is cross-platform.  /dev/random is not a POSIX-ish thing, so there is no guarantee that it will be available on other platforms e.g. Solaris, HPUX, AIX, the BSDs, etc.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88710">

			<div class="comment by-gweihir ">

				<p class="commentcredit">

					<span class="commenter">Gweihir</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88710">
						May 19, 2008 9:25 AM					</a>

				</p>

				<p>Debian is generally pretty good in the fixes they do to upstream code. But sometimes they mess up badly, and I have, on several occasions, encounterd a &#8220;will not fix, and will not warn&#8221; attitude.</p>
<p>The last instance for me was rdiff-backup, were Debian stable (etch) uses a version that is experimental and is incompatible with both, the stable and the development version of rdiff-backup. The absolutely least thing to do would habe been to add a strong warning to the packet description, however nothing was done and poeple find out about this when their backup fails. This is at best very low amateur level. At worst it is malicious.</p>
<p>I belive that Debian has an issue identifying and getting rid of maintainers that far overstep their level of competence. The OpenSSL mess seems to be another one of these. Messing with the random number generator in crypto-software requires both deep understanding of the issue <em>and</em> several competent people that indipendently check the fix. Seems both were completely missing.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88711">

			<div class="comment by-marcus-meissner ">

				<p class="commentcredit">

					<span class="commenter">Marcus Meissner</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88711">
						May 19, 2008 9:31 AM					</a>

				</p>

				<p>openssl uses /dev/urandom if necessary.</p>
<p>However the problem was that it read the entropy from there and did not add it.</p>
<p>And please, everyone, there were <em>two</em> lines of code where just <em>one</em> should have been removed. (see post from dmytry)</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88712">

			<div class="comment by-sejanus ">

				<p class="commentcredit">

					<span class="commenter">Sejanus</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88712">
						May 19, 2008 9:47 AM					</a>

				</p>

				<p>I didn&#8217;t mean distro maintainers in particular. I just meant this: open source can be reviewed (and is reviewed) by many people. This increases probability of finding mistakes, security holes, et cetera.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88713">

			<div class="comment by-raphael ">

				<p class="commentcredit">

					<span class="commenter">Raphael</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88713">
						May 19, 2008 10:03 AM					</a>

				</p>

				<p>It&#8217;s becoming a MAJOR concern now&#8230;</p>
<p>Read this if you speak french :<br />
<a href="http://sid.rstack.org/blog/index.php/275-du-hasard-et-de-ses-consequences" rel="nofollow ugc">http://sid.rstack.org/blog/index.php/275-du-hasard-et-de-ses-consequences</a></p>
<p>or try the approximate google translation :<br />
<a href="http://translate.google.ch/translate?u=http%3A%2F%2Fsid.rstack.org%2Fblog%2Findex.php%2F275-du-hasard-et-de-ses-consequences&#038;sl=fr&#038;tl=en&#038;hl=fr&#038;ie=UTF-8" rel="nofollow ugc">http://translate.google.ch/translate?u=http%3A%2F%2Fsid.rstack.org%2Fblog%2Findex.php%2F275-du-hasard-et-de-ses-consequences&#038;sl=fr&#038;tl=en&#038;hl=fr&#038;ie=UTF-8</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88714">

			<div class="comment by-eli ">

				<p class="commentcredit">

					<span class="commenter">Eli</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88714">
						May 19, 2008 10:19 AM					</a>

				</p>

				<p>The issue is a bit more complex than the comments here appear to grasp.  The Debian maintainer did err, but tried to get feedback on the change from the OpenSSL team.</p>
<p>Please read<br />
<a href="http://lwn.net/SubscriberLink/282038/528cb5a3f2dea48f/" rel="nofollow ugc">http://lwn.net/SubscriberLink/282038/528cb5a3f2dea48f/</a><br />
for more detail.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88715">

			<div class="comment by-colossal-squid ">

				<p class="commentcredit">

					<span class="commenter">Colossal Squid</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88715">
						May 19, 2008 10:34 AM					</a>

				</p>

				<p>Further to Eli&#8217;s link, here&#8217;s some stuff from one of the OpenSSL devs:<br />
<a href="http://www.links.org/?p=328" rel="nofollow ugc">http://www.links.org/?p=328</a></p>
<p>which highlights some problems with OpenSSLs communications, i.e that the mailing list the OpenSSL documentation points to for application-related questions is not actively monitored by the devs.</p>
<p>Plenty of blame to go round it seems.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88716">

			<div class="comment by-rob-funk ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://funknet.net/rfunk' rel='external nofollow ugc' class='url'>Rob Funk</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88716">
						May 19, 2008 10:37 AM					</a>

				</p>

				<p>@Eli, as I commented at LWN, I don&#8217;t think the LWN writeup gave nearly enough blame to the Debian maintainer for trying to fix things without understanding them first, and for not telling the OpenSSL people that he was proposing changing production Debian code, not just debugging.</p>
<p>I think the most telling part of all this is the Debian guy&#8217;s original email to openssl-dev:<br />
<a href="http://marc.info/?l=openssl-dev&#038;m=114651085826293&#038;w=2" rel="nofollow ugc">http://marc.info/?l=openssl-dev&#038;m=114651085826293&#038;w=2</a><br />
He starts out with &#8220;When debbuging applications that make use of openssl using<br />
valgrind&#8230;&#8221;<br />
and concludes saying, &#8220;What I currently see as best option is to actually comment out<br />
those 2 lines of code.  But I have no idea what effect this really has on the RNG.&#8221;</p>
<p>The response was, &#8220;If it helps with debugging, I&#8217;m in favor of removing them.&#8221;<br />
And from someone else, &#8220;There&#8217;s your first clue, build with -DPURIFY :-)&#8221;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88717">

			<div class="comment by-alan ">

				<p class="commentcredit">

					<span class="commenter">Alan</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88717">
						May 19, 2008 10:39 AM					</a>

				</p>

				<blockquote><p>
  Why are they not using the kernel entropy pool?
</p></blockquote>
<p>Because the bug commented out the line where the collected entropy that might include that was added into the pool.</p>
<p>More analysis:<br />
<a href="http://www.links.org/?p=327" rel="nofollow ugc">http://www.links.org/?p=327</a><br />
<a href="http://www.advogato.org/person/branden/diary/5.html" rel="nofollow ugc">http://www.advogato.org/person/branden/diary/5.html</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88718">

			<div class="comment by-derf ">

				<p class="commentcredit">

					<span class="commenter">derf</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88718">
						May 19, 2008 10:46 AM					</a>

				</p>

				<p>Microsoft had a loophole in its RNG in 11/07, and it was recommended by a few groups that Microsoft publish its source so it could be analyzed for further problems.  I don&#8217;t think that was done.</p>
<p>The Linux issue was fixed quite a bit quicker (days).  The Windows issue was supposedly fixed in XP SP3 (6 months later) and ignored for Windows 2000.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88719">

			<div class="comment by-gweihir ">

				<p class="commentcredit">

					<span class="commenter">Gweihir</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88719">
						May 19, 2008 10:46 AM					</a>

				</p>

				<p>If you do not get conclusive feedback of the form &#8220;Yes, I completely understand the issue and I am an expert on it&#8221; from more than one person, you DO NOT mess with cryptographic randomness generation. Everything else is pure incompetence. Yes, the Debian maintainer tried to get feedback, but he obviously has not the required level of understanding to be maintaining a security crtitical component and had no business changing anything with the level of feedback he got.</p>
<p>I think this guy should be removed as maintainer of any crypto or security software immediately.</p>
<p>There still is blame ofr OpenSSL, I agree. It usually requires a mess-up in more than one place for something this serious to happen (and this <em>is</em> a catastrophy, make no mistake). Still, the Debian maintainer tried to fix something he did not understand. That makes him unacceptable as maintainer. It also makes the Debian process of assigning maintainers higly suspect, if somebody not a crypto expert gets to maintain crypto software.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88720">

			<div class="comment by-andrew ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://andrew.org' rel='external nofollow ugc' class='url'>andrew</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88720">
						May 19, 2008 10:58 AM					</a>

				</p>

				<p>I don&#8217;t mean to be polemical, but I can&#8217;t help but asking myself: is there any hope that this will teach us something? Whoever you choose to blame, if anyone, can&#8217;t we do better than depend on a line of code?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88721">

			<div class="comment by-carlo-graziani ">

				<p class="commentcredit">

					<span class="commenter">Carlo Graziani</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88721">
						May 19, 2008 10:58 AM					</a>

				</p>

				<p>On the subject of &#8220;well, the OpenSSL people made it hard to figure out whom to contact, their -dev mailing list was not for actual developers, etc.&#8221;</p>
<p>The OpenSSL source code comes with a README that explicitly states where to send bug reports.  It says:</p>
<p>&#8221; Report the bug to the OpenSSL project via the Request Tracker<br />
 (<a href="http://www.openssl.org/support/rt2.html" rel="nofollow ugc">http://www.openssl.org/support/rt2.html</a>) by mail to:</p>
<pre><code>openssl-bugs@openssl.org"
</code></pre>
<p>The file containing the affected functions (md_rand.c) contains additional contact information, in the form of two e-mail addresses of the people who actually wrote the code.  If for some reason the Debian developer thought that a problem meriting a code change somehow did not rise to the level of a bug report, he could have at least informally contacted the actual developers, to find out directly what they thought.</p>
<p>Remember, the developers are operating on the source code, so they can easily find out from the source who to get in touch with should the need arise.  The &#8220;We Didn&#8217;t Know Who To Contact&#8221; defense is the weakest excuse in this entire sorry mess.  It was straight-up laziness, by people for whom contact with upstream developers is simply not a high priority.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88722">

			<div class="comment by-joe ">

				<p class="commentcredit">

					<span class="commenter">Joe</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88722">
						May 19, 2008 11:04 AM					</a>

				</p>

				<p>Bruce, rather than hear more about the bug itself, I&#8217;d be interested in your analysis of the steps Debian took to distribute fixes.  As well as fixing the code, they&#8217;ve also released a list of blacklisted keys (those that could be generated by the crippled software) and a tool to find if any keys installed in standard places on the system are in the blacklist.   Is this enough?  Is there anything else they could do to support the monumental task of regenerating all possibly compromised keys?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88723">

			<div class="comment by-shane ">

				<p class="commentcredit">

					<span class="commenter">Shane</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88723">
						May 19, 2008 11:09 AM					</a>

				</p>

				<p>Luckily, this doesn&#8217;t effect those of us who take the time and care to compile OpenSSL via the source package, straight <i>from</i> the source.</p>
<p>Over the years I&#8217;ve gotten plenty of flack here and there for the time and (allegedly misspent) energy put into compiling many of my applications directly from source, but this vulnerability alone already made years of this practice worthwhile, in my mind.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88724">

			<div class="comment by-fdhy ">

				<p class="commentcredit">

					<span class="commenter">FDHY</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88724">
						May 19, 2008 11:19 AM					</a>

				</p>

				<p>Wow, that&#8217;s too bad.  Seems like a good security code review could have caught this&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88725">

			<div class="comment by-gweihir ">

				<p class="commentcredit">

					<span class="commenter">Gweihir</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88725">
						May 19, 2008 11:44 AM					</a>

				</p>

				<p>I think <em>any</em> halfway competent security review of the patch would have found the problem. Apparently none was done.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88726">

			<div class="comment by-pat-cahalan ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://padraic2112.wordpress.com' rel='external nofollow ugc' class='url'>Pat Cahalan</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88726">
						May 19, 2008 11:50 AM					</a>

				</p>

				<p>This isn&#8217;t the first time a source package has been altered by a distribution in such a way that the source package now no longer works as advertised.</p>
<p>Many linux distributions have &#8220;broken&#8221; Open SSH by changing the default configuration without changing the documentation.  (see <a href="http://padraic2112.wordpress.com/2007/07/09/bad-security-201-remote-x-sessions-over-ssh/" rel="nofollow ugc">http://padraic2112.wordpress.com/2007/07/09/bad-security-201-remote-x-sessions-over-ssh/</a> for the details).  As a result, the behavior of the application now does not match what you think it is doing if you skim over the man pages.</p>
<p>This was done for functionality purposes.  Nobody has really freaked out over this (and it still hasn&#8217;t been changed), but it represents exactly the same mindset that caused the Debian bug over which everyone and their grandmother is throwing conniption fits.</p>
<p>If you&#8217;re going to alter the way a package works when you include it in your distro, either by changing the code or the default configuration, you have to document the change properly, using some method that is subject to review.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88727">

			<div class="comment by-pat-cahalan ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://padraic2112.wordpress.com' rel='external nofollow ugc' class='url'>Pat Cahalan</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88727">
						May 19, 2008 11:57 AM					</a>

				</p>

				<p>@ FDHY, Gweihir</p>
<p>That&#8217;s because the security review is done by the source maintainers, and the functionality review is done by the distribution maintainers.</p>
<p>There&#8217;s a fundamental disconnect there.  It&#8217;s going to be more pronounced in the free distributions (very generally) because the level of rigor and the areas of application of review are different.</p>
<p>This is the one major area in which the BSDs are actually better than any of the Linux distributions (IMO).  Of course, it&#8217;s also the reason why your level of expertise needs to be generally higher to enable things to work on BSD.  Linux distributions are designed and built to be used, BSD distributions are designed to work.  There&#8217;s a subtle difference there.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88728">

			<div class="comment by-2arandom ">

				<p class="commentcredit">

					<span class="commenter">2arandom</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88728">
						May 19, 2008 12:03 PM					</a>

				</p>

				<p>I&#8217;m glad that Bruce posted this article, audience here is a good resource.<br />
Can&#8217;t wait for the movie, Linux Casino.  &#8216;we were doing short counts, uninitialized memory, etc&#8230;&#8217; READ &#8216; Selling code in and out&#8217; &#8216;What a perfect business, ROI is easy.&#8217;<br />
Coders are the new lawyers for business.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88729">

			<div class="comment by-sam ">

				<p class="commentcredit">

					<span class="commenter">sam</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88729">
						May 19, 2008 12:19 PM					</a>

				</p>

				<p>Shane,</p>
<p>But compiling it yourself doesn&#8217;t help much in the fallout to this. Sure your keys were generated with enough randomness to be secure, but if you admin any machines then the user keys are suspect.</p>
<p>If you authed with a debian box at some point in the last couple of years, your dsa key is now suspect.</p>
<p>So you end up with as much work as everyone else, except I guess your host key (the simplest thing to fix) is fine 🙂</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88730">

			<div class="comment by-alex ">

				<p class="commentcredit">

					<span class="commenter">Alex</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88730">
						May 19, 2008 12:43 PM					</a>

				</p>

				<p>This is a <em>major</em> PITA. By far it doesn&#8217;t end with Debian.</p>
<p>Many many systems are concerned, including Verisign and TOR to name a few.</p>
<p>And this <em>will</em> be exploited.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88731">

			<div class="comment by-nix ">

				<p class="commentcredit">

					<span class="commenter">Nix</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88731">
						May 19, 2008 4:53 PM					</a>

				</p>

				<p>@Rob Funk, your repeated comments that anyone using valgrind should rebuild openssl betray ignorance of how valgrind is typically used.</p>
<p>Because valgrind is a dynamic code instrumentation engine, it is generally run over unmodified binaries (at most they&#8217;ll have debugging info available). If a distro told me that I had to rebuild critical packages like openssl in order to get a warning-free valgrind run, I&#8217;d be disgusted with the distribution. (Further, the nature of the failure is such that the valgrind warning-suppression system would be unlikely to correctly quash this warning, and it&#8217;s very hard to see how to fix that system so as to quash it.)</p>
<p>It&#8217;s pretty damning that uninitialized data was being intentionally used with <em>no</em> comments to suggest that this was intentional and <em>no</em> comments to suggest that the other identical-looking line was not doing an unimportant uninitialized-junk-mixing job but was the primary point of entropy-mixing in OpenSSL.</p>
<p>If OpenSSL had been maintainably written, I can&#8217;t imagine this bug would have appeared. (I doubt very much that anything like it would appear in GnuTLS, not least because the maintainer is responsive, but also because the code doesn&#8217;t engage in downright obfuscatory &#8216;clever tricks&#8217; like this.)</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88732">

			<div class="comment by-jan ">

				<p class="commentcredit">

					<span class="commenter">jan</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88732">
						May 19, 2008 6:04 PM					</a>

				</p>

				<p>Bruce, can you verify the claim that DSA keys are compromised if used in communication with an insecure server? I still cannot believe this, because if this is true &#8211; wouldn&#8217;t it mean that any server you use could break your key by deliberately using a special &#8220;non-random number generator&#8221;? (Wouldn&#8217;t this mean that DSA is to be considered completely broken?)</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88733">

			<div class="comment by-smee-jenkins ">

				<p class="commentcredit">

					<span class="commenter">Smee Jenkins</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88733">
						May 19, 2008 6:11 PM					</a>

				</p>

				<p>Some arguments that are NOT excuses and should NEVER be used as excuses, not even as mitigating factors:</p>
<ol>
<li>The code was badly documented.</li>
<li>The upstream maintainers did not respond.</li>
</ol>
<p>If you patch and distribute something important like OpenSSL, you deal with the above and assume the responsibility if things go wrong. Some people can handle this. Don&#8217;t want the responsibility? Don&#8217;t touch it.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88734">

			<div class="comment by-doug-coulter ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.coultersmithing.com' rel='external nofollow ugc' class='url'>Doug Coulter</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88734">
						May 19, 2008 7:00 PM					</a>

				</p>

				<p>A lot of folks here aren&#8217;t understanding something pretty important.  As someone who did embedded code for decades in small machines, we got used to looking at every bit of memory to find bugs.  In those machines it was typical for memory to assume a quite predictable pattern on power up &#8212; the only truly uninitialized state, as the flip flops (for static) or caps (for dynamic ram) had ever so slight builtin imbalances do to process variables.  We had bugs at various times that didn&#8217;t show up until the manufacturer made some change in production that we never found up front as the unititialized ram was anything but random in a given run.</p>
<p>Modern language tools nearly always initialize ram before a process get it anyway &#8212; any Microsoftie will tell you about 0xDEADBEEF for example.  Other reliable bug indicators are there outside of debug mode if you know what to look for.</p>
<p>So if this were a bug, it was there <em>before</em> too.<br />
The only way that the ram was &#8220;random&#8221; if at all is if some other process put things in it and the system never re-inited it before putting it back in the pool (assuming allocation from a heap at all)&#8230;</p>
<p>Fix is a really good random number generator, and entropy gotten by other methods.  Oops!</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88735">

			<div class="comment by-anderer-gregor ">

				<p class="commentcredit">

					<span class="commenter">Anderer Gregor</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88735">
						May 19, 2008 7:16 PM					</a>

				</p>

				<p>&#8230;so most people seem to prefer a major Linux distro being distributed in full knowledge that exactly the one server code which is most likely to be open to the whole net (namely, ssh) and which has full privileges actually causes a qc tool to raise a big red flag, indicating sloppy programming at least, and the potential for buffer overflows and all the other fun in the worst case?<br />
Especially given that one of the maintainers said (or better, seemed to say) that it was okay to remove the two lines that seemed to cause the warning?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88736">

			<div class="comment by-rob-funk ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://funknet.net/rfunk' rel='external nofollow ugc' class='url'>Rob Funk</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88736">
						May 19, 2008 9:33 PM					</a>

				</p>

				<p>@Nix, I fully understand the issue of recompiling for valgrind.  The line causing major valgrind warnings can be removed without major consequences &#8212; and is still missing in the fixed Debian package.  And yes, there were comments on that line about Purify not liking it.  The other line was <em>the</em> major line in its function; you can&#8217;t expect people to add comments like &#8220;this is important&#8221; on every line that shouldn&#8217;t be deleted.</p>
<p>And if valgrind was warning on the important line, then the maintainer should&#8217;ve tracked it back to where that function was being called with potentially-unititialized memory.</p>
<p>@Doug Coulter, see my earlier comments about the uninitialized memory being a red herring.</p>
<p>@Anderer Gregor, that maintainer said it was OK to remove the lines &#8220;if it helps with debugging&#8221;; there was no implication about putting it into production like that.  And the stuff you say about &#8220;a qc tool raising a big red flag&#8221; demonstrates a fundamental misunderstanding of the problem.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88737">

			<div class="comment by-dierdre-tobin ">

				<p class="commentcredit">

					<span class="commenter">Dierdre Tobin</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88737">
						May 19, 2008 10:25 PM					</a>

				</p>

				<p>@Anderer Gregor</p>
<p>It was in OpenSSL not OpenSSH.</p>
<p>As Robert Funk indicated the possible removal of the lines was for debugging only, not for final release.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88738">

			<div class="comment by-vance ">

				<p class="commentcredit">

					<span class="commenter">Vance</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88738">
						May 19, 2008 10:26 PM					</a>

				</p>

				<p>Two questions for the knowledgeable:</p>
<ol>
<li>Is it possible to include code in OpenSSL that tests the strength of the random numbers it generates?</li>
<li>If so, why not include such code?</li>
</ol>
<p>It seems that there could potentially be a number of reasons other than a mistake like this (e.g., a fault in a hardware RNG or a poor /dev/random implementation by the operating system) which would result in less entropy being added to the pool than expected.  Including a test for RNG strength would seem to be a wise fail-safe.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88739">

			<div class="comment by-lussy-pips ">

				<p class="commentcredit">

					<span class="commenter">Lussy Pips</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88739">
						May 19, 2008 11:51 PM					</a>

				</p>

				<p>.. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. .. ..<br />
X X X X X X X X X X X X X X X X X X</p>
<p>Regarding the recent SSL bungle:</p>
<p>I&#8217;m not placing blame on anyone, but let us consider for a moment:</p>
<p>How long would it take a member of a rogue organization, a company such as Microsoft, or an intelligence agency to land a spot into such a role as a code monkey at Debian.org, under the guise of a pro-FOSS person? You do know all three examples above are quite savvy when it comes to infiltration, mafias, corporations, and intelligence agencies do this all of the time. So let us suppose this is what happened here, and considering the wide range of impact with this issue, I believe this is exactly what may have happened.</p>
<p>What checks and balances are in place to weed out potential moles? Any? And would you really know what to look for even if such a policy is in place? Perhaps this question is worthy of an &#8220;Ask Slashdot&#8221; submission?</p>
<p>How many Tor hidden services (.onion) were taken down because of MITM attacks related to this issue? Fucking moles!</p>
<h2>The Debian OpenSSL flaw: what does it mean for Tor clients? \ May 13th, 2008</h2>
<p><a href="https://blog.torproject.org/blog/debian-openssl-flaw%3A-what-does-it-mean-tor-clients%3F" rel="nofollow ugc">https://blog.torproject.org/blog/debian-openssl-flaw%3A-what-does-it-mean-tor-clients%3F</a></p>
<p>Remember:</p>
<h2>Linux: Kernel &#8220;Back Door&#8221; Attempt \ November 6, 2003</h2>
<p><a href="http://kerneltrap.org/node/1584" rel="nofollow ugc">http://kerneltrap.org/node/1584</a></p>
<p>I don&#8217;t care how much a person insists they can track the people making the changes, all it takes is either a stooge who will easily take the fall and perhaps know nothing of their puppet master&#8217;s true identity as they may be paid by proxy, or a person trained to disappear after doing the dirty work and does just that.</p>
<p>Most geeks are easy enough to bullshit, especially if you have (or claim to have) a vagina.</p>
<p>&#8230; &#8230; &#8230; &#8230; &#8230; &#8230; &#8230; &#8230; &#8230; &#8230;. &#8230; &#8230;. .. &#8230;. .. .. . .</p>
<hr />

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88740">

			<div class="comment by-paeniteo ">

				<p class="commentcredit">

					<span class="commenter">Paeniteo</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88740">
						May 20, 2008 1:56 AM					</a>

				</p>

				<p>@Vance: &#8220;Is it possible to include code in OpenSSL that tests the strength of the random numbers it generates?&#8221;</p>
<p>It is not that the random numbers themselves were &#8220;weak&#8221; in any way. Every random number stream that the RNG produced was really random-looking.<br />
The problem was that there were only 32k <em>different</em> streams of random numbers available.</p>
<p>Think of it like AES encryption: No matter whether you just use a single letter as your password, or a 100-letter passphrase, the ciphertext will look like complete gibberish.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88741">

			<div class="comment by-juergen ">

				<p class="commentcredit">

					<span class="commenter">Juergen</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88741">
						May 20, 2008 2:04 AM					</a>

				</p>

				<blockquote><p>
  Back when the NSA was routinely weakening commercial cryptography,<br />
  their favorite technique was reducing the entropy of the random number generator.
</p></blockquote>
<p>Do you have links to any concrete examples of that?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88742">

			<div class="comment by-martin ">

				<p class="commentcredit">

					<span class="commenter">Martin</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88742">
						May 20, 2008 2:06 AM					</a>

				</p>

				<p>Why is it that I&#8217;ve seen hundreds of posts, even from Debian project members, trying to shift blame for their mistake to the OpenSSL devs, while I have yet to see one single Debian proponent that asks the question &#8220;What can <em>we</em> do to make sure something like this never happens again?&#8221;.</p>
<p>If the Debian project was serious about security, this should have been the first question asked after the initial clean-up. I guess the conclusion is that proactive security is not a high priority for the Debian project, and that PR and marketing (e.g. trying to shift blame) has a higher priority. Even the Debian wiki explaining the vulnerability and mitigations contained several paragraphs of excuses and blame shifting. But a conclusion that proactive security is not a high priority makes sense, the Debian project main CVS server has been compromised twice in the last five years:</p>
<p><a href="http://www.debian.org/News/2003/20031121" rel="nofollow ugc">http://www.debian.org/News/2003/20031121</a></p>
<p><a href="http://www.debian.org/News/2006/20060713" rel="nofollow ugc">http://www.debian.org/News/2006/20060713</a></p>
<p>They respond quickly when they screw up, though. That point is used extensively to market Debian.</p>
<p>In my opinion, there are no excuses for modifying cryptographic code without understanding the consequences. The only acceptable response would have been: &#8220;We did a major mistake. We take full responsibility, noone else is to blame for this. We will review our policies and practices to make sure this can not happen again. We are sorry for all the trouble we have caused for both users of Debian and others out there.&#8221;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88743">

			<div class="comment by-d0r ">

				<p class="commentcredit">

					<span class="commenter">D0R</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88743">
						May 20, 2008 2:38 AM					</a>

				</p>

				<p>If you need a random number, why not just pick up 42?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88744">

			<div class="comment by-martin ">

				<p class="commentcredit">

					<span class="commenter">Martin</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88744">
						May 20, 2008 2:43 AM					</a>

				</p>

				<p>@Jan</p>
<p>&#8220;Bruce, can you verify the claim that DSA keys are compromised if used in communication with an insecure server?&#8221;</p>
<p>No, they are not. The DSA key might be compromised, however, if the DSA signature was generated on a Debian or Ubuntu server. So, if you used ssh from a secure OS to a Debian or Ubuntu server using DSA authentication, your key was not compromised. If, however, you used a Debian or Ubuntu server to generate a DSA signature (e.g. ssh <em>from</em> a Debian or Ubuntu server using a DSA key), your key might be compromised.</p>
<p>The reason is that the secret random value k used for the signature is generated by the signature maker. So, if the signature is generated on a server with a good source of randomness, the key can not be recovered.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88745">

			<div class="comment by-martin ">

				<p class="commentcredit">

					<span class="commenter">Martin</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88745">
						May 20, 2008 2:47 AM					</a>

				</p>

				<p>@sam</p>
<p>&#8220;If you authed with a debian box at some point in the last couple of years, your dsa key is now suspect.&#8221;</p>
<p>Not true, see my previous comment to Jan.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88746">

			<div class="comment by-sakuraba ">

				<p class="commentcredit">

					<span class="commenter">Sakuraba</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88746">
						May 20, 2008 3:11 AM					</a>

				</p>

				<p>The Debian &#8220;developer&#8221; who removed the code without understanding what the code did, is indeed no competent (secure-) software developer but just a Debian packager. Security critical software packages like openssl should be mantained in Debian by true software developers working together very tighly with the original openssl developers.</p>
<p>So in my view, Debian should name most of his volunteers &#8220;Debian Packagers&#8221; instead of &#8220;Debian Developers&#8221;. There are few true Debian Developers in Debian (e.g. Joey Hess, Ian Jackson, etc.) but the majority aren&#8217;t and should not touch security critical software.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88747">

			<div class="comment by-werner ">

				<p class="commentcredit">

					<span class="commenter">Werner</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88747">
						May 20, 2008 4:49 AM					</a>

				</p>

				<p>@Martin<br />
The only acceptable response would have been: &#8220;We did a major mistake. We take full responsibility, noone else is to blame for this. We will review our policies and practices to make sure this can not happen again. We are sorry for all the trouble we have caused for both users of Debian and others out there.&#8221;<br />
Sounds like what we would get from a politician, and proclamations like this is the least we neeed. &#8220;Taking responsibility&#8221; means to me:<br />
&#8211; make the mistake open<br />
&#8211; correct the mistake<br />
&#8211; try to minimize the damage done by this mistake.<br />
That&#8217;s exactly what Debian is doing. Additionally: Debian developers are working on the processes to assure quality all teh time. If you have a concrete proposal, how to do this better, post it do Debian, but don&#8217;t ask them for meaningless statements for the press.<br />
There where a lot of proposals like<br />
&#8211; communicate with upstream<br />
&#8211; only change code, when you are competent<br />
&#8211; review the code<br />
&#8211; ..<br />
All this is stated policy of all the GNU/Linux-Distributions. Every software developer will agree. But it almost never is done sufficiently. Why is that so?<br />
There has been a lot of flaming, at least in Germany, against Debian because of their slow release cicle. The only advice I can give to the Debian developers: Please stick to your policy of &#8220;release when ready&#8221; and take all the time you need.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88748">

			<div class="comment by-werner ">

				<p class="commentcredit">

					<span class="commenter">Werner</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88748">
						May 20, 2008 4:57 AM					</a>

				</p>

				<p>This ill-fated change could also have been given a full review much sooner if one had tried to contribute it back upstream.</p>
<p>I don&#8217;t know why this hasn&#8217;t happened in this specific case, but I notice a general tendency of distribution maintainers to be sloppy about that and to amass distribution-specific patch collections that not only grow in size but also in scope.</p>
<p>So getting proper upstream review is one more reason for making the (sometimes considerable) effort of contributing one&#8217;s changes back &#8211; even if the license doesn&#8217;t require this.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88749">

			<div class="comment by-werner ">

				<p class="commentcredit">

					<span class="commenter">Werner</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88749">
						May 20, 2008 5:06 AM					</a>

				</p>

				<p>Sorry for my English. I did a major mistake. I take full responsibility, noone else is to blame for this.</p>
<p>What I wanted to say is:<br />
Proclamations like this are the <em>last thing</em> we need.<br />
BTW, it should have been &#8220;release cycle&#8221;.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88750">

			<div class="comment by-werner-baumann ">

				<p class="commentcredit">

					<span class="commenter">Werner Baumann</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88750">
						May 20, 2008 5:15 AM					</a>

				</p>

				<p>Another example of bad random name generation?<br />
There are three postings by &#8220;Werner&#8221; in a row (4.49 AM, 4.57 AM, 5:06 AM). But only the first and the third are from me, the second one is from another Werner.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88751">

			<div class="comment by-werner-almesberger ">

				<p class="commentcredit">

					<span class="commenter">Werner Almesberger</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88751">
						May 20, 2008 5:33 AM					</a>

				</p>

				<p>Hi Werner 🙂 Good example for unlikely collisions happening in real life.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88752">

			<div class="comment by-anonymous ">

				<p class="commentcredit">

					<span class="commenter">Anonymous</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88752">
						May 20, 2008 5:40 AM					</a>

				</p>

				<p>My favourite article (and an assortment of relevant cartoons):</p>
<p><a href="http://www.gergely.risko.hu/debian-dsa1571.en.html" rel="nofollow ugc">http://www.gergely.risko.hu/debian-dsa1571.en.html</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88753">

			<div class="comment by-martin ">

				<p class="commentcredit">

					<span class="commenter">Martin</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88753">
						May 20, 2008 5:47 AM					</a>

				</p>

				<p>@Werner</p>
<p>&#8220;That&#8217;s exactly what Debian is doing. Additionally: Debian developers are working on the processes to assure quality all teh time. If you have a concrete proposal, how to do this better, post it do Debian, but don&#8217;t ask them for meaningless statements for the press.&#8221;</p>
<p>I didn&#8217;t ask for a statement for the press. I just observe that the attitude seems to be one of finger-pointing and blame management, rather than taking full responsibility and making sure that this will not happen again.</p>
<p>&#8220;If you have a concrete proposal, how to do this better, post it do Debian, but don&#8217;t ask them for meaningless statements for the press.&#8221;</p>
<p>Yes. My proposal is this: <em>Never</em> <em>ever</em> modify cryptographic code unless you know exactly what you are doing, and make absolutely sure that all your project members follow this religiously. This last point is, as far as I can see, the major deficiency here. The fact that Debian ended up in this mess shows that the policies you mention are empty talk and not taken seriously. That needs to change.</p>
<p>Please note that I am not trying to blame the package maintainer here, this is a failure of the entire process and security mentality of the Debian project, and another major security failure is bound to happen in the future unless this changes.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88754">

			<div class="comment by-werner-baumann ">

				<p class="commentcredit">

					<span class="commenter">Werner Baumann</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88754">
						May 20, 2008 7:21 AM					</a>

				</p>

				<p>@Martin<br />
Don&#8217;t know, why you judge about Debian &#8220;that the policies you mention are empty talk and not taken seriously.&#8221;<br />
No. In my experience, these policies are real.</p>
<p>One example: Your proposal (&#8220;unless you know exactly what you are doing&#8221;) and this serious Debian bug are closely related to the qualification of the maintainers. New Debian Maintainers must go through a process of qualification, tutored by an experienced Debian developer, before they are alowed to do commits on their own.<br />
Now, you may say: this does not work good enough. Ok. Experienced Debian developers should take more time to qualifiy new maintainers. Thea should raise the level of required skills for some packages.<br />
What I want to hear from you too is: yes agree with the consequences: less manpower to prepare the next release, less manpower to integrate the latest release of some application software, less manpower to add the latest exiting features. I would agree to this. But as far as I can see, there is no common agreement on this, quite the contrary.<br />
And this is not a Debian specific problem. From my experiance with Apache/mod_dav I would say, this standard Apache module is simply unmaintained. It is a common problem. The balance between consolidating what exists, and creating new projects and new features, is lost. We are going to get just as bad as commercial software in this respect.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88755">

			<div class="comment by-rob-funk ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://funknet.net/rfunk' rel='external nofollow ugc' class='url'>Rob Funk</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88755">
						May 20, 2008 7:37 AM					</a>

				</p>

				<p>Since the conversation has turned to the question of Debian&#8217;s maintainer policies, some might be interested in this:<br />
<a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=332498" rel="nofollow ugc">http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=332498</a><br />
The original Debian openssl maintainer requested help.  The maintainer responsible for this mess volunteered, and ended up doing most of the work by default.  Others volunteered to help but (judging by further comments on this bug) didn&#8217;t really do much.</p>
<p>So it looks like the solution is for qualified people to both volunteer and actually spend time on package maintenance.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88756">

			<div class="comment by-carlo-graziani ">

				<p class="commentcredit">

					<span class="commenter">Carlo Graziani</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88756">
						May 20, 2008 9:40 AM					</a>

				</p>

				<p>For the life of me, I cannot understand why the Debian OpenSSL maintainers believed that they had a bug on their hands.</p>
<p>I could understand if Valgrind had indicated the presence of a memory leak.  That would probably justify some kind of intervention, although as a matter of policy the intervention should be &#8220;Go find an upstream developer and don&#8217;t stop trying until you find one and talk to him and get a definite recommendation&#8221;, not &#8220;tweak code you haven&#8217;t read and don&#8217;t understand until the symptoms appear to go away, then do no rigorous validation testing to make sure you&#8217;ve not broken anything&#8221;.</p>
<p>But what Valgrind indicated was not a bug.  It was at worst a poor coding practice, and that appears to be a matter of debatable opinion.  The fact that it is acceptable under project guidelines for a <em>package maintainer</em>  (and not a developer, as has been pointed out above) to reach in and change the code under such circumstances is a scandal, one that reflects very poorly on Debian as an institution.</p>
<p>Not that (to my knowledge) the other distributions are necessarily better in this regard.  They just haven&#8217;t broken anything as important as SSL.  Yet.  As far as we know.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88757">

			<div class="comment by-richard-braakman ">

				<p class="commentcredit">

					<span class="commenter">Richard Braakman</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88757">
						May 20, 2008 10:11 AM					</a>

				</p>

				<p>@Carlo:</p>
<p>The bug was that the Valgrind warnings were showing up in programs that were simply using openssl, thus making it more difficult to debug <em>those</em> programs.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88758">

			<div class="comment by-carlo-graziani ">

				<p class="commentcredit">

					<span class="commenter">Carlo Graziani</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88758">
						May 20, 2008 10:43 AM					</a>

				</p>

				<p>But Richard, that makes it even loonier.  Valgrind has a facility for fine-grained error suppression.  That noise from libssl could easily have been shut off in valgrind directly, without modifying the code at all.  The fact that this guy felt it necessary to tweak the openssl code anyway is even more damning of his competence.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88759">

			<div class="comment by-sam ">

				<p class="commentcredit">

					<span class="commenter">sam</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88759">
						May 20, 2008 10:55 AM					</a>

				</p>

				<p>@Martin,</p>
<p>Well that&#8217;s good. I have emotional attachment to my dsa key generated back last millennium&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88760">

			<div class="comment by-richard-braakman ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=363516' rel='external nofollow ugc' class='url'>Richard Braakman</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88760">
						May 20, 2008 4:07 PM					</a>

				</p>

				<p>@Carlo: Not in this case, apparently.</p>
<p>From the original bug report on this issue:</p>
<p>&#8220;Suppressions don&#8217;t seem to be good enough to eliminate this unfortunately &#8211; the uninitializedness taints all the users of the openssl random number generator, producing valgrind hits throughout your program, making it unnecessarily difficult to see the wood for the trees.&#8221;</p>
<p>I&#8217;ve linked my signature to the bug report, in case you&#8217;d like to take a closer look.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88761">

			<div class="comment by-martin ">

				<p class="commentcredit">

					<span class="commenter">Martin</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88761">
						May 20, 2008 5:22 PM					</a>

				</p>

				<p>@Werner Baumann</p>
<p>&#8220;Now, you may say: this does not work good enough. Ok. Experienced Debian developers should take more time to qualifiy new maintainers. Thea should raise the level of required skills for some packages.&#8221;</p>
<p>Yes, that is exactly what I mean. Catastrophic failures like this (and the cron modification in 2001) indicate an organization that does not foster a security mindset among its members.</p>
<p>&#8220;What I want to hear from you too is: yes agree with the consequences: less manpower to prepare the next release, less manpower to integrate the latest release of some application software, less manpower to add the latest exiting features. I would agree to this.&#8221;</p>
<p>It is not really relevant whether I agree to that or not, I&#8217;ve just replaced my Ubuntu installations with OpenBSD. I did that in 2004 as well (after the series of root holes in the Linux kernel, I used Debian sid at the time), but I was regrettably stupid enough to start using Ubuntu again last year. I should have known better. OpenBSD has come a long way since then, so I doubt that I&#8217;ll use Debian or Ubuntu any more.</p>
<p>&#8220;But as far as I can see, there is no common agreement on this, quite the contrary.&#8221;</p>
<p>Exactly. OpenBSD, on the other hand, has security as their #1 priority.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88762">

			<div class="comment by-pat-cahalan ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://padraic2112.wordpress.com' rel='external nofollow ugc' class='url'>Pat Cahalan</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88762">
						May 20, 2008 5:47 PM					</a>

				</p>

				<p>@ Martin</p>
<blockquote><p>
  OpenBSD, on the other hand, has security as their #1 priority.
</p></blockquote>
<p>Theo, on the other hand, has failed to follow his own rules for vulnerability disclosure.</p>
<p>Yes, Debian screwed up badly here.  Yes, it&#8217;s a process problem.  Yes, it&#8217;s probably going to happen again at some point.  That doesn&#8217;t mean that overall it is a worthless distribution.  It means that you need to be careful about using it.  Just like anything else.</p>
<p>Blanket trust in OpenBSD is just going to come back and bite you in the rear end later.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88763">

			<div class="comment by-martin ">

				<p class="commentcredit">

					<span class="commenter">Martin</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88763">
						May 20, 2008 6:19 PM					</a>

				</p>

				<p>@Pat Calahan</p>
<p>&#8220;Blanket trust in OpenBSD is just going to come back and bite you in the rear end later.&#8221;</p>
<p>Good point, I don&#8217;t trust them blindly. There are certainly flaws in OpenBSD, and the developers have made mistakes. It is, however, easier to control an OpenBSD system IMHO, and the defaults are more sane than in any Linux distro that I&#8217;ve used, not to mention that protection against a whole range of trivial attacks is enabled by default. If you&#8217;ve tried to use the grsecurity patches for Linux, you&#8217;ll know how maintainable that is. I&#8217;m not saying that Debian and Ubuntu are worthless, but as you say, something like this will probably happen again. My concern is the direction that vulnerability research is going, towards automated generation of exploits based on patches/updates:</p>
<p><a href="http://isc.sans.org/diary.html?storyid=4310" rel="nofollow ugc">http://isc.sans.org/diary.html?storyid=4310</a></p>
<p>In a couple of years, we might see automated attacks within hours or minutes of the patch release. Those who focus primarily on reactive security, with short time to patch release as the sole metric of success, will, to use your words. probably get their rear ends bitten. Those who also focus on defense-in-depth and proactive security might not be such an easy target.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88764">

			<div class="comment by-patrick-cahalan ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://padraic2112.wordpress.com' rel='external nofollow ugc' class='url'>Patrick Cahalan</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88764">
						May 21, 2008 1:12 AM					</a>

				</p>

				<p>@ Martin</p>
<p>Ja, I noticed that story.  All the more reason to keep your Internet-facing services to a minimum, and your incoming files sequestered as much as possible 😉</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88765">

			<div class="comment by-ajt ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.iredale.net/' rel='external nofollow ugc' class='url'>ajt</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88765">
						May 21, 2008 5:50 AM					</a>

				</p>

				<p>Code had bugs in it, people make errors and the maths is fallible&#8230; I think Bruce once said.</p>
<p>I use GNU/Debian and was affected, having to regenerate some keys and then redeploy them. It&#8217;s a pain but I&#8217;m not qualified to test all the code myself so I have to trust someone else to do it, and accept their errors.</p>
<p>It&#8217;s a pain in the bottom having to fix things but arguing about open/closed source is pointless. The error should not have been made and it should have been corrected earlier , but it wasn&#8217;t. If it had been closed no one would have known and it could be there for ever. Open is better in theory not not always in practice. Closed is closed so it&#8217;s impossible to comment.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88766">

			<div class="comment by-dmytry ">

				<p class="commentcredit">

					<span class="commenter">dmytry</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88766">
						May 21, 2008 8:05 AM					</a>

				</p>

				<p>getting back there, it seems a lot of people are completely missing the point about unitialized memory&#8230;<br />
To repeat:</p>
<p>The OpenSSL random generator code in question per se does NOT use uninitialized memory in any way.<br />
(see my earlier message)</p>
<p>There is a 2 different functions, both have &#8220;MD_Update(&amp;m,buf,j);&#8221; line. First one is ssleay_rand_add and second is ssleay_rand_bytes<br />
The &#8220;buf&#8221; is a parameter in both functions, not some local uninitialized variable.</p>
<p>The function purposes are really pretty obvious from names and parameters.</p>
<p>ssleay_rand_add &#8220;seeds&#8221; the generator; on unixes it is called with data from /dev/[u]random (and in portable apps with entropy gathered from events).<br />
The debian change turns it into no-op, entirely disabling the seed.</p>
<p>The ssleay_rand_bytes outputs the data into a buffer. The buffer might be uninitialized.  But in many application it contains old random data, except for the first call. Thats why  ssleay_rand_bytes uses the data already in the buffer, before writing to it. To preserve the entropy. Debugger tools give false warnings about this. If that bothered debian maintainer, he should&#8217;ve changed makefiles to have -DPURIFY by default (as he was told to).<br />
Also, when asking upstream, he just posted line numbers. No context whatsoever. Thats more like &#8220;covering your ass&#8221; or &#8220;wasting others time&#8221; than &#8220;asking&#8221;.<br />
Assuming that was not intentionally malicious, it looks like either he himself didnt even look at the context, or he cant read C code at all. It does not take security expert to understand the code.</p>
<p>Regarding OpenSSL code quality, and the whole &#8220;it should have been documented&#8221; issue.<br />
Commenting out almost <em>any</em> line causes compile error or some sort of bug.</p>
<p>How the documentation would have to look to prevent that kind of &#8216;mistake&#8217;?<br />
&#8230;. ; /*  commenting out this line is going to seriously weaken security <em>/<br />
&#8230;.. ;/</em> commenting out this line is going to seriously weaken security <em>/<br />
&#8230;.. ; /</em> commenting out this line is going to cause compile error <em>/<br />
&#8230;.. ; /</em> commenting out this line is going to cause memory leak */</p>
<p>You cannot prevent idiocy by documenting code. There was ifdef and endif and /* purify complains */ comment.<br />
It should&#8217;ve been obvious that he needs -DPURIFY rather than source code modification.</p>
<p>However, i must agree OpenSSL code is rather bad. Its dumb idea to hash PID (or any  other very low entropy stuff like datetime) into random numbers generator at start. If OpenSSL wouldnt have used PID, or would&#8217;ve added it using ssleay_rand_add, that bug would cause broken OpenSSL to always output same pseudo-random sequence, which would be immediately obvious.</p>
<p>In my own software, I hash /dev/[u]random (or cryptapi on windows; btw cryptapi random was not as broken as openssl in debian),<br />
and then on x86 platforms i sample the cpu tick count 1024 times, first 512 separated by mallocs and sleep(0) (precise timing of which is always different because of cpu cache), next 512 separated by free()&#8217;s of malloc&#8217;d data. This is merely a safeguard for case /dev/urandom or microsoft cryptapi is found to be really really badly broken (i only use that as &#8220;seed&#8221;).<br />
I never hash tiny entropy, guessable values like PID in my prng.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88768">

			<div class="comment by-samuel ">

				<p class="commentcredit">

					<span class="commenter">Samuel</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88768">
						May 22, 2008 10:40 AM					</a>

				</p>

				<p>There is a lot of fuss about the weak keys, but what seems worse in my limited understanding is that Diffie-Hellman exchanges in IPsec, SSH and SSL are also compromised. That&#8217;s far from perfect forward secrecy.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88769">

			<div class="comment by-nat ">

				<p class="commentcredit">

					<span class="commenter">Nat</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88769">
						May 22, 2008 4:10 PM					</a>

				</p>

				<p>I understand few programmers enjoy testing their own softare.  But a crypto library is different.</p>
<p>Did anyone do the normal statistical tests on this software?.  Probably not.</p>
<p>A open-sourcre project with a goal of testing/proving/attacking  openssl would be welcome.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88770">

			<div class="comment by-2closetls ">

				<p class="commentcredit">

					<span class="commenter">2closeTLS</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88770">
						May 23, 2008 9:52 AM					</a>

				</p>

				<p>OpenSSL has a lot more issues than just code that will bite poor programmers trying to improve it.<br />
OpenSSL abuses the name Open.  Time for new modular OpenTLS, with solid code.<br />
I&#8217;d bet that many have done extensive tests on ANY common element, like OpenSSL, flash, Firefox.<br />
One can do crypto with math programs, then take key, etc, into program/os.  Only trust what can verify.  Need for simple solid crypto/math is priceless and yet fleeting.<br />
People are too busy and stressed in IT.  All on purpose.  Government only makes it worse&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-88771">

			<div class="comment by-2late4crying ">

				<p class="commentcredit">

					<span class="commenter">2Late4Crying</span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88771">
						May 25, 2008 9:34 PM					</a>

				</p>

				<p>OpenSSL with the FIPS 140-2 Cert #733, had bad PRNG issues in self test and seeding!<br />
See D-kriptik website, google/yahoo/your local disk archives is your friend.<br />
Entire CERT/gov etc, and these issues are still here.<br />
Full disclosure is dead.  CERT $ game failed.  Incentives and exploits, hum&#8230;.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-88775">

			<div class="comment by-tom ">

				<p class="commentcredit">

					<span class="commenter"><a href='https://news.ycombinator.com/item?id=6343647' rel='external nofollow ugc' class='url'>Tom</a></span> •

					<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/#comment-88775">
						September 7, 2013 1:16 PM					</a>

				</p>

				<p>Random Number Bug in Debian Linux (2008) (schneier.com)</p>
<p>33 points by pdknsk 16 hours ago | 13 com</p>
<p><a href="https://news.ycombinator.com/item?id=6343647" rel="nofollow ugc">https://news.ycombinator.com/item?id=6343647</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

	<p class="subscribe-comments">
		<a href="https://www.schneier.com/blog/archives/2008/05/random_number_b.html/feed/">
			<img alt="Atom Feed" src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/rss.png">
			Subscribe to comments on this entry		</a>
	</p>

		<div id="respond" class="comment-respond">
		<h2 class="comments-open-header">Leave a comment <small><a rel="nofollow" id="cancel-comment-reply-link" href="/blog/archives/2008/05/random_number_b.html#respond" style="display:none;">Cancel reply</a></small></h2><form action="https://www.schneier.com/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate><a href="https://www.schneier.com/wp-login.php?redirect_to=https%3A%2F%2Fwww.schneier.com%2Fblog%2Farchives%2F2008%2F05%2Frandom_number_b.html" title="Login">Login</a><p class="comment-form-author"><label for="author">Name</label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" /></p>
<p class="comment-form-email"><label for="email">Email</label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" /></p>
<p class="comment-form-url"><label for="url">URL:</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" /></p>
<p class="comment-form-cookies-consent"><input id="wp-comment-cookies-consent" name="wp-comment-cookies-consent" type="checkbox" value="yes" /> <label for="wp-comment-cookies-consent">Remember personal info?</label></p>

<p class="comment-form-author">

	<label for="comm_capt_challenge">
		Fill in the blank: the name of this blog is Schneier on ___________ (required):	</label>

	<input id="comm_capt_challenge" name="comm_capt_challenge" size="30" type="text" />
</p>

<div class="comment-form-comment">

	<label for="comment">Comments:</label>

	<textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required"></textarea>

	<div id="preview-box" class="preview-box hide"></div>
	<img class="comment-loading hide" src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/loader.gif" />

</div>

<p id="allowed">

	<strong>Allowed HTML</strong>
	&lt;a href=&quot;URL&quot;&gt; &bull; &lt;em&gt; &lt;cite&gt; &lt;i&gt; &bull; &lt;strong&gt; &lt;b&gt; &bull; &lt;sub&gt; &lt;sup&gt; &bull; &lt;ul&gt; &lt;ol&gt; &lt;li&gt; &bull; &lt;blockquote&gt; &lt;pre&gt;
	<strong>Markdown Extra</strong> syntax via <a href="https://michelf.ca/projects/php-markdown/extra/">https://michelf.ca/projects/php-markdown/extra/</a>
</p>

<input type="hidden" id="wp_comment_nonce" name="wp_comment_nonce" value="4b1534b792" /><input type="hidden" name="_wp_http_referer" value="/blog/archives/2008/05/random_number_b.html" />
<input type="button" id="comment-preview" class="comment-preview comment-actions" value="Preview" />
<input type="button" id="comment-write" class="comment-write comment-actions hide" value="Edit" />

<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Submit" /> <input type='hidden' name='comment_post_ID' value='2258' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p></form>	</div><!-- #respond -->
	
	<div class="stepthrough">
		<a href="https://www.schneier.com/blog/archives/2008/05/friday_squid_bl_109.html" rel="prev">← Friday Squid Blogging: Tentacle Arm</a>		<a href="https://www.schneier.com/blog/archives/2008/05/hijacker_workin.html" rel="next">Hijacker Working at Heathrow Airport →</a>	</div>

	
<p id="powered">Sidebar photo of Bruce Schneier by Joe MacInnis.</p>
		</div>

		
<aside>
	<div class="sidebar" id="sidebar-two">
		<section><div class="sidesection widget widget_schneier_about" id="schneier_about-2"><h3>About Bruce Schneier</h3><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/Bruce-Schneier.jpg" /><p><p class="small">I am a <a href="https://public-interest-tech.com/">public-interest technologist</a>, working at the intersection of security, technology, and people. I've been writing about security issues on my <a href="/">blog</a> since 2004, and in my monthly <a href="/crypto-gram/">newsletter</a> since 1998. I'm a fellow and lecturer at Harvard's <a href="https://www.hks.harvard.edu/faculty/bruce-schneier">Kennedy School</a>, a board member of <a href="https://www.eff.org/">EFF</a>, and the Chief of Security Architecture at <a href="https://inrupt.com/">Inrupt, Inc.</a> This personal website expresses the opinions of none of those organizations.</p>
</p></div></section><section><div class="sidesection widget widget_schneier_related_posts" id="schneier_related_posts-2"><h3>Related Entries</h3>
<ul>

	<li><a href="https://www.schneier.com/blog/archives/2021/03/illegal-content-and-the-blockchain.html">Illegal Content and the Blockchain</a></li><li><a href="https://www.schneier.com/blog/archives/2021/03/national-security-risks-of-late-stage-capitalism.html">National Security Risks of Late-Stage Capitalism</a></li><li><a href="https://www.schneier.com/blog/archives/2021/02/weis-2021-call-for-papers.html">WEIS 2021 Call for Papers</a></li><li><a href="https://www.schneier.com/blog/archives/2021/02/ransomware-profitability.html">Ransomware Profitability</a></li><li><a href="https://www.schneier.com/blog/archives/2021/02/presidential-cybersecurity-and-pelotons.html">Presidential Cybersecurity and Pelotons</a></li><li><a href="https://www.schneier.com/blog/archives/2021/01/police-have-disrupted-the-emotet-botnet.html">Police Have Disrupted the Emotet Botnet</a></li>
</ul>
</div></section><section><div class="sidesection widget widget_schneier_featured_essays" id="schneier_featured_essays-2"><h3>Featured Essays</h3>
	<ul>
		<li><a href="https://www.schneier.com/essays/archives/2016/04/the_value_of_encrypt.html">The Value of Encryption</a></li><li><a href="https://www.schneier.com/essays/archives/2016/03/data_is_a_toxic_asse.html">Data Is a Toxic Asset, So Why Not Throw It Out?</a></li><li><a href="https://www.schneier.com/essays/archives/2014/01/how_the_nsa_threaten.html">How the NSA Threatens National Security</a></li><li><a href="https://www.schneier.com/essays/archives/2009/01/terrorists_may_use_g.html">Terrorists May Use Google Earth, But Fear Is No Reason to Ban It</a></li><li><a href="https://www.schneier.com/essays/archives/2007/01/in_praise_of_securit.html">In Praise of Security Theater</a></li><li><a href="https://www.schneier.com/essays/archives/2006/08/refuse_to_be_terrori.html">Refuse to be Terrorized</a></li><li><a href="https://www.schneier.com/essays/archives/2006/05/the_eternal_value_of.html">The Eternal Value of Privacy</a></li><li><a href="https://www.schneier.com/essays/archives/2005/09/terrorists_dont_do_m.html">Terrorists Don&#039;t Do Movie Plots</a></li>	</ul>

	<p><a href="https://www.schneier.com/essays/">More Essays</a></p></div></section><section><div class="sidesection widget widget_schneier_archives" id="schneier_archives-2"><h3>Blog Archives</h3>
<ul>

	<li><a href="https://www.schneier.com/blog/calendar.html/">Archive by Month</a></li><li><a href="https://www.schneier.com/blog/newcomments.html/">100 Latest Comments</a></li></ul>

<h4>Blog Tags</h4><ul class="top-tags"><li><a href="https://www.schneier.com/tag/3d-printers/">3d printers</a></li><li><a href="https://www.schneier.com/tag/9-11/">9/11</a></li><li><a href="https://www.schneier.com/tag/aaron-swartz/">Aaron Swartz</a></li><li><a href="https://www.schneier.com/tag/academic/">academic</a></li><li><a href="https://www.schneier.com/tag/academic-papers/">academic papers</a></li><li><a href="https://www.schneier.com/tag/accountability/">accountability</a></li><li><a href="https://www.schneier.com/tag/aclu/">ACLU</a></li><li><a href="https://www.schneier.com/tag/activism/">activism</a></li><li><a href="https://www.schneier.com/tag/adobe/">Adobe</a></li><li><a href="https://www.schneier.com/tag/advanced-persistent-threats/">advanced persistent threats</a></li><li><a href="https://www.schneier.com/tag/adware/">adware</a></li><li><a href="https://www.schneier.com/tag/aes/">AES</a></li><li><a href="https://www.schneier.com/tag/afghanistan/">Afghanistan</a></li><li><a href="https://www.schneier.com/tag/air-marshals/">air marshals</a></li><li><a href="https://www.schneier.com/tag/air-travel/">air travel</a></li><li><a href="https://www.schneier.com/tag/airgaps/">airgaps</a></li><li><a href="https://www.schneier.com/tag/al-qaeda/">al Qaeda</a></li><li><a href="https://www.schneier.com/tag/alarms/">alarms</a></li><li><a href="https://www.schneier.com/tag/algorithms/">algorithms</a></li><li><a href="https://www.schneier.com/tag/alibis/">alibis</a></li><li><a href="https://www.schneier.com/tag/amazon/">Amazon</a></li><li><a href="https://www.schneier.com/tag/android/">Android</a></li><li><a href="https://www.schneier.com/tag/anonymity/">anonymity</a></li><li><a href="https://www.schneier.com/tag/anonymous/">Anonymous</a></li><li><a href="https://www.schneier.com/tag/antivirus/">antivirus</a></li><li><a href="https://www.schneier.com/tag/apache/">Apache</a></li><li><a href="https://www.schneier.com/tag/apple/">Apple</a></li><li><a href="https://www.schneier.com/tag/applied-cryptography/">Applied Cryptography</a></li><li><a href="https://www.schneier.com/tag/artificial-intelligence/">artificial intelligence</a></li><li><a href="https://www.schneier.com/tag/assassinations/">assassinations</a></li></ul><p><a href="https://www.schneier.com/blog/tags.html/">More Tags</a></p></div></section><section><div class="sidesection widget widget_schneier_latest_book" id="schneier_latest_book-3"><h3>Latest Book</h3><a href="https://www.schneier.com/books/click-here/"><img class="sidepic" alt="Click Here to Kill Everybody" src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2018/07/book-ch2-200w.png" /></a><p><a href="https://www.schneier.com/books/">More Books</a></p></div></section><section><div class="sidesection widget widget_schneier_promotion" id="schneier_promotion-2">
<a href="https://www.eff.org/issues/bloggers/legal/join">
	<img src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/join-eff@2x.png" id="effbutton" alt="Support Bloggers' Rights!" title="Support Bloggers' Rights!" /></a>

<a href="https://npo.networkforgood.org/Donate/Donate.aspx?npoSubscriptionId=8252">
	<img src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/support-epic@2x.png" alt="Defend Privacy--Support Epic" title="Defend Privacy--Support Epic" /></a>
</div></section>	</div>
</aside>

		<footer>
			<nav>
				<div class="nav" id="footer-nav">
					<div class="menu-main-menu-container"><ul id="menu-main-menu-1" class="menu"><li class="menu1 menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-50175 current-menu-item"><a href="https://www.schneier.com">Blog</a></li>
<li class="menu2 menu-item menu-item-type-post_type menu-item-object-page menu-item-50916"><a href="https://www.schneier.com/crypto-gram/">Newsletter</a></li>
<li class="menu3 menu-item menu-item-type-post_type menu-item-object-page menu-item-50166"><a href="https://www.schneier.com/books/">Books</a></li>
<li class="menu4 menu-item menu-item-type-custom menu-item-object-custom menu-item-50169"><a href="https://www.schneier.com/essays/">Essays</a></li>
<li class="menu5 menu-item menu-item-type-custom menu-item-object-custom menu-item-50170"><a href="https://www.schneier.com/news/">News</a></li>
<li class="menu6 menu-item menu-item-type-custom menu-item-object-custom menu-item-50171"><a href="https://www.schneier.com/talks/">Talks</a></li>
<li class="menu7 menu-item menu-item-type-post_type menu-item-object-page menu-item-50167"><a href="https://www.schneier.com/academic/">Academic</a></li>
<li class="menu8 menu-item menu-item-type-post_type menu-item-object-page menu-item-50174"><a href="https://www.schneier.com/blog/about/">About Me</a></li>
</ul></div>				</div>
			</nav>
		</footer>

		</div><!--#main-->
	</div><!--#wrapper-->

		<script type="text/javascript">
		(function () {
			var c = document.body.className;
			c = c.replace(/woocommerce-no-js/, 'woocommerce-js');
			document.body.className = c;
		})();
	</script>
	<script type='text/javascript' src='https://c0.wp.com/p/woocommerce/5.1.0/assets/js/jquery-cookie/jquery.cookie.min.js' id='jquery-cookie-js'></script>
<script type='text/javascript' src='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/vendor/socialshareprivacy/js/socialshareprivacy.js?ver=1.0.1' id='social-share-privacy-js'></script>
<script type='text/javascript' id='social-share-privacy-icons-js-extra'>
/* <![CDATA[ */
var schneierSocial = {"path":"https:\/\/www.schneier.com\/wp-content\/themes\/schneier\/assets\/vendor\/socialshareprivacy\/"};
/* ]]> */
</script>
<script type='text/javascript' src='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/vendor/socialshareprivacy/js/icons.js?ver=1.0.0' id='social-share-privacy-icons-js'></script>
<script type='text/javascript' id='schneier-comment-js-extra'>
/* <![CDATA[ */
var schneierComment = {"translateErrorSecurityAnswerWrong":"Your response to the challenge question ('The name of this blog is Schneier on ____') was not correct. Please try again.","ajax_url":"https:\/\/www.schneier.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type='text/javascript' src='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/js/comment.js?ver=1.0.1' id='schneier-comment-js'></script>
<script type='text/javascript' src='https://c0.wp.com/c/5.7/wp-includes/js/wp-embed.min.js' id='wp-embed-js'></script>

</body>

</html>
