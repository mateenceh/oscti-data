<!DOCTYPE html>
<html lang="en-US">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<title>Security Vulnerability in glibc DNS - Schneier on Security</title>
	<meta name='robots' content='max-image-preview:large' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel='dns-prefetch' href='//c0.wp.com' />
<link rel="alternate" type="application/rss+xml" title="Schneier on Security &raquo; Feed" href="https://www.schneier.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Schneier on Security &raquo; Comments Feed" href="https://www.schneier.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Schneier on Security &raquo; Security Vulnerability in glibc DNS Comments Feed" href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/feed/" />
<link rel='stylesheet' id='wp-block-library-css'  href='https://c0.wp.com/c/5.7/wp-includes/css/dist/block-library/style.min.css' type='text/css' media='all' />
<style id='wp-block-library-inline-css' type='text/css'>
.has-text-align-justify{text-align:justify;}
</style>
<style id='woocommerce-inline-inline-css' type='text/css'>
.woocommerce form .form-row .required { visibility: visible; }
</style>
<link rel='stylesheet' id='schneier-css'  href='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/style.css?ver=1.0.0' type='text/css' media='all' />
<link rel='stylesheet' id='schneier-main-css'  href='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/dist/css/style.css?ver=1.0.2' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack_css-css'  href='https://c0.wp.com/p/jetpack/9.5.2/css/jetpack.css' type='text/css' media='all' />
<script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js?ver=3.5.1' id='jquery-js'></script>
<link rel="https://api.w.org/" href="https://www.schneier.com/wp-json/" /><link rel="alternate" type="application/json" href="https://www.schneier.com/wp-json/wp/v2/posts/7872" /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://www.schneier.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://www.schneier.com/wp-includes/wlwmanifest.xml" /> 

<link rel="canonical" href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html" />
<link rel='shortlink' href='https://www.schneier.com/?p=7872' />
<link rel="alternate" type="application/json+oembed" href="https://www.schneier.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.schneier.com%2Fblog%2Farchives%2F2016%2F02%2Fsecurity_vulner_5.html" />
<link rel="alternate" type="text/xml+oembed" href="https://www.schneier.com/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fwww.schneier.com%2Fblog%2Farchives%2F2016%2F02%2Fsecurity_vulner_5.html&#038;format=xml" />
	<noscript><style>.woocommerce-product-gallery{ opacity: 1 !important; }</style></noscript>
	<link rel="icon" href="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-32x32.png" sizes="32x32" />
<link rel="icon" href="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-192x192.png" sizes="192x192" />
<link rel="apple-touch-icon" href="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-180x180.png" />
<meta name="msapplication-TileImage" content="https://149400697.v2.pressablecdn.com/wp-content/uploads/2020/06/cropped-favicon-1-270x270.png" />
		<style type="text/css" id="wp-custom-css">
			#schneier_promotion-2 img {
    max-width: 180px;
}		</style>
		</head>

<body class="post-template-default single single-post postid-7872 single-format-standard theme-schneier woocommerce-no-js">

	<div id="wrapper">
		<div id="main">

			<header>
				<div id="header">
					<h1>
						<a href="https://www.schneier.com/" rel="home">
							Schneier on Security						</a>
					</h1>
				</div>
			</header>

			<nav>
				<div class="nav" id="header-nav">
					<div class="menu-main-menu-container"><ul id="menu-main-menu" class="menu"><li id="menu-item-50175" class="menu1 menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-50175 current-menu-item"><a href="https://www.schneier.com">Blog</a></li>
<li id="menu-item-50916" class="menu2 menu-item menu-item-type-post_type menu-item-object-page menu-item-50916"><a href="https://www.schneier.com/crypto-gram/">Newsletter</a></li>
<li id="menu-item-50166" class="menu3 menu-item menu-item-type-post_type menu-item-object-page menu-item-50166"><a href="https://www.schneier.com/books/">Books</a></li>
<li id="menu-item-50169" class="menu4 menu-item menu-item-type-custom menu-item-object-custom menu-item-50169"><a href="https://www.schneier.com/essays/">Essays</a></li>
<li id="menu-item-50170" class="menu5 menu-item menu-item-type-custom menu-item-object-custom menu-item-50170"><a href="https://www.schneier.com/news/">News</a></li>
<li id="menu-item-50171" class="menu6 menu-item menu-item-type-custom menu-item-object-custom menu-item-50171"><a href="https://www.schneier.com/talks/">Talks</a></li>
<li id="menu-item-50167" class="menu7 menu-item menu-item-type-post_type menu-item-object-page menu-item-50167"><a href="https://www.schneier.com/academic/">Academic</a></li>
<li id="menu-item-50174" class="menu8 menu-item menu-item-type-post_type menu-item-object-page menu-item-50174"><a href="https://www.schneier.com/blog/about/">About Me</a></li>
</ul></div>				</div>
			</nav>

			
<aside>
	<div class="sidebar" id="sidebar-one">
		<section><div class="sidesection widget widget_schneier_search" id="schneier_search-3"><h3>Search</h3>
<p class="small">
	<em>Powered by <a href="https://duckduckgo.com/">DuckDuckGo</a></em></p>

<form method="get" action="https://duckduckgo.com/">

	<input type="hidden" name="kh" value="1" /><!-- use https -->

	<input id="search" name="q" size="15" maxlength="255" />

	<input type="submit" value="Go" /><br>

	<input type="radio" name="sites" id="searchblog" value="www.schneier.com/blog" />
	<label for="searchblog">Blog</label>

	<input type="radio" name="sites" id="searchessays" value="www.schneier.com/essays" />
	<label for="searchessays">Essays</label>

	<input type="radio" name="sites" id="searchall" value="www.schneier.com" checked="" />
	<label for="searchall">Whole site</label>

</form>
</div></section><section><div class="sidesection widget widget_schneier_social" id="schneier_social-2"><h3>Subscribe</h3>
<div id="subscription-buttons">

	<a href="https://www.schneier.com/feed/atom"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/rss-32px.png" alt="Atom Feed" /></a><a href="https://www.facebook.com/bruce.schneier"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/facebook-32px.png" alt="Facebook" /></a><a href="https://twitter.com/schneierblog/"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/twitter-32px.png" alt="Twitter" /></a><a href="https://www.amazon.com/Schneier-on-Security/dp/B0053HDDWW/"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/kindle-32px.png" alt="Kindle" /></a><a href="https://www.schneier.com/crypto-gram"><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/email-32px.png" alt="E-Mail Newsletter (Crypto-Gram)" /></a>
</div>
</div></section>	</div>
</aside>

			<div id="content">

				
		<p id="breadcrumbs">

			<a href="https://www.schneier.com">Home</a><a href="https://www.schneier.com/blog/archives/">Blog</a>		</p>

		
<article id="post-7872" class="post-7872 post type-post status-publish format-standard hentry category-uncategorized tag-dns tag-vulnerabilities">

	<div class="article">

		<h2 class="entry">Security Vulnerability in glibc DNS</h2>
		<p>It&#8217;s a <a href="http://dankaminsky.com/2016/02/20/skeleton/">really</a> <a href="http://arstechnica.com/security/2016/02/extremely-severe-bug-leaves-dizzying-number-of-apps-and-devices-vulnerable/">bad</a> <a href="https://googleonlinesecurity.blogspot.ca/2016/02/cve-2015-7547-glibc-getaddrinfo-stack.html">one</a>.</p>

		
			<p class="entry-tags">
				<span class="tags-links">Tags: <a href="https://www.schneier.com/tag/dns/" rel="tag">DNS</a>, <a href="https://www.schneier.com/tag/vulnerabilities/" rel="tag">vulnerabilities</a></span>			</p>

		
		
		<p class="posted">
			<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html" rel="bookmark">Posted on February 22, 2016 at 2:30 PM</a>			•
			<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html#comments">74 Comments</a>		</p>

		<aside><div class="schneier-share share" data-uri="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html" data-title="Security Vulnerability in glibc DNS" data-order="facebook twitter tumblr" data-social-share-privacy="true" /></aside>
	</div>

</article>


	<h3 id="comments">Comments</h3>

	
		<article class="comment even thread-even depth-1" id="comment-268776">

			<div class="comment by-fazal-majid ">

				<p class="commentcredit">

					<span class="commenter"><a href='https://majid.info/' rel='external nofollow ugc' class='url'>Fazal Majid</a></span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268776">
						February 22, 2016 3:12 PM					</a>

				</p>

				<p>I don&#8217;t use Linux on my computers (Mac OS X and Solaris) and am not directly vulnerable there, but many IoT devices in my household are, and if past experience is any guide, manufacturers will be slow at best in releasing updates. Mitigation strategies to protect these would be helpful. It seems using a hardened DNS resolver like unbound would help, as would dropping TCP DNS and UDP DNS packets more than 512 bytes.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268777">

			<div class="comment by-winter ">

				<p class="commentcredit">

					<span class="commenter">Winter</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268777">
						February 22, 2016 3:26 PM					</a>

				</p>

				<p>Routers seem to use uClibc</p>
<p><a href="http://arstechnica.com/security/2016/02/extremely-severe-bug-leaves-dizzying-number-of-apps-and-devices-vulnerable/?comments=1&#038;post=30657399" rel="nofollow ugc">http://arstechnica.com/security/2016/02/extremely-severe-bug-leaves-dizzying-number-of-apps-and-devices-vulnerable/?comments=1&#038;post=30657399</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268778">

			<div class="comment by-kurt-seifried ">

				<p class="commentcredit">

					<span class="commenter"><a href='https://www.seifried.org' rel='external nofollow ugc' class='url'>Kurt Seifried</a></span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268778">
						February 22, 2016 3:44 PM					</a>

				</p>

				<p>Good thing all the IoT (many based on Linux) will never get an update for this. Once someone creates a working exploit we&#8217;ll have botnets forever (so nothing out of the ordinary).</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268779">

			<div class="comment by-doug-d ">

				<p class="commentcredit">

					<span class="commenter">Doug D</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268779">
						February 22, 2016 3:52 PM					</a>

				</p>

				<p>Many (most?) IoT devices do not use glibc.  It&#8217;s a big, hefty libc, with a lot of features, many of which are overkill for IoT.  Android uses Bionic instead of glibc, for example.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268780">

			<div class="comment by-weird-anybody-help ">

				<p class="commentcredit">

					<span class="commenter">Weird - anybody help?</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268780">
						February 22, 2016 4:03 PM					</a>

				</p>

				<p>I see that a critical &#8220;GNU cpio&#8221; update has been released: 2.11+dfsg-1ubuntu1.2 (<a href="http://www.ubuntuupdates.org/package/core/trusty/main/updates/cpio" rel="nofollow ugc">http://www.ubuntuupdates.org/package/core/trusty/main/updates/cpio</a>).</p>
<p>The Linux Mint update manager says that it is &#8220;Not Authenticated&#8221;. Suffice to say I have not installed this.</p>
<p>Does anybody know if this is related to the recent Linux Mint hack? Their official website (<a href="http://www.linuxmint.com/" rel="nofollow ugc">http://www.linuxmint.com/</a>) is still down.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268781">

			<div class="comment by-jeroen ">

				<p class="commentcredit">

					<span class="commenter">Jeroen</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268781">
						February 22, 2016 4:18 PM					</a>

				</p>

				<p>Linux Mint is a mess anyway<br />
<a href="https://lwn.net/Articles/676664/" rel="nofollow ugc">https://lwn.net/Articles/676664/</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268782">

			<div class="comment by-pellaeon ">

				<p class="commentcredit">

					<span class="commenter">Pellaeon</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268782">
						February 22, 2016 4:26 PM					</a>

				</p>

				<p>&#8216;glibc&#8217; not gilbc.<br />
Also the widespread nature of this does not bode well</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268783">

			<div class="comment by-ryan-littlefield ">

				<p class="commentcredit">

					<span class="commenter">Ryan Littlefield</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268783">
						February 22, 2016 4:26 PM					</a>

				</p>

				<p>There is a typo in the title. It should be glibc, not gilbc.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268784">

			<div class="comment by-bas ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://nevermind' rel='external nofollow ugc' class='url'>Bas</a></span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268784">
						February 22, 2016 4:27 PM					</a>

				</p>

				<p>Title typo alert&#8230; gilbc??</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268786">

			<div class="comment by-dave ">

				<p class="commentcredit">

					<span class="commenter">Dave</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268786">
						February 22, 2016 5:27 PM					</a>

				</p>

				<p>It&#8217;s already been fixed for 5 days for the major distros.<br />
<a href="https://launchpad.net/ubuntu/+source/glibc" rel="nofollow ugc">https://launchpad.net/ubuntu/+source/glibc</a></p>
<p>yes, IoT devices may be vulnerable, but most have more holes than a good swiss cheese anyway.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268788">

			<div class="comment by-aman ">

				<p class="commentcredit">

					<span class="commenter">aman</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268788">
						February 22, 2016 8:14 PM					</a>

				</p>

				<p>cpio is debian update<br />
<a href="https://www.debian.org/security/#DSAS" rel="nofollow ugc">https://www.debian.org/security/#DSAS</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268789">

			<div class="comment by-super-max ">

				<p class="commentcredit">

					<span class="commenter">super max</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268789">
						February 22, 2016 8:54 PM					</a>

				</p>

				<p>Isn&#8217;t MAC OSX and FreeBSD somewhat similar?  I mean MAC OSX may contain glibc</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268790">

			<div class="comment by-gunter-konigsmann ">

				<p class="commentcredit">

					<span class="commenter"><a href='http://www.physikbuch.de' rel='external nofollow ugc' class='url'>Gunter Königsmann</a></span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268790">
						February 22, 2016 10:46 PM					</a>

				</p>

				<p>Similar, but not the same. But testing for a missing range check might not be a bad idea, anyway: in the 90s Linux and windows once had the same bug independently from each other that they did not check for the length of simple tcp packets. Linux and bsd are even related&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268791">

			<div class="comment by-clive-robinson ">

				<p class="commentcredit">

					<span class="commenter">Clive Robinson</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268791">
						February 23, 2016 4:31 AM					</a>

				</p>

				<p>@ super max,</p>
<blockquote><p>Isn&#8217;t MAC OSX and FreeBSD somewhat similar?</p></blockquote>
<p>All *nix have a common ansestry, and what we would now call Open Source saw a lot of code crossing over between the various branches.</p>
<p>Of special note however was &#8220;networking&#8221; it came somewhat later and most used the BSD Network code. Which due to the BSD licence ment it also ended up virtually unchanged in other operating systems (MS OS&#8217;s being one of the more obvious). This commonality of code whilst good for interoperability also ment commonality of vulnerabilities as well, as early DoS attacks demonstrated.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268792">

			<div class="comment by-blake ">

				<p class="commentcredit">

					<span class="commenter">blake</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268792">
						February 23, 2016 5:29 AM					</a>

				</p>

				<p>Somewhere a TAO engineer swears and crosses 14 implants off their product list.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268793">

			<div class="comment by-callmelateforsupper ">

				<p class="commentcredit">

					<span class="commenter">CallMeLateForSupper</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268793">
						February 23, 2016 6:42 AM					</a>

				</p>

				<p>That is my smile for the day.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268794">

			<div class="comment by-keiner ">

				<p class="commentcredit">

					<span class="commenter">keiner</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268794">
						February 23, 2016 7:24 AM					</a>

				</p>

				<p>OT: Headline switching from &#8220;gilbc&#8221; to &#8220;giblc&#8221; is only a minor improvement. 😀</p>
<p>Does anybody want to scrub in and explain to Dr. Schneier the logics of linux file names?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268795">

			<div class="comment by-keiner ">

				<p class="commentcredit">

					<span class="commenter">keiner</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268795">
						February 23, 2016 7:27 AM					</a>

				</p>

				<p>@blake</p>
<p>fu<em>ked is fu</em>ked, no help in applying any patches.</p>
<p>You have to setup a complete fresh system to get rid of any implants/malware. Nobody is going to do this, so only thing is: No new infections to patched (!) systems, nothing else.</p>
<p>Exploits of the NSA will be functional forever and new infections to embedded devices will work for DECADES without new firmwares.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268796">

			<div class="comment by-jbmartin6 ">

				<p class="commentcredit">

					<span class="commenter">jbmartin6</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268796">
						February 23, 2016 8:50 AM					</a>

				</p>

				<p>Just because the library is present does not necessarily mean any given IOT or other device is vulnerable. There still must be a mechanism to induce it to make some arbitrary DNS lookup, and then return the payload as a response to the lookup. An email server doing reverse lookups on IP addresses would be vulnerable. A refrigerator that only uses DNS to look up the configured mail or IM servers is not much of a concern.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268797">

			<div class="comment by-jeremyp ">

				<p class="commentcredit">

					<span class="commenter">jeremyp</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268797">
						February 23, 2016 9:20 AM					</a>

				</p>

				<p>@super max</p>
<blockquote><p>
Isn&#8217;t MAC OSX and FreeBSD somewhat similar? I mean MAC OSX may contain glibc
</p></blockquote>
<p>No. Apple&#8217;s libc is a completely different implementation of the C standard library and OS X contains very few Gnu components (on account of the licensing terms).</p>
<p>Here is a list of <a href="http://www.apple.com/opensource/" rel="nofollow ugc">Apple&#8217;s Open Source components</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268798">

			<div class="comment by-nix ">

				<p class="commentcredit">

					<span class="commenter">Nix</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268798">
						February 23, 2016 9:29 AM					</a>

				</p>

				<p>As a fairly relevant aside, I&#8217;m working on a patch series (first posting, with numerous bugs I&#8217;m testing fixes for: <a href="https://sourceware.org/ml/libc-alpha/2016-02/msg00585.html" rel="nofollow ugc">https://sourceware.org/ml/libc-alpha/2016-02/msg00585.html</a> and followups) to compile most of glibc with GCC&#8217;s -fstack-protector stack-canary buffer-overrun protection facility. (Actually I first wrote it in 2008 then had too severe impostor syndrome to get it in: I&#8217;ve just revived and improved it). This wouldn&#8217;t solve all security problems in glibc, or even stop all overruns, but it would certainly stop this one, or rather convert it to a DoS attack by calling __stack_chk_fail() and aborting the affected program.</p>
<p>ld.so and small parts of static binary initialization and thread initialization are not stack-protected even after this series (fixing that is a place for future improvement); nor are functions written in pure assembly and a few C functions called directly from assembly. But the rest should be protected if this patch series gets in, including the nss facilities that do the low-level name/user/group database lookups and that were buggy in this case. libresolv and nscd already were protected this way, but nss was not; nor were all the other library components of glibc.</p>
<p>At least, they&#8217;ll be protected after it&#8217;s had a good few months to have the bugs kicked out of it on as many architectures as possible!</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268799">

			<div class="comment by-nick-p ">

				<p class="commentcredit">

					<span class="commenter">Nick P</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268799">
						February 23, 2016 11:46 AM					</a>

				</p>

				<p>@ Nix</p>
<p>Why use tactics (canaries) when you can use elite strategy (memory safety)? Try compiling it or utility apps with <a href="http://www.cs.rutgers.edu/~santosh.nagarakatte/softbound/" rel="nofollow ugc">Softbound + CETS</a> to see what happens. Cutting-edge tools need more testing so their problems can be fixed. Only issue I see is that Softbound is LLVM, not GCC. Someone once told me you could get portable code out of GCC compiler arguments but idk. Might be a solution there if any LLVM vs GCC issues turn up.</p>
<p>Note: If performance hit is too much, try the lesser invariant of <a href="http://dslab.epfl.ch/proj/cpi/" rel="nofollow ugc">Code Pointer Integrity</a> that still provides quite a bit of protection usually at single-digit percentages of performance loss.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268800">

			<div class="comment by-marc-espie ">

				<p class="commentcredit">

					<span class="commenter">Marc Espie</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268800">
						February 23, 2016 1:31 PM					</a>

				</p>

				<p>The most annoying thing in that bug is that it&#8217;s been known since July.</p>
<p>Even though Drepper is no longer involved, the developers of glibc still have that &#8220;know it all&#8221; attitude.  And they still badly fail at prioritizing bug fixes.</p>
<p>I mean, why was this bug not fixed earlier ?</p>
<p>There is something deeply wrong about the mentality &#8220;show me a proof of concept exploit for that bug or I won&#8217;t fix it timely&#8221;.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268801">

			<div class="comment by-keiner ">

				<p class="commentcredit">

					<span class="commenter">keiner</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268801">
						February 23, 2016 1:45 PM					</a>

				</p>

				<p>@Marc Espie</p>
<p>It&#8217;s about the engineer attitude in computer business, never look for something safe and sound, just kick out the cheapest, fastest, easiest solution. No real quality control system, no independent review (until it&#8217;s too late).</p>
<p>Same thing leading to death and accidents e.g. in automobile industry and related product recalls. Sick system.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268802">

			<div class="comment by-coincidenceagain ">

				<p class="commentcredit">

					<span class="commenter">CoincidenceAgain</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268802">
						February 23, 2016 5:30 PM					</a>

				</p>

				<p>Is it really a COINCIDENCE that Google discovered this bug independently from Red Hat. I remember that similar coincidence happened when the Heartblead bug was discovered. Or maybe Google just knows what other researches are working on?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268803">

			<div class="comment by-clive-robinson ">

				<p class="commentcredit">

					<span class="commenter">Clive Robinson</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268803">
						February 23, 2016 6:08 PM					</a>

				</p>

				<p>@ CoincidenceAgain,</p>
<blockquote><p>Or maybe Google just knows what other researches are working on?</p></blockquote>
<p>The chances of that are higher than most would think&#8230;</p>
<p>I used to work for an organisation that supplied databases to research organisations. Customers had various options for using any given DB either on a personal workstation, on an organisation hosted server or via an online server.</p>
<p>All major research organisations &#8211;like drug companies&#8211; went down either of the local DB options, never down the online option.</p>
<p>I got to chatting with a researcher for an organisation that went down the personal workstation route for all their researchers and asked them why, as it would be cheaper and more effective to go down the local server route. What they told me caused a raised eyebrow at the time, which was the money difference between giving everybody their own personal DB and loosing a research edge even within the organisation was so large that the cost was effectivly less than pocket change in their general computer and data security costs.</p>
<p>Later when involved with another DB supplier at a meeting I sugested that a new online product should have an &#8220;environment&#8221; which gave a researcher citation tools (like EndNote etc) there was luke warm interest. Untill somebody pointed out that in knowing their searches and what citations they indexed we would know what they were thinking and researching and that was &#8220;market gold&#8221; at which point the meeting became very high energy&#8230;</p>
<p>In short they were in effect talking about becoming insider traders&#8230;</p>
<p>So yes there is a good chance that Google could know rather more about others research than you would expect. I suspect it would take very little to corelate what people at Red Hat etc searched for and have a very good idea about who or what they do at RH, thus what their searches related to&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268804">

			<div class="comment by-marc-espie ">

				<p class="commentcredit">

					<span class="commenter">Marc Espie</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268804">
						February 23, 2016 7:43 PM					</a>

				</p>

				<p>@keiner: please, don&#8217;t generalize the glibc attitude to every developers team.</p>
<p>What you describe is not an engineer. Specifically, an engineer is supposed to have ethics and standards.</p>
<p>People who write software libraries should be concerned about actual security these days (heck, they should always have been, but 30 years ago, the machines were slower, the ram was cramped, and you didn&#8217;t have computers and internet everywhere).</p>
<p>We should call obvious mistakes and not let it pass with a cynical view &#8220;oh, everybody does the same shit, so it&#8217;s okay&#8221;.  These guys should be held accountable. There is no excuse that holds for letting a bug with possible security implications fester like that for six months.</p>
<p>How do you expect the situation to improve if you don&#8217;t at least try those guys to feel ashamed of themselves ?&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268805">

			<div class="comment by-mark-mayer ">

				<p class="commentcredit">

					<span class="commenter">Mark Mayer</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268805">
						February 23, 2016 9:25 PM					</a>

				</p>

				<p>@Clive Robinson<br />
@CoincidenceAgain</p>
<p>Are either of you referring to the Gmail Special Branch? Weren&#8217;t they shut down in 1844?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268806">

			<div class="comment by-keiner ">

				<p class="commentcredit">

					<span class="commenter">keiner</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268806">
						February 24, 2016 2:56 AM					</a>

				</p>

				<p>@Marx Espie</p>
<p><a href="http://www.newyorker.com/magazine/2015/05/04/the-engineers-lament" rel="nofollow ugc">http://www.newyorker.com/magazine/2015/05/04/the-engineers-lament</a></p>
<p>Enjoy! 🙂</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268807">

			<div class="comment by-keiner ">

				<p class="commentcredit">

					<span class="commenter">keiner</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268807">
						February 24, 2016 3:04 AM					</a>

				</p>

				<p>@Marc Espie</p>
<p>&#8230;and btw. which piece of software is NOT poorly written? We had unbelievable glitches (?) in nearly every piece of essential software, from kernels to essential security suites (openSSL pure trash, etc. pp.).</p>
<p>Even Microsh*t, drowning in money, is not capable of providing some reliable code.</p>
<p>So name a software project with reasonable quality control system.</p>
<p>And this won&#8217;t change before infamous US product liability lawyers will take the case 🙂</p>
<p>These guys sue each and everybody for the last trashy case you can shake of some dollars from (foreign?) companies. But the US software industry is sacrosanct. Maybe because in bed with the most reliable procurer in the world, the CIA/FBI/NSA complex?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268808">

			<div class="comment by-keiner ">

				<p class="commentcredit">

					<span class="commenter">keiner</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268808">
						February 24, 2016 3:08 AM					</a>

				</p>

				<p>&#8230;ooopps:</p>
<p><a href="https://www.ftc.gov/system/files/documents/cases/160222asuscmpt.pdf" rel="nofollow ugc">https://www.ftc.gov/system/files/documents/cases/160222asuscmpt.pdf</a></p>
<p>20 years software review by the NSA, that&#8217;s hard!</p>
<p>But wait, it&#8217;s a Chinese company! 😀</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268809">

			<div class="comment by-marc-espie ">

				<p class="commentcredit">

					<span class="commenter">Marc Espie</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268809">
						February 24, 2016 4:07 AM					</a>

				</p>

				<p>@keiner OpenBSD of course.  The old existing code can be a bit crufty (filesystem layer in the kernel), but we&#8217;ve been cleaning the code for decades, and we do try much harder than the others to not let anything pass (systematic eradication of anything that&#8217;s broken).</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268810">

			<div class="comment by-keiner ">

				<p class="commentcredit">

					<span class="commenter">keiner</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268810">
						February 24, 2016 6:41 AM					</a>

				</p>

				<p>@Marc Espie</p>
<p>Nice to hear, as my router is built on BSD (pfSense) 😀</p>
<p>The downside: PC-BSD, the only usable desktop version of BSD (afaik) is a bit, eeehm, difficult to handle, I have one machine with 10, but e.g. setting up Truecrypt or VNC is beyond my capabilities, while not a real problem on Linux&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268811">

			<div class="comment by-z ">

				<p class="commentcredit">

					<span class="commenter">z</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268811">
						February 24, 2016 11:34 AM					</a>

				</p>

				<p>@keiner</p>
<p>PC-BSD is far from the only usable desktop BSD. I&#8217;ve been running OpenBSD on half a dozen laptops, some ethernet switches, and  some wireless APs for years and it works very well for all of it. It&#8217;s   high quality code and  well documented. It  is  much more usable out of the box on my ThinkPads than FreeBSD or its derivatives, including PC-BSD.</p>
<p>Since he&#8217;s here, many  thanks to Marc Espie and the rest of the OpenBSD devs for all the great work you do.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268812">

			<div class="comment by-keiner ">

				<p class="commentcredit">

					<span class="commenter">keiner</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268812">
						February 24, 2016 12:02 PM					</a>

				</p>

				<p>Ooops, pfsense is also built on free BSD! 😀</p>
<p>OpenBSD with a KDE desktop, OK, that would be it, I will start looking at that&#8230;</p>
<p><a href="http://openbsdsupport.org/index.html" rel="nofollow ugc">http://openbsdsupport.org/index.html</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268813">

			<div class="comment by-marc-espie ">

				<p class="commentcredit">

					<span class="commenter">Marc Espie</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268813">
						February 24, 2016 12:50 PM					</a>

				</p>

				<p>@keiner most of KDE4 runs on OpenBSD, thanks to the tremendous work of Vadim Zhukov over the last two years.</p>
<p>There are a few bumps. More tester might be a good idea.</p>
<p>The main issue these days is&#8230; the systemd plague, with more software each day thinking they only need to run on linux.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268814">

			<div class="comment by-keiner ">

				<p class="commentcredit">

					<span class="commenter">keiner</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268814">
						February 24, 2016 2:27 PM					</a>

				</p>

				<p>@Marc Espie</p>
<p>I hate this systemd thing, but no way arround any more, this war is lost. Next thing I will have to move my Raspis to Raspian with systemd, although with a very bad felling. But using some machines with opensuse, the struggle to avoid systemd is already somewhat lost.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268815">

			<div class="comment by-marc-espie ">

				<p class="commentcredit">

					<span class="commenter">Marc Espie</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268815">
						February 24, 2016 3:49 PM					</a>

				</p>

				<p>There is some gsoc project aiming at creating a systemd-like interface in userland so that gnome/kde/whatevergui can use it without all the security risks systemd incurs.</p>
<p>(I&#8217;m serious, putting all kinds of security stuff into one gooey stuff that deals with user accounts, timezones, dbus-like xml shit is totally insane, yet the guys behind systemd advocate for it. The hubris!)</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268816">

			<div class="comment by-anon ">

				<p class="commentcredit">

					<span class="commenter">Anon</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268816">
						February 24, 2016 4:59 PM					</a>

				</p>

				<blockquote><p>These guys should be held accountable. There is no excuse that holds for letting a bug with possible security implications fester like that for six months.</p></blockquote>
<p>&#8230;but the fanboys still think OSS is superior to closed-source! Sad reality is that you get what you pay for.</p>
<p>Unfortunately, on both sides of the isle, <b>software quality</b> can be non-existent. It&#8217;s about time we called out the rubbish software devs, and made it impossible for them to work in our industry.</p>
<p>I still haven&#8217;t forgotten when the OpenSSL code quality was being condenmed in the strongest possible terms after Heartbleed. Unfortunately, it seems no-one listened, and nothing got done about it (the code quality was worse than junk, and a total re-write was recommended).</p>
<p>There are too many people out there that think knowing the C++ standard backwards makes a good software engineer. I know how to drive a car, but don&#8217;t ask me to build one&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268817">

			<div class="comment by-dirk-praet ">

				<p class="commentcredit">

					<span class="commenter">Dirk Praet</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268817">
						February 24, 2016 6:08 PM					</a>

				</p>

				<p>@ Anon</p>
<p><i>I still haven&#8217;t forgotten when the OpenSSL code quality was being condenmed in the strongest possible terms after Heartbleed. Unfortunately, it seems no-one listened, and nothing got done about it&#8230;</i></p>
<p>Although pretty much everyone agrees that OpenSSL is beyond repair, there was a massive code audit by the Open Crypto Audit Project in the wake of Heartbleed and several forks like LibreSSL by the OpenBSD foundation and Amazon&#8217;s s2n.</p>
<p>If you don&#8217;t believe in FOSS code, stick to Apple and Microsoft. If you want to make a difference, learn how to code and join a project. If more people did, maybe code would be better and bugs squashed faster.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268818">

			<div class="comment by-anon ">

				<p class="commentcredit">

					<span class="commenter">Anon</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268818">
						February 24, 2016 8:14 PM					</a>

				</p>

				<p>@Dirk Praet: I&#8217;m not saying bugs can&#8217;t be fixed, but referring more generally at the basic code. Maybe we are more aware/enlightened now than before, but all we are doing is trying to patch the Marie Celeste, instead of building a totally new ship.</p>
<p>I&#8217;d prefer to see an attempt made to re-write core software from scratch, knowing what we do today. If it breaks compatibility with some things, tough. Those things that broke will either need correcting or re-writing as well.</p>
<p>Until we get beyond being afraid of breaking old code, we will be unable to build better systems in the future.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268819">

			<div class="comment by-ada ">

				<p class="commentcredit">

					<span class="commenter">ada</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268819">
						February 24, 2016 10:34 PM					</a>

				</p>

				<p>It is time to recognize that it is not possible to write safe or secure code in c/c++, just like it is impossible to safely juggle with a running chainsaw.<br />
Currently we pretend that it is possible to do so; each time someone&#8217;s head gets cut off we blame him for making an &#8216;obvious&#8217; rookie mistake. Of course, mistakes continue to be made, and heads keep rolling.</p>
<p>This is exactly what the aerospace industry did in its early days: each time a pilot made a mistake and crashed a plane, the pilot was blamed for an avoidable &#8216;operator error&#8217;.</p>
<p>Luckily, aviation has moved beyond blaming the pilot and has recognized that no one is perfect. If a system is susceptible to human error, it is not a safe system.</p>
<p>It is time to drop the heroics and confess that we all make mistakes. Then we can move on to using tools that don&#8217;t cut off our heads when we make one.</p>
<p>Ada is a mature language that provides compile time protection against all of the c-typical vulnerabilities. With Ada, there would have been no heartbleed bug. There would have been no glibc bug. There would have been no Debian OpenSSL bug.</p>
<p>Also, Ada comes with many tools that allow to mathematically prove code properties. Safety-critical code used on millions of servers deserves this kind of scrutiny.</p>
<p>Is it a coincidence that there is an Underhanded c-Code Contest, but no similar contest for Ada?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268820">

			<div class="comment by-clive-robinson ">

				<p class="commentcredit">

					<span class="commenter">Clive Robinson</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268820">
						February 25, 2016 12:17 AM					</a>

				</p>

				<p>@ ada,</p>
<blockquote><p>It is time to recognize that it is not possible to write safe or secure code in c/c++,</p></blockquote>
<p>Actually it&#8217;s true of all languages that are of any use.</p>
<p>There are two reasons for this. Firstly language designers are human not omnipotent and omnipresent with perfect foresight. Secondly all useful tools are dangerous, because what makes them usefull is agnostic to use, it&#8217;s the controling mind or lack there of that makes their use safe or dangerous in any given situation.</p>
<p>Thus whilst Ada has got &#8220;safety guards&#8221; they can be bypassed or removed.</p>
<p>To use your style of analogy, they are like manual feed table saws with guards. To do their job there has to be a gap in the guards for an operator to do their work. It is therefore down to the operator to use a safe &#8220;push stick&#8221; to protect not just their fingers but the saw it&#8217;s self.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268821">

			<div class="comment by-keiner ">

				<p class="commentcredit">

					<span class="commenter">keiner</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268821">
						February 25, 2016 1:56 AM					</a>

				</p>

				<p>@Dirk Praet</p>
<p>&#8221; If you want to make a difference, learn how to code and join a project.&#8221;</p>
<p>That is absolutely unacceptable as an attitude against the users of software, although I see it in every tech forum, may it be firewall, OS or something else: Shut up or learn to code and write something better.</p>
<p>It&#8217;s unbelievable that these guys in software industry get away with that. If you don&#8217;t like your headache pills, learn something about drug development and invent a better one. Utter nonsense, that is why we have a system called &#8220;division of work&#8221; in modern societies, everybody does the best in his profession, but has to TRUST (!) that others also do their best in theirs. And here is where (many! 🙂 ) software engineers betray society (as do bankers, btw), in looking only for a fast job, take the money and run away from responsibility for the trash they produced. And then tell people: Move on, do it better if you can!</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268822">

			<div class="comment by-marc-espie ">

				<p class="commentcredit">

					<span class="commenter">Marc Espie</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268822">
						February 25, 2016 2:47 AM					</a>

				</p>

				<p>Thinking that if you change language you will get better security is a common fallacy. Get off your soapbox.  There are obvious issues with every language. The main reason you mostly talk about the C/C++ ones is because they&#8217;re more publicized and easier to exploit (the low hanging fruit model of offensive security).</p>
<p>Take PAM for instance. Its configuration language is more high level than C/C++, obviously. Yet every distribution that integrated it managed to fuck up its configuration in a big way at some point.</p>
<p>There&#8217;s also absolutely nothing C or C++ specific to the way certificate authorities work. Yet they got broken regularly.</p>
<p>Or take the gnupgp issue a few years back. I&#8217;m talking about mixing up what you trust a certificate for.   Chains of trust have complicated semantics. It was not language specific at all.</p>
<p>BTW, WRT openssl, there&#8217;s a reason OpenBSD forked that pile of poo into libressl and started removing all the bad code&#8230;</p>
<p>But hey, the rest of the world still waits for the openssl crew to magically get their shit together. Oh, and in some cases there&#8217;s money involved. Not a surprise.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268823">

			<div class="comment by-keiner ">

				<p class="commentcredit">

					<span class="commenter">keiner</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268823">
						February 25, 2016 3:26 AM					</a>

				</p>

				<p>OPNsense (forked pfsense) had a libreSSL amr of the project, but currently I don&#8217;t see this any more to be downloaded (maybe enough other problems?). I would love to switch to something based on libreSSL for my router, but&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268824">

			<div class="comment by-gerard-van-vooren ">

				<p class="commentcredit">

					<span class="commenter">Gerard van Vooren</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268824">
						February 25, 2016 3:32 AM					</a>

				</p>

				<p>@ Marc Espie,</p>
<blockquote><p>Thinking that if you change language you will get better security is a common fallacy. Get off your soapbox. There are obvious issues with every language. The main reason you mostly talk about the C/C++ ones is because they&#8217;re more publicized and easier to exploit (the low hanging fruit model of offensive security).</p></blockquote>
<p>First of all, Ada <em>is</em> a safe language. Its safety doesn&#8217;t only come from bounds checks but also because of code organization, readability, contracts and you name it. If Ada would have been used in computing we would probably have half of the security breaches today. <b>Yes, half of the security breaches are directly related to C. So using Ada eliminates a significant vector of problems.</b></p>
<p>Talking about PAM, GPG or OpenSSL doesn&#8217;t make the problem of C any less, on the contrary. The more code that is written in C, the worse it becomes.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268825">

			<div class="comment by-clive-robinson ">

				<p class="commentcredit">

					<span class="commenter">Clive Robinson</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268825">
						February 25, 2016 5:06 AM					</a>

				</p>

				<p>Speaking of &#8220;Safe Languages&#8221; there is a point that few consider about their security from attack.</p>
<p>Most &#8220;attack scenarios&#8221; you read about assume the attacks come down the computing stack either by program input doing something like smashing the stack or out of range/bounds causing branch errors etc or via other programs being able to get timing side channels.</p>
<p>What you don&#8217;t see mentioned very often is attacks going up the computing stack. The most known about such attacks are via the DMA controler used in high speed IO (FireWire etc).</p>
<p>Such attacks are fairly leathal in that it&#8217;s very very difficult to do anything about it at a higher level to mitigate it.</p>
<p>Look at it this way you have an application that has no vulnerabilities to inputs or IO issues (yes I know there is no such program but this is a thought example ;-). The code is protected by a signing process so it will only load and thus execute if it is unaltered. That is about the limit of what we generaly do with current general purpose computer systems and OSs, though we are starting to put in detection for writes to the static segments such as code and act sensibly on detecting them (well over a decade or two after the hardware would support it). But it does not work if the attack is from below those mechanisms in the computing stack or for read write memory in the heap etc. Nor do they work with attacks like Row Hammer, or certain types of soft hardware faults that can be exploited (EM fault injection etc) that well resourced entities can develop and deploy as they see fit.</p>
<p>Thus an attack from below will alow &#8220;input checking&#8221; to be bypassed etc and most of those &#8220;safe language&#8221; features as well. In fact arguably programs developed with &#8220;safe languages&#8221; are more vulnerable for a number of reasons. Firstly programers know they are working with a safe language and become over reliant on it&#8217;s features. Secondly as a rule of thumb &#8220;safe languages&#8221; have a more structured and organised memory map thus directed attacks are easier to make.</p>
<p>It&#8217;s only when you look over into people developing space and aerospace mission critical systems do you see the start of this sort of attack class being mittigated. Not because they are considering this type of attack class, but because they know hardware no matter how well built and protected is unreliable in certain environments. Unfortunatly in many cases their solutions result in even more highly structured low level code out of their tool chains, because it makes in operation hardware fault checking easier but also makes deliberate attacks easier in the process.</p>
<p>Yes it all sounds theoretical, untill you remember that OS design is changing. Traditional OSs are seen as a &#8220;bottleneck&#8221; these days and thus we are getting &#8220;userland IO&#8221;&#8230; Which moves the security foundations around a lot and opens up cracks where &#8220;bubbling up&#8221; attacks will work.</p>
<p>The message is as always &#8220;security is hard, very hard&#8221; and &#8220;very very few can write secure code&#8221; at the best of times. It&#8217;s not helped by over reliance on tools such as &#8220;safe languages&#8221; where the programmer abdicates much responsability to the tool chain, thus fails to code defensively.</p>
<p>But worst of all is &#8220;managment expectations&#8221;, the field of endevor has turned in many area into &#8220;sausage machine, code cutting shops&#8221; much of which is based on &#8220;code reuse&#8221; to crank it out. Unfortunatly much of this old code is bad very bad because nobbody dares,fix it in case they break other things, it also gets &#8220;hidden away&#8221; in lower level libraries, putting a &#8220;safe language&#8221; program on top will not solve these &#8220;code cutter&#8221; &#8220;old code reuse shop&#8221; problems either.</p>
<p>All of which is not to say I&#8217;m against &#8220;safe languages&#8221; it&#8217;s the &#8220;not using them properly&#8221; which applies to all languages safe or otherwise that I&#8217;m against.</p>
<p>And that&#8217;s the point at the end of the day if programers used a language properly within it&#8217;s limits and known environment we would not have the number of vulnerabilities we have.</p>
<p>When I hear people say such things as &#8220;XX% of problems would not happen if we used language YY&#8221; what it realy is say is that the industry is failing to educate practitioners in &#8220;the proper use&#8221;, or that the it is demanding to much of practitioners, or the practitioners are not behaving as engineers in other fields of endevor do&#8230;</p>
<p>As has been observed a long long time ago &#8220;A bad workman blaims his tools&#8221;. Back then articifers and craftsmen and those who would later become the first engineers &#8211;as science progressed&#8211; made their own tools, so by blaiming their tools they were telling people that they were bad workmen&#8230; I think the software industry has a lot of catching up to do.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268826">

			<div class="comment by-gerard-van-vooren ">

				<p class="commentcredit">

					<span class="commenter">Gerard van Vooren</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268826">
						February 25, 2016 5:39 AM					</a>

				</p>

				<p>@ Clive Robinson,</p>
<p>Sorry but I disagree, entirely (about PLs that is). The fact that the underhanded C contest exist AND that nothing has been done to solve the issues, that alone says that C is an unfixable dead end. But it&#8217;s also a language that sticks like dog poo and it&#8217;s as smelly as well. C doesn&#8217;t go away because people are still defending that stinky language. With Ada you are designing a program, with C you are hacking a program. THAT is the main difference in programming with Ada and C.</p>
<p>With Ada you spend 4 hours designing and 4 hours testing. You go home and sleep well because you know your program works as specified.<br />
With C++ you spend 2 hours hacking, 2 hours satisfying the compiler and compiling and 4 hours testing. You go home with the feeling that cross-platform compilation might break down the line.<br />
With C you spend 1 hour hacking and 7 hours testing. You go home with the thought that you might have forgotten something. 6 months from now you get a phone call that the world is on fire because you made a typo.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268827">

			<div class="comment by-boppingaround ">

				<p class="commentcredit">

					<span class="commenter">BoppingAround</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268827">
						February 25, 2016 9:36 AM					</a>

				</p>

				<p>keiner,</p>
<blockquote><p>
  It&#8217;s unbelievable that these guys in software industry get away with<br />
  that. If you don&#8217;t like your headache pills, learn something about drug<br />
  development and invent a better one. Utter nonsense, that is why we have a<br />
  system called &#8220;division of work&#8221; in modern societies, everybody does the best<br />
  in his profession, but has to TRUST (!) that others also do their best in<br />
  theirs.
</p></blockquote>
<p>It is believable because it is probably just as bad in other areas, the<br />
difference being less vocality. Count in the amount of people &#8216;not in their<br />
place&#8217;, i. e. working at $PLACE because $PLACE were hiring and because those<br />
people needed money to survive. I find it hard to believe that those people<br />
will work their arse off because &#8216;division of work&#8217; tells them that they<br />
must. Count in other variables like incompetent management, bike-shedding [A],<br />
other circumstances that may influence the decisionmaking on whatever<br />
level.</p>
<hr />
<p>[A] <a href="https://en.wikipedia.org/wiki/Bikeshedding" rel="nofollow ugc">https://en.wikipedia.org/wiki/Bikeshedding</a></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268828">

			<div class="comment by-nix ">

				<p class="commentcredit">

					<span class="commenter">Nix</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268828">
						February 25, 2016 10:04 AM					</a>

				</p>

				<p>@Nick P, because compiling glibc with Softbound + CETS is almost certain to be a total nightmare to get working, that&#8217;s why. glibc doesn&#8217;t compile with LLVM yet, for starters, and even if it did significant parts of it are assembler and it does all sorts of deeply evil things, particularly in early startup (and we have to be aware of that even when ld.so is not being considered, because the static library does many of the things ld.so does at startup using un-rebuilt objects from the core libc &#8212; things like memcpy() which you really do want to keep an eye on in the general case).</p>
<p>In this case, the perfect would very much be the enemy of the good. Stack-protecting glibc found real bugs when I first wrote the patch (e.g. glibc bug 7066), and would probably have defended us against this too. Yes, it&#8217;s not utterly ideal, but it&#8217;s a hell of a lot better than what we have now, which is next to nothing.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268829">

			<div class="comment by-nix ">

				<p class="commentcredit">

					<span class="commenter">Nix</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268829">
						February 25, 2016 10:11 AM					</a>

				</p>

				<p>@keiner, that&#8217;s nonsense. glibc has <em>never</em> been about &#8216;kick[ing] out the cheapest, fastest, easiest solution&#8217;. If anything, it&#8217;s historically been about insanely high walls that prevented contribution, and about premature optimization far beyond the bounds of sanity. That, at least, has ended now, which leaves us with the usual free software problem: everyone wants to write code, nobody wants to review it.</p>
<p>If you&#8217;d ever worked on glibc, you would never have claimed that glibc was <em>easy</em> to work on. It&#8217;s a C library, and a notably involuted and arcane one.</p>
<p>@Marc Espie, I don&#8217;t think it&#8217;s know-it-all in this case. I think it&#8217;s more likely to be &#8220;oh crap we have to notify everyone in the world first&#8221;, or possibly a belief that the bug was not exploitable&#8230; or simply &#8220;there are so many bugs left open or wrongly closed from Uli&#8217;s ostrich reign that we are drowning in them&#8221;. Honestly&#8230; this bug was there since <em>2008</em>, and you&#8217;re complaining about a few months&#8217; delay? Ideally it would have been fixed faster, but this was hardly covered up once it was clear how serious it was.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268830">

			<div class="comment by-nix ">

				<p class="commentcredit">

					<span class="commenter">Nix</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268830">
						February 25, 2016 10:16 AM					</a>

				</p>

				<p>@Marc Espie, ah yes, OpenBSD, the project which shipped the client side of a feature with no server side and with serious security holes since, oh, 2008 in OpenSSH (&#8220;UseRoaming&#8221;), switched on by default but left wholly undocumented.</p>
<p>Honestly, though OpenBSD at least has a review policy it is not a flawless angel here either, and the review policy clearly does not prevent all bad decisions and most especially does not cause the decisions to be magically reverted once the code has got in. This is not a fault that only some terrible teams have. It is a general problem with software development (more specifically, with development in languages in which specific classes of security holes, in this case stack overruns, are possible).</p>
<p>(glibc, post-Drepper, has an extremely active development team and a similarly creditable review policy too &#8212; on the rare occasions when people <em>do</em> jam stuff in without it getting reviewed they are invariably castigated for it and don&#8217;t do it again, even when the person doing it was the original author of glibc.)</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268831">

			<div class="comment by-marc-espie ">

				<p class="commentcredit">

					<span class="commenter">Marc Espie</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268831">
						February 25, 2016 10:32 AM					</a>

				</p>

				<p>@Clive Robinson  about the &#8220;sausage management school of work&#8221;.</p>
<p>Over the recent years, I&#8217;ve become convinced of some things we need to do, is to teach youngsters to <em>always</em> code for posterity.</p>
<p>Face it, if you&#8217;re vaguely succesful, your code is going to be reused.  So, when you write that first project, <em>if</em> there are corner cases that would <em>never</em> happen to you <em>MAKE SURE YOU PROTECT AGAINST THEM</em> anyway, because you&#8217;re <em>certain</em> it&#8217;s going to be reused in the wrong context.</p>
<p>To wit:<br />
&#8211; don&#8217;t use malloc in signal handlers. YES, that will work in Linux. But nowhere else.<br />
&#8211; don&#8217;t use wait when waitpid is appropriate. Sooner or later, you&#8217;re going to integrate with code that has other processes running (libraries, etc) and you&#8217;re going to lose.<br />
&#8211; don&#8217;t assume fd 0, 1, 2 are already taken (bug in kdesu helper a long time ago)&#8230;</p>
<p>etc</p>
<p>yes, all of that is Unix specific (that&#8217;s my background, after all), but we really should try to weed out as many bad idioms as we can, and replace them with correct stuff&#8230;</p>
<p>I&#8217;m pretty certain high level languages are not the solution, precisely because their runtime gets too complicated.  Speaking of runtime, ever try to figure out why glib2 was a performance hog under some circumstances ?&#8230; there are so many abstraction layers that it&#8217;s well-nigh impossible.</p>
<p>About the glibc team: I&#8217;m happy to know that the remnants of Drepper&#8217;s reign are slowly fading away.  His text about elf programming was about the opposite of what I&#8217;m advocating here&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268832">

			<div class="comment by-keiner ">

				<p class="commentcredit">

					<span class="commenter">keiner</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268832">
						February 25, 2016 10:34 AM					</a>

				</p>

				<p>@Nix Your argumentation is 100 km away from my arguments.Other try: They were sitting on this bug report for more than 6 months, how does that match to</p>
<p>&#8220;&#8230;and a similarly creditable review policy&#8230;&#8221;</p>
<p>?</p>
<p>Sorry, but this industry is self-regarding beyond all limits&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268833">

			<div class="comment by-nick-p ">

				<p class="commentcredit">

					<span class="commenter">Nick P</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268833">
						February 25, 2016 11:38 AM					</a>

				</p>

				<p>@ keiner</p>
<p>&#8220;20 years software review by the NSA, that&#8217;s hard!&#8221;</p>
<p>I don&#8217;t see NSA in the linked document at all. Besides, they wouldn&#8217;t get a real pentest unless they were certified at EAL5 or higher. Basically nobody does that. So, NSA does limited black-box testing and feature checks based on paperwork (eg user guides) submitted to them. Common Criteria EAL4 and below are a sham.</p>
<p>&#8220;The downside: PC-BSD, the only usable desktop version of BSD&#8221;</p>
<p>I just reinstalled my system. Went with a Linux distro because I expected exactly that.</p>
<p>@ Marc Espie</p>
<p>re OpenBSD</p>
<p>&#8220;OpenBSD of course. The old existing code can be a bit crufty (filesystem layer in the kernel), but we&#8217;ve been cleaning the code for decades, and we do try much harder than the others to not let anything pass (systematic eradication of anything that&#8217;s broken).&#8221;</p>
<p>I&#8217;ve always given you all credit for that. The proactive approach shows much lower defects and better documentation. It&#8217;s still a UNIX with a huge TCB, plenty of covert channels, and underutilizing mitigation technology coming out of CompSci. My old scheme for producing vulnerabilities for it was just to watch the mailing list then weaponize what was posted before a patch went in. That people used it fire-and-forget sometimes neglecting updates meant the attacks should work. I&#8217;ve always been surprised to not see anyone doing that. I wrote it off due to a combo of almost non-existent market share and high effort required to beat its mitigations.</p>
<p>Nonetheless, it&#8217;s the highest quality of the UNIXen. I&#8217;ve always advocated someone put it on top of a secure microkernel in <a href="https://os.inf.tu-dresden.de/papers_ps/nizza.pdf" rel="nofollow ugc">Nizza architecture</a> style to get the best of both worlds. One could escape both monoliths and C by running security-critical components directly on the microkernel in a language (or C subset) amendable to highest analysis or full mitigation. Good middleware can handle the interface security automatically or semi-automatically.</p>
<p>re languages</p>
<p>&#8220;Thinking that if you change language you will get better security is a common fallacy. Get off your soapbox. &#8221;</p>
<p>That&#8217;s not true at all. Both CompSci and industry studies going back to the 60&#8217;s proved you wrong conclusively: choice of language had huge impact on number of defects, ease of integrations, and ease of maintenance. Some studies, esp by defense contractors, looked at various languages in use including Fortran, C, C++, and Ada to determine if it was worth a switch. Ada had less defects&#8230; usually half&#8230; than any other except one outlier where C++ and Ada had the same while doing better than C.</p>
<p>Other examples. Burroughs in 1961 coded the Tron villain, err their MCP OS, in a version of ALGOL which didn&#8217;t have C&#8217;s undefined and unsafe behavior in default use. It kept pointers safe, bounds-checked arrays, protected the stack, and so on. MULTICS used PL/0 because of safer string handling (you&#8217;d know about that) and made it use a stack where incoming data flowed away from stack pointer. Wirth&#8217;s languages, used in OS&#8217;s, had all kinds of checks on data types and interfaces while compiling &amp; executing <em>very</em> fast. Hansen&#8217;s Concurrent Pascal in Solo OS was immune to dataraces and usually deadlocks. Eiffel&#8217;s SCOOP was immune to data races w/ some projects showing deadlock &amp; livelock freedom. Army Secure OS combined tagged CPU, security kernel, and high-assurance runtime for <a href="http://www.adacore.com/uploads_gems/Ada_Safe_and_Secure_Booklet.pdf" rel="nofollow ugc">Ada</a> to let one write rest of apps in Ada without worrying about what&#8217;s underneath. SPIN used Modula-3 for OS-wide safety also with type-safe linking. Most recently, an OS was developed in Haskell: a language whose type system &amp; easy, formal verification can provably eliminate more problems than I can list here.</p>
<p>So, history is definitely not on your side there. There was one system after another that was straight up immune to the problems that plague UNIX&#8217;s and C-based projects. They did that with a combination of better hardware, software design, and/or language choice. The language choice eliminated much low-hanging fruit. Plus, certain choices made further analysis easier rather rather than so hard that people got their Ph.D&#8217;s trying to detect basic problems. 😉</p>
<p>Now, that doesn&#8217;t give reliability or security by itself. Plenty more areas to worry about and mitigations to perform. Just establishes a foundation that makes a secure system easier to build and maintain. Not to mention, one&#8217;s tools make the common things (eg pointers, arrays) should be easy to work with rather than hard.</p>
<p>Note re Gerard&#8217;s claim: I challenge you to skim the chapter titles and methods of that Ada book I linked. Your words indicate you&#8217;ve never really looked at Ada to see just how many issues it eliminates or catches. Remember that it was designed by experts in response to industry&#8217;s, real-world problems to systematically eliminate as many as possible before the program ran. Whether best design or not, it&#8217;s safer than C in so many ways one has to write a whole book to describe them. And that&#8217;s not even the height of what language design can prevent which is happening in functional programming, including functional systems languages.</p>
<p>@ Anon</p>
<p>&#8220;I&#8217;d prefer to see an attempt made to re-write core software from scratch, knowing what we do today. If it breaks compatibility with some things, tough.&#8221;</p>
<p>I semi-agree. I listed many architectures better than UNIX <a href="https://news.ycombinator.com/item?id=10957020" rel="nofollow ugc">here</a>. Knowing C&#8217;s <a href="http://pastebin.com/UAQaWuWG" rel="nofollow ugc">history</a>, there&#8217;s also good reason to ditch it for one of the old (Modula-2/3, Ada, PreScheme) or new (Rust, SPARK, ATS) languages for systems programming. Hell, there&#8217;s been <a href="https://www.cs.cornell.edu/talc/" rel="nofollow ugc">typed</a> <a href="http://research.microsoft.com/en-us/um/people/nick/coqasm.pdf" rel="nofollow ugc">assembler</a> languages that are both faster and potentially safer. Crazy, eh?</p>
<p>That said, what we have in our UNIX OS&#8217;s and libraries are decades of accumulated wisdom. They ran into all kinds of problems in hardware, software, networking, etc. The solutions to those problems might get little to no documentation. Yet, their fixes are in the code. Clean-slating the code, like MirageOS for instance, gives the benefit of new tooling but drops much of that prior wisdom. Teams could spend a long time re-inventing that stuff. Hence, the other strategy of trying to evolve and polish the existing stuff.</p>
<p>Strategies for doing that include safe C&#8217;s, virtualizing them, obfuscating them, hardware reliability/security tricks, and so on. They work to a variety of degrees. They just haven&#8217;t been applied to a whole kernel and toolchain yet. Might get us further than doing everything from scratch. That&#8217;s why projects like Cyclone, SVA-OS, Nizza, Softbound + CETS, etc are invaluable in letting us gradually improve what we have in case other stuff doesn&#8217;t get written.</p>
<p>@ Clive Robinson</p>
<p>&#8220;What you don&#8217;t see mentioned very often is attacks going up the computing stack. The most known about such attacks are via the DMA controler used in high speed IO (FireWire etc).&#8221;</p>
<p>That&#8217;s on purpose. There&#8217;s a whole literature of techniques dealing with that side of things. Essentially, the strategy is to force all that into either a known safe or known failed state by the time it hits memory. Also, restrict what memory it reads or writes while applying tags if applicable. Then, the valid data or failures are dealt with at a higher level of abstraction that&#8217;s safe in how <em>it</em> operates.</p>
<p>&#8220;Thus an attack from below will alow &#8220;input checking&#8221; to be bypassed etc and most of those &#8220;safe language&#8221; features as well.&#8221;</p>
<p>What you&#8217;re describing is not a failure of safe languages but a failure or consequence of existing approaches to develop hardware. There are examples of hardware that do <em>not</em> have these problems because they were specifically designed to avoid problems. Further, a RAM expert told me problems like Rowhammer weren&#8217;t unavoidable so much as industry cutting corners on QA for a <em>long</em> time. So, the solution here is to use the same mindset when developing hardware: languages that make safe expression &amp; analysis easier; correct by construction transformation/optimization tools; formal &amp; test-based equivalence checking; gate-level testing; physical testing of various modules to ensure DSM or manufacturing problems don&#8217;t change logic; rad- or fault-tolerant logic for key modules with TMR internally (aka AAMP7G) or externally (aka NonStop).</p>
<p>Systems have been built with first pass, inherent safety/security, and at comfortable abstraction for developers. Two I like to cite are Sandia&#8217;s SSP/Score processor for embedded Java and Rockwell-Collins&#8217; AAMP7G for stack machines. They were exhaustively analyzed to find logic, environmental, etc faults plus at least one done on rad-hard process. Result is no failures in field on the record so far while all coding can be done at a higher, safer level. So, the model is to combine secure methods for developing hardware with safe/secure languages or abstractions for software to get an integrated hardware/software system that&#8217;s immune to most problems of both.</p>
<p>And then install backup, recovery, and monitoring mechanisms to handle the inevitable failures called known unknowns and unknown unknowns. And then add those into the requirements of the next release. 😉</p>
<p>@ Nix</p>
<p>&#8221; even if it did significant parts of it are assembler and it does all sorts of deeply evil things, particularly in early startup (and we have to be aware of that even when ld.so is not being considered, because the static library does many of the things ld.so does at startup using un-rebuilt objects from the core libc &#8212; things like memcpy() which you really do want to keep an eye on in the general case).&#8221;</p>
<p>I&#8217;ve read about that <a href="https://queue.acm.org/detail.cfm?id=2349257" rel="nofollow ugc">mindset</a> and resulting problems before. The solution is to begin fixing that so it&#8217;s at least possible to analyze or transform it. Just piece-by-piece improve it so the cruft and horrors will eventually be gone. The result is something all these wonders from CompSci and industry can work with. Then there&#8217;s efforts like musl replacing it entirely. Interesting <a href="http://www.etalabs.net/compare_libcs.html" rel="nofollow ugc">results</a> there. Might be able to work on those if not glibc. 🙂</p>
<p>Note: Your name also reminds me of a distro that&#8217;s finally fixing huge, unnecessary issues in both package management and filesystem organization. Amazing things happen when people see one of the root problems then solve it.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268834">

			<div class="comment by-nick-p ">

				<p class="commentcredit">

					<span class="commenter">Nick P</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268834">
						February 25, 2016 11:47 AM					</a>

				</p>

				<p>@ Marc Espie</p>
<p>On second though, while we have an OpenBSD dev here, let&#8217;s try to learn something from him too. 🙂 Just saw you dropping little warnings in your comment to Clive. A prior interview also called for more people doing contributions to OpenBSD but acknowledged the difficulty of kernel coding. Plus, I&#8217;ve been away from C coding for a while and could use some up-to-date recommendations in case I get back in it.</p>
<p>So, let&#8217;s say there&#8217;s some people doing C programming &amp; playing with OS code that want to contribute to some projects. I&#8217;ve run into some here and there, esp on Linux side. I&#8217;d like to steer them in a direction where they can contribute to something like OpenBSD. Let them experience a bit of high quality coding and work toward slowly earning the privilege of being elite C coders/reviewers. There&#8217;s the motivation, anyway. 🙂 What would be your minimum set of recommended books or articles that would explain safe/secure C coding, UNIX pitfalls to avoid, and how OpenBSD team wants code submissions to look? If you have something, I&#8217;ll give it to anyone thinking of contributing to kernels with a nudge in OpenBSD&#8217;s direction.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268835">

			<div class="comment by-marc-espie ">

				<p class="commentcredit">

					<span class="commenter">Marc Espie</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268835">
						February 25, 2016 1:43 PM					</a>

				</p>

				<p>if you want to contribute to OpenBSD, that&#8217;s actually easy. Learn C, read Stevens&#8217;s advanced Unix Programming, and use OpenBSD. Peruse its manpages (best in the world!) Hang out on the mailing lists.  Pretty soon, you&#8217;ll find something that doesn&#8217;t quite work like you think it should, and you should try to fix it.</p>
<p>That&#8217;s how you become a developer. You send patches, using diff -u. People poke holes in your patches. They get better. If you have something to contribute, as in actual bug fixes or wanted new functionality, they will work with you.  Not a lot. They will just tell you what you do wrong, and point you in the right direction (by giving you examples of good code, and occasionnally, by insulting your poor coding practice).</p>
<p>Thick hide. No misplaced pride. That&#8217;s what you need mostly.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268836">

			<div class="comment by-keiner ">

				<p class="commentcredit">

					<span class="commenter">keiner</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268836">
						February 25, 2016 2:04 PM					</a>

				</p>

				<p>Vulnerabilites:</p>
<p>I use Adobe Acrobat X Pro for printing selected emails (Thunderbird on Win 7 pro) and whenever I print my Amazon order confirmation emails with subjects something like</p>
<p>Your order of &#8220;A wider shade of grey&#8221;</p>
<p>I get error messages that the printer driver tried to execute everything after the leading quote &#8221; as a program in the directory of the Adobe Acrobat.</p>
<p>Isn&#8217;t that a security hole, as the subject line of the email can trigger execution of arbitrary programs?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268837">

			<div class="comment by-ianf ">

				<p class="commentcredit">

					<span class="commenter">ianf</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268837">
						February 25, 2016 4:39 PM					</a>

				</p>

				<p>@ keiner […] “<cite>Isn&#8217;t that a security hole, as the subject line of the email can trigger execution of arbitrary programs?</cite><cite>”</p>
<p>No, that&#8217;s (a) a feature of Acrobat X; and (b) the consequence of using shoddy Adobe software by choice.</cite></p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268838">

			<div class="comment by-nick-p ">

				<p class="commentcredit">

					<span class="commenter">Nick P</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268838">
						February 25, 2016 5:26 PM					</a>

				</p>

				<p>@ Marc</p>
<p>Makes sense. Thanks for the tip on that book. I didn&#8217;t have that one.</p>
<p>@ All</p>
<p>Here&#8217;s a link to the book he referenced: <a href="http://poincare.matf.bg.ac.rs/~ivana//courses/ps/sistemi_knjige/pomocno/apue.pdf" rel="nofollow ugc">Advanced UNIX Programming by Stevens</a>.</p>
<p>@ keiner</p>
<p>&#8220;Isn&#8217;t that a security hole, as the subject line of the email can trigger execution of arbitrary programs? &#8221;</p>
<p>Not only a security hole but a perfect example of why Gerard and I push languages that prevent that by design. 🙂</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268839">

			<div class="comment by-dirk-praet ">

				<p class="commentcredit">

					<span class="commenter">Dirk Praet</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268839">
						February 25, 2016 7:25 PM					</a>

				</p>

				<p>@ keiner</p>
<p><i>That is absolutely unacceptable as an attitude against the users of software,</i></p>
<p>Reality check: there simply is no such thing as a free ride. The majority of FOSS developers are not heavily paid job hoppers jumping from one gig to the next, but unpaid hobbyists and volunteers either struggling to make a living off grants or doing their FOSS coding in their spare time. You can&#8217;t possibly expect them to give away stuff for free and also pick up the bill if it blows up in your face. Which goes for both freeloading private individuals and commercial entities.</p>
<p>If everyone using OpenSSL decided to donate even 1 measly dollar, they could probably bring in (and pay) an entire team to re-write the bloody thing from scratch and have it thoroughly audited.</p>
<p><i>Isn&#8217;t that a security hole, as the subject line of the email can trigger execution of arbitrary programs?</i></p>
<p>Yes it is. Adobe is not exactly known to write secure code, neither in its free or paying software. Acrobat and Flash were removed from all of my devices a long time ago. I have one copy of each left on one heavily secured VM on a seperate segment completely shielded off the rest of my home network.</p>
<p>@ Nick P, @ Marc Espie, @ Gerard Van Vooren</p>
<p>First of all: thanks for joining the discussion, Marc. It&#8217;s quite a treat to have you here.</p>
<p>I tend to agree with @ Nick P and @Gerard Van Vooren. Over time, I have mostly given up on C, which I have come to consider more as a passion and a religion than the best or most efficient way to get the job done, especially for greenhorns. It&#8217;s like a dark art that takes years to master, especially if you want to write secure code too. @Clive and @Marc do however have a point that high level languages may be more vulnerable to &#8220;attacks from below&#8221; and that you have little control over their runtime environments.</p>
<p>That said, the matter of the fact remains that C is at the core of pretty much all unices and therefor simply cannot be discarded until the next <em>really</em> disruptive technology comes along that not only is C-free, but also secure and has enough impact to persuade our internet overlords to get rid of legacy OS&#8217;es, software and infrastructure.</p>
<p>@ Nick P</p>
<p><i>Here&#8217;s a link to the book he referenced: Advanced UNIX Programming by Stevens</i></p>
<p>What do you mean you didn&#8217;t have that one? Even I&#8217;ve got a copy of it 😎</p>
<p><i>That&#8217;s why projects like Cyclone, SVA-OS, Nizza, Softbound + CETS, etc are invaluable in letting us gradually improve what we have in case other stuff doesn&#8217;t get written.</i></p>
<p>I second that emotion. As usual, wide adoption remains a problem as most devs keep focusing on getting stuff to work instead of getting it to run securely. Budgets, deadlines, cost-cutting, you know.</p>
<p>@ Clive</p>
<p><i>All of which is not to say I&#8217;m against &#8220;safe languages&#8221; it&#8217;s the &#8220;not using them properly&#8221; which applies to all languages safe or otherwise that I&#8217;m against.</i></p>
<p>I guess that sums it up pretty well. The learning curve for low level languages of course does tend to be a wee bit steeper than that for high level ones. Try explaining the concept and usage of pointers in C to someone who has learned .NET or Java in school. Last time I tried they looked at me as if I were from Mars.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268840">

			<div class="comment by-keiner ">

				<p class="commentcredit">

					<span class="commenter">keiner</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268840">
						February 26, 2016 1:34 AM					</a>

				</p>

				<p>But (to earn some money) I have to use .pdfs a lot and manipulate them (including encryption with passwords etc.). What is a SECURE software tool for these .pdf operations?</p>
<p>I removed Flash some years ago, but without Acrobat I can&#8217;t get my daily work done&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268841">

			<div class="comment by-marc-espie ">

				<p class="commentcredit">

					<span class="commenter">Marc Espie</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268841">
						February 26, 2016 6:17 PM					</a>

				</p>

				<p>the best pdf parser I&#8217;ve seen so that is mupdf and its associated tool suite.</p>
<p>It is unfortunately not complete (wrt form handling, for instance), but it&#8217;s one of those few open source pdf package that&#8217;s not just yet another fork of xpdf.</p>
<p>The code is actually readable, which is another plus.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268842">

			<div class="comment by-nix ">

				<p class="commentcredit">

					<span class="commenter">Nix</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268842">
						February 27, 2016 6:24 AM					</a>

				</p>

				<p>@keiner, a &#8216;similarly creditable review policy&#8217; relates to whether a patch gets reviewed by someone else with experience of that bit of the system before it gets in. It has no relevance whatever to management of incoming bug reports, and most especially not to any part of security response other than writing patches to fix the bug. I can&#8217;t imagine what you&#8217;re driving at, or how you can imagine that strong code review has any relevance to speed of fixing security holes (other than perhaps to slow it down as the fixes are reviewed).</p>
<p>It&#8217;s also not &#8216;self-regarding&#8217; to say that glibc has more or less the same review policy as OpenBSD now (everything has to be reviewed before it gets in, no exceptions). It&#8217;s simply a statement of fact. Of course, more of OpenBSD&#8217;s codebase has been reviewed that way, since their policy has been in place for a great deal longer, but that doesn&#8217;t necessarily fix everything, as the UseRoaming flaw demonstrates.</p>
<p>@Nick P, given that much of the really complex and involuted stuff in glibc was written by two people (Roland McGrath and Ulrich Drepper) in a distinctly cathedralic style, and that both are among the smartest software developers you&#8217;ll find anywhere (though Uli was not a good <em>maintainer</em> for other reasons), I don&#8217;t see how you could possibly describe glibc as &#8220;a pile of old festering hacks, endlessly copied and pasted by a clueless generation of IT &#8220;professionals&#8221; who wouldn&#8217;t recognize sound IT architecture if you hit them over the head with it&#8221;, as PH-K hilariously describes various things in the build-system stack. (Which do have rationales which were good in the early 1990s, when their sole competitor was the pile of cruft which was imake).</p>
<p>glibc certainly has old festering hacks, like any large software system, but they are being identified and removed as they cause trouble, insofar as glibc&#8217;s extremely severe ABI-compatibility requirements permit (which is, of course, a problem the BSDs don&#8217;t have because they don&#8217;t care about ABI compatibility: libc changed, oh just recompile everything!)</p>
<p>TBH, I find it hard to believe that PH-K doesn&#8217;t know that the entirety of the GNU build system, Automake, Autoconf, GNU make, you name it, was written by gnarled old hackers more or less like, uh, him, and most definitely in the same generation.</p>
<p>(btw, my nom de net has nothing to do with the Nix distro, though I think it&#8217;s excellent. It predates the Nix distro by about twenty years and I see no reason why I should change it because some upstart has reused it for their project 😛 )</p>
<p>@Marc Espie:</p>
<blockquote><p>
Thick hide. No misplaced pride. That&#8217;s what you need mostly.
</p></blockquote>
<p>YES, this indeed. Even <em>non</em>-misplaced pride is problematic: Uli had a lot of that, justifiably (his work on NPTL alone justified it), but it made glibc a horror to work on for more than a decade.</p>
<p>Your praise of mupdf is justified too. 🙂</p>
<p>@Dirk Praet:</p>
<blockquote><p>The majority of FOSS developers are not heavily paid job hoppers jumping from one gig to the next, but unpaid hobbyists and volunteers either struggling to make a living off grants or doing their FOSS coding in their spare time.</p></blockquote>
<p>This hasn&#8217;t been true for many years. The traffic on free software mailing lists now peaks during the working week, and on the order of 80% of contributions to the core toolchainey projects, the kernel, etc now come from people who are paid to do so. There are a lot of crucial projects (like ntpd, openssh etc) where this isn&#8217;t true, but most<i>developers</i> who want a job doing free software development can get one, and the most active projects are almost without exception most active because of paid contributions.</p>
<p>Heck, even <i>I</i> got a job in this area in the end, and I have an interview phobia and intense dislike of job-switching. If I managed it, everyone who wants to can.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268843">

			<div class="comment by-taken ">

				<p class="commentcredit">

					<span class="commenter">Taken</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268843">
						February 27, 2016 10:15 AM					</a>

				</p>

				<p>From googlesecurityblog:</p>
<p>glibc reserves 2048 bytes in the stack through alloca()[&#8230;].<br />
Later on, if the response is larger than 2048 bytes, a new buffer is allocated from the heap and all the information (buffer pointer, new buffer size and response size) is updated.  Under certain conditions a mismatch between the stack buffer and the new heap allocation will happen. The final effect is that the stack buffer will be used to store the DNS response.</p>
<p>Would it be fair to arguee that this process has too much complexity, and that a simpler process (with a single buffer, always on the heap) would have been safer?</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268844">

			<div class="comment by-dirk-praet ">

				<p class="commentcredit">

					<span class="commenter">Dirk Praet</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268844">
						February 27, 2016 11:57 AM					</a>

				</p>

				<p>@ Nix</p>
<p><i>This hasn&#8217;t been true for many years. The traffic on free software mailing lists now peaks during the working week, and on the order of 80% of contributions to the core toolchainey projects, the kernel, etc now come from people who are paid to do so.</i></p>
<p>I&#8217;ve been doing some digging and it would indeed appear that you&#8217;re right. Thanks for pointing this out to me. I guess I have been overly generalising the situation of folks like Werner Koch, Harlan Stenn and the like. That said, there still is no such thing as a free ride. One can only hope FOSS communities and developers adopt software cycle, version and release management best practices and pay sufficient attention to code review and independent audits. But which goes for commercial software just as well.</p>
<p>I do get people being upset about the sometimes questionable quality and maintenance of ubiquitous stuff like OpenSSL, but wining about it is not helping. Getting involved or making donations is.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268845">

			<div class="comment by-gerard-van-vooren ">

				<p class="commentcredit">

					<span class="commenter">Gerard van Vooren</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268845">
						February 27, 2016 1:04 PM					</a>

				</p>

				<p>@ Nix,</p>
<blockquote><p>glibc certainly has old festering hacks, like any large software system, but they are being identified and removed as they cause trouble, insofar as glibc&#8217;s extremely severe ABI-compatibility requirements permit (which is, of course, a problem the BSDs don&#8217;t have because they don&#8217;t care about ABI compatibility: libc changed, oh just recompile everything!)</p></blockquote>
<p>Being backwards compatible certainly has its benefits but the costs are that the maintainability and review-ability are close to impossible. When it comes to security simplicity is always the best answer. I agree with Dirk that some schedules would be really beneficiary but refracturing and heck using a safe language (think Ada or Modula) is very desirable. This approach is of course very anti the current anarchy but we don&#8217;t live in the nineties anymore. The codebases need to shrink, not expand any further. I believe that cooperating is the real answer, it&#8217;s not gonna happen of course but it is. There are too many flavors of Linux, too many distractions. When the organizations behind the major Linux systems can cooperate and manage to set some goals the world would be a better place.</p>
<blockquote><p>TBH, I find it hard to believe that PH-K doesn&#8217;t know that the entirety of the GNU build system, Automake, Autoconf, GNU make, you name it, was written by gnarled old hackers more or less like, uh, him, and most definitely in the same generation.</p></blockquote>
<p>The GNU Autocrap tools are indeed crap. That&#8217;s all there is to say about it and the likes of cmake only makes it worse. I really like the simple Makefiles of BSD systems. There is nothing hidden and there is no fancy stuff in it, only a couple of LOC.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268846">

			<div class="comment by-nick-p ">

				<p class="commentcredit">

					<span class="commenter">Nick P</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268846">
						February 27, 2016 10:42 PM					</a>

				</p>

				<p>@ Dirk Praet</p>
<p>Don&#8217;t let Nix&#8217;s statement mislead you. Most OSS projects are people scratching an itch. Many important, widely-used projects barely have any developers. Some get corporate contributions. Some with corporations largely behind them almost totally get corporate contributions. A handful have successful foundations raising real money to work on them.</p>
<p>Most are barely getting by with one or a small number of volunteers keeping them alive, though. Many still get shutdown due to the burden of this. Werner Koch etc are representative of the wide use but little support problem before the donation. Here&#8217;s a great <a href="https://medium.com/@nayafia/how-i-stumbled-upon-the-internet-s-biggest-blind-spot-b9aa23618c58" rel="nofollow ugc">article</a> by Nadia Eghbal that showed critical categories like infrastructure and many important projects get almost no money. The developers themselves are quoted. Another <a href="http://betanews.com/2015/04/20/why-the-open-source-software-model-is-fundamentally-broken/" rel="nofollow ugc">shows</a> resistance volunteers encounter with some not-so-great numbers.</p>
<p>So, open source is all over the place plus simultaneously being shown to be a terrible business model or even way to keep things alive. The ones doing the best are the hybrids that make the money &amp; get developers with proprietary stuff while pushing/using a key OSS technology. That&#8217;s the model I push since it&#8217;s most proven.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268847">

			<div class="comment by-foo ">

				<p class="commentcredit">

					<span class="commenter">foo</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268847">
						February 28, 2016 6:16 PM					</a>

				</p>

				<p>Oh man, &#8220;giblc&#8221; ? That does not build confidence in the author of the post&#8230;</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268848">

			<div class="comment by-nix ">

				<p class="commentcredit">

					<span class="commenter">Nix</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268848">
						February 29, 2016 7:09 AM					</a>

				</p>

				<p>@Taken: Yeah, a lot of alloca() premature optimizations have been turned into malloc()s of late, for exactly the reason you suggest. (In some places, malloc() is actually impossible &#8212; among other things, functions that must be async-signal-safe cannot call malloc(), but can call alloca(), and in general even if a function is <em>not</em> guaranteed to be async-signal-safe, but people often act as if it is and if it otherwise would be but for a call to malloc() that might easily be translated into an alloca(), that translation will often be done. But nobody expects hostname lookup to be async-signal-safe!)</p>
<p>@Dirk Praet, oh yes, you are entirely right. A whole lot of critical projects do have only a few largely-spare-time maintainers &#8212; but thanks to CodeSourcery backk in the day, and later Red Hat and others, this hasn&#8217;t been true of the core toolchain (nor of glibc) for a long, long time. Heck, glibc originated in a paid-for project (Roland McGrath was paid by the FSF to write the first version).</p>
<p>@Gerard van Vooren, simplicity is indeed the best option where security is concerned, but if we broke glibc&#8217;s ABI at this stage (requiring <em>every single Linux program</em> to be relinked <em>simultaneously</em>), nobody would ever use the resulting library. Compatibility is not an optional addon for software like this: it is its single most important feature.</p>
<p>Equally, well, if you&#8217;d looked at glibc&#8217;s build system you wouldn&#8217;t be complaining about Autoconf! glibc&#8217;s configury is really very simple and is aggressively pruned of no-longer-needed checks: it really is just checking for toolchain features that compilers/assemblers/linkers within the supported version range may not always support on all platforms glibc works on. The difficult part of the glibc build system is the very makefiles you are praising here. Roland also wrote GNU Make, you see, and was the maintainer of both GNU Make and glibc for a very long time. For all that time, if he needed a new feature in Make to make glibc&#8217;s makefiles smarter, he added it. So the glibc makefiles use more or less every GNU Make feature you can possibly imagine, and are ferociously complex, without the least doubt the most intricate makefiles I have ever seen. (They are comprehensible, and undoubtedly elegant, with things like dynamic overriding of platform-independent code with platform-dependent replacements without any changes needed to the makefiles at all &#8212; but they arenot in any sense simple.)</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268849">

			<div class="comment by-gerard-van-vooren ">

				<p class="commentcredit">

					<span class="commenter">Gerard van Vooren</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268849">
						February 29, 2016 2:52 PM					</a>

				</p>

				<p>@ Nix,</p>
<blockquote><p>simplicity is indeed the best option where security is concerned, but if we broke glibc&#8217;s ABI at this stage (requiring *every single Linux program* to be relinked *simultaneously*), nobody would ever use the resulting library. Compatibility is not an optional addon for software like this: it is its single most important feature.</p></blockquote>
<p>It needs to be done. There is no other way to do this, at least not a way that I am aware of. How to do this? Just create a new version! (and keep updating todays version as well of course)</p>
<blockquote><p>Equally, well, if you&#8217;d looked at glibc&#8217;s build system you wouldn&#8217;t be complaining about Autoconf!</p></blockquote>
<p>I am not talking about glibc but everything else in GNU user land.</p>
<blockquote><p>The difficult part of the glibc build system is the very makefiles you are praising here. Roland also wrote GNU Make, you see, and was the maintainer of both GNU Make and glibc for a very long time. For all that time, if he needed a new feature in Make to make glibc&#8217;s makefiles smarter, he added it. So the glibc makefiles use more or less every GNU Make feature you can possibly imagine, and are ferociously complex, without the least doubt the most intricate makefiles I have ever seen.</p></blockquote>
<p>Ask yourself why gmake and the Autocrap tools are there in the first place (really do this). I can give you a hint: think about complexity itself. Once this problem is finally recognized, the answer is quite simple. I will give you another hint about that: BSD Makefiles.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment even thread-even depth-1" id="comment-268850">

			<div class="comment by-nix ">

				<p class="commentcredit">

					<span class="commenter">Nix</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268850">
						March 2, 2016 3:58 PM					</a>

				</p>

				<p>@Gerard, unfortunately &#8216;just create a new version&#8217; will not suffice for glibc, because it maintains shared data structures (such as the heap) which must be consistent and maintained by the same code across <em>all shared libraries loaded</em>. That more or less means that you cannot just bump the soname: you need to simultaneously rebuild every shared library that will ever be simultaneously loaded into the same address space at once. That&#8217;s a flag day, and for Linux at least that&#8217;s not going to happen without a very, very good reason. (It seems unlikely that any reason would ever be considered good enough. The theoretical possibility of improved security is not such a reason. If you want that, use a completely different library, like musl.)</p>
<p>BSD Makefiles&#8230; well, suffice to say that you have not convinced me that they are in any sense preferable to what we already have. Argument by assertion is unconvincing.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

		<article class="comment odd alt thread-odd thread-alt depth-1" id="comment-268851">

			<div class="comment by-gerard-van-vooren ">

				<p class="commentcredit">

					<span class="commenter">Gerard van Vooren</span> •

					<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/#comment-268851">
						March 2, 2016 4:36 PM					</a>

				</p>

				<p>@ Nix,</p>
<blockquote><p>unfortunately &#8216;just create a new version&#8217; will not suffice for glibc&#8230;</p></blockquote>
<p>It would for platforms such as Debian where you get a new release each two years or so with different stages that shift (unstable -&gt; testing -&gt; stable).</p>
<blockquote><p>BSD Makefiles&#8230; well, suffice to say that you have not convinced me that they are in any sense preferable to what we already have. Argument by assertion is unconvincing.</p></blockquote>
<p>The problem is complexity, mostly introduced by mixing different platform specific code inside header and source code files. Think how OpenBSD solves this with their LibreSSL and OpenSSH products. They have one native branch (for the GNU platform that would be GNU) and then for each other platform they have specific wrappers. Then you have all that complexity out of the source code and for the build system it&#8217;s only picking the files that belong to the platforms. This is pretty easy with Makefiles.</p>

				
			</div>

		</article>

		</li><!-- #comment-## -->

	<p class="subscribe-comments">
		<a href="https://www.schneier.com/blog/archives/2016/02/security_vulner_5.html/feed/">
			<img alt="Atom Feed" src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/rss.png">
			Subscribe to comments on this entry		</a>
	</p>

		<div id="respond" class="comment-respond">
		<h2 class="comments-open-header">Leave a comment <small><a rel="nofollow" id="cancel-comment-reply-link" href="/blog/archives/2016/02/security_vulner_5.html#respond" style="display:none;">Cancel reply</a></small></h2><form action="https://www.schneier.com/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate><a href="https://www.schneier.com/wp-login.php?redirect_to=https%3A%2F%2Fwww.schneier.com%2Fblog%2Farchives%2F2016%2F02%2Fsecurity_vulner_5.html" title="Login">Login</a><p class="comment-form-author"><label for="author">Name</label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" /></p>
<p class="comment-form-email"><label for="email">Email</label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" /></p>
<p class="comment-form-url"><label for="url">URL:</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" /></p>
<p class="comment-form-cookies-consent"><input id="wp-comment-cookies-consent" name="wp-comment-cookies-consent" type="checkbox" value="yes" /> <label for="wp-comment-cookies-consent">Remember personal info?</label></p>

<p class="comment-form-author">

	<label for="comm_capt_challenge">
		Fill in the blank: the name of this blog is Schneier on ___________ (required):	</label>

	<input id="comm_capt_challenge" name="comm_capt_challenge" size="30" type="text" />
</p>

<div class="comment-form-comment">

	<label for="comment">Comments:</label>

	<textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" required="required"></textarea>

	<div id="preview-box" class="preview-box hide"></div>
	<img class="comment-loading hide" src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/loader.gif" />

</div>

<p id="allowed">

	<strong>Allowed HTML</strong>
	&lt;a href=&quot;URL&quot;&gt; &bull; &lt;em&gt; &lt;cite&gt; &lt;i&gt; &bull; &lt;strong&gt; &lt;b&gt; &bull; &lt;sub&gt; &lt;sup&gt; &bull; &lt;ul&gt; &lt;ol&gt; &lt;li&gt; &bull; &lt;blockquote&gt; &lt;pre&gt;
	<strong>Markdown Extra</strong> syntax via <a href="https://michelf.ca/projects/php-markdown/extra/">https://michelf.ca/projects/php-markdown/extra/</a>
</p>

<input type="hidden" id="wp_comment_nonce" name="wp_comment_nonce" value="4b1534b792" /><input type="hidden" name="_wp_http_referer" value="/blog/archives/2016/02/security_vulner_5.html" />
<input type="button" id="comment-preview" class="comment-preview comment-actions" value="Preview" />
<input type="button" id="comment-write" class="comment-write comment-actions hide" value="Edit" />

<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Submit" /> <input type='hidden' name='comment_post_ID' value='7872' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p></form>	</div><!-- #respond -->
	
	<div class="stepthrough">
		<a href="https://www.schneier.com/blog/archives/2016/02/decrypting_an_i.html" rel="prev">← Decrypting an iPhone for the FBI</a>		<a href="https://www.schneier.com/blog/archives/2016/02/practical_tempe.html" rel="next">Practical TEMPEST Attack →</a>	</div>

	
<p id="powered">Sidebar photo of Bruce Schneier by Joe MacInnis.</p>
		</div>

		
<aside>
	<div class="sidebar" id="sidebar-two">
		<section><div class="sidesection widget widget_schneier_about" id="schneier_about-2"><h3>About Bruce Schneier</h3><img src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2019/10/Bruce-Schneier.jpg" /><p><p class="small">I am a <a href="https://public-interest-tech.com/">public-interest technologist</a>, working at the intersection of security, technology, and people. I've been writing about security issues on my <a href="/">blog</a> since 2004, and in my monthly <a href="/crypto-gram/">newsletter</a> since 1998. I'm a fellow and lecturer at Harvard's <a href="https://www.hks.harvard.edu/faculty/bruce-schneier">Kennedy School</a>, a board member of <a href="https://www.eff.org/">EFF</a>, and the Chief of Security Architecture at <a href="https://inrupt.com/">Inrupt, Inc.</a> This personal website expresses the opinions of none of those organizations.</p>
</p></div></section><section><div class="sidesection widget widget_schneier_related_posts" id="schneier_related_posts-2"><h3>Related Entries</h3>
<ul>

	<li><a href="https://www.schneier.com/blog/archives/2021/03/illegal-content-and-the-blockchain.html">Illegal Content and the Blockchain</a></li><li><a href="https://www.schneier.com/blog/archives/2021/03/national-security-risks-of-late-stage-capitalism.html">National Security Risks of Late-Stage Capitalism</a></li><li><a href="https://www.schneier.com/blog/archives/2021/02/weis-2021-call-for-papers.html">WEIS 2021 Call for Papers</a></li><li><a href="https://www.schneier.com/blog/archives/2021/02/ransomware-profitability.html">Ransomware Profitability</a></li><li><a href="https://www.schneier.com/blog/archives/2021/02/presidential-cybersecurity-and-pelotons.html">Presidential Cybersecurity and Pelotons</a></li><li><a href="https://www.schneier.com/blog/archives/2021/01/police-have-disrupted-the-emotet-botnet.html">Police Have Disrupted the Emotet Botnet</a></li>
</ul>
</div></section><section><div class="sidesection widget widget_schneier_featured_essays" id="schneier_featured_essays-2"><h3>Featured Essays</h3>
	<ul>
		<li><a href="https://www.schneier.com/essays/archives/2016/04/the_value_of_encrypt.html">The Value of Encryption</a></li><li><a href="https://www.schneier.com/essays/archives/2016/03/data_is_a_toxic_asse.html">Data Is a Toxic Asset, So Why Not Throw It Out?</a></li><li><a href="https://www.schneier.com/essays/archives/2014/01/how_the_nsa_threaten.html">How the NSA Threatens National Security</a></li><li><a href="https://www.schneier.com/essays/archives/2009/01/terrorists_may_use_g.html">Terrorists May Use Google Earth, But Fear Is No Reason to Ban It</a></li><li><a href="https://www.schneier.com/essays/archives/2007/01/in_praise_of_securit.html">In Praise of Security Theater</a></li><li><a href="https://www.schneier.com/essays/archives/2006/08/refuse_to_be_terrori.html">Refuse to be Terrorized</a></li><li><a href="https://www.schneier.com/essays/archives/2006/05/the_eternal_value_of.html">The Eternal Value of Privacy</a></li><li><a href="https://www.schneier.com/essays/archives/2005/09/terrorists_dont_do_m.html">Terrorists Don&#039;t Do Movie Plots</a></li>	</ul>

	<p><a href="https://www.schneier.com/essays/">More Essays</a></p></div></section><section><div class="sidesection widget widget_schneier_archives" id="schneier_archives-2"><h3>Blog Archives</h3>
<ul>

	<li><a href="https://www.schneier.com/blog/calendar.html/">Archive by Month</a></li><li><a href="https://www.schneier.com/blog/newcomments.html/">100 Latest Comments</a></li></ul>

<h4>Blog Tags</h4><ul class="top-tags"><li><a href="https://www.schneier.com/tag/3d-printers/">3d printers</a></li><li><a href="https://www.schneier.com/tag/9-11/">9/11</a></li><li><a href="https://www.schneier.com/tag/aaron-swartz/">Aaron Swartz</a></li><li><a href="https://www.schneier.com/tag/academic/">academic</a></li><li><a href="https://www.schneier.com/tag/academic-papers/">academic papers</a></li><li><a href="https://www.schneier.com/tag/accountability/">accountability</a></li><li><a href="https://www.schneier.com/tag/aclu/">ACLU</a></li><li><a href="https://www.schneier.com/tag/activism/">activism</a></li><li><a href="https://www.schneier.com/tag/adobe/">Adobe</a></li><li><a href="https://www.schneier.com/tag/advanced-persistent-threats/">advanced persistent threats</a></li><li><a href="https://www.schneier.com/tag/adware/">adware</a></li><li><a href="https://www.schneier.com/tag/aes/">AES</a></li><li><a href="https://www.schneier.com/tag/afghanistan/">Afghanistan</a></li><li><a href="https://www.schneier.com/tag/air-marshals/">air marshals</a></li><li><a href="https://www.schneier.com/tag/air-travel/">air travel</a></li><li><a href="https://www.schneier.com/tag/airgaps/">airgaps</a></li><li><a href="https://www.schneier.com/tag/al-qaeda/">al Qaeda</a></li><li><a href="https://www.schneier.com/tag/alarms/">alarms</a></li><li><a href="https://www.schneier.com/tag/algorithms/">algorithms</a></li><li><a href="https://www.schneier.com/tag/alibis/">alibis</a></li><li><a href="https://www.schneier.com/tag/amazon/">Amazon</a></li><li><a href="https://www.schneier.com/tag/android/">Android</a></li><li><a href="https://www.schneier.com/tag/anonymity/">anonymity</a></li><li><a href="https://www.schneier.com/tag/anonymous/">Anonymous</a></li><li><a href="https://www.schneier.com/tag/antivirus/">antivirus</a></li><li><a href="https://www.schneier.com/tag/apache/">Apache</a></li><li><a href="https://www.schneier.com/tag/apple/">Apple</a></li><li><a href="https://www.schneier.com/tag/applied-cryptography/">Applied Cryptography</a></li><li><a href="https://www.schneier.com/tag/artificial-intelligence/">artificial intelligence</a></li><li><a href="https://www.schneier.com/tag/assassinations/">assassinations</a></li></ul><p><a href="https://www.schneier.com/blog/tags.html/">More Tags</a></p></div></section><section><div class="sidesection widget widget_schneier_latest_book" id="schneier_latest_book-3"><h3>Latest Book</h3><a href="https://www.schneier.com/books/click-here/"><img class="sidepic" alt="Click Here to Kill Everybody" src="https://149400697.v2.pressablecdn.com/wp-content/uploads/2018/07/book-ch2-200w.png" /></a><p><a href="https://www.schneier.com/books/">More Books</a></p></div></section><section><div class="sidesection widget widget_schneier_promotion" id="schneier_promotion-2">
<a href="https://www.eff.org/issues/bloggers/legal/join">
	<img src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/join-eff@2x.png" id="effbutton" alt="Support Bloggers' Rights!" title="Support Bloggers' Rights!" /></a>

<a href="https://npo.networkforgood.org/Donate/Donate.aspx?npoSubscriptionId=8252">
	<img src="https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/images/support-epic@2x.png" alt="Defend Privacy--Support Epic" title="Defend Privacy--Support Epic" /></a>
</div></section>	</div>
</aside>

		<footer>
			<nav>
				<div class="nav" id="footer-nav">
					<div class="menu-main-menu-container"><ul id="menu-main-menu-1" class="menu"><li class="menu1 menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-50175 current-menu-item"><a href="https://www.schneier.com">Blog</a></li>
<li class="menu2 menu-item menu-item-type-post_type menu-item-object-page menu-item-50916"><a href="https://www.schneier.com/crypto-gram/">Newsletter</a></li>
<li class="menu3 menu-item menu-item-type-post_type menu-item-object-page menu-item-50166"><a href="https://www.schneier.com/books/">Books</a></li>
<li class="menu4 menu-item menu-item-type-custom menu-item-object-custom menu-item-50169"><a href="https://www.schneier.com/essays/">Essays</a></li>
<li class="menu5 menu-item menu-item-type-custom menu-item-object-custom menu-item-50170"><a href="https://www.schneier.com/news/">News</a></li>
<li class="menu6 menu-item menu-item-type-custom menu-item-object-custom menu-item-50171"><a href="https://www.schneier.com/talks/">Talks</a></li>
<li class="menu7 menu-item menu-item-type-post_type menu-item-object-page menu-item-50167"><a href="https://www.schneier.com/academic/">Academic</a></li>
<li class="menu8 menu-item menu-item-type-post_type menu-item-object-page menu-item-50174"><a href="https://www.schneier.com/blog/about/">About Me</a></li>
</ul></div>				</div>
			</nav>
		</footer>

		</div><!--#main-->
	</div><!--#wrapper-->

		<script type="text/javascript">
		(function () {
			var c = document.body.className;
			c = c.replace(/woocommerce-no-js/, 'woocommerce-js');
			document.body.className = c;
		})();
	</script>
	<script type='text/javascript' src='https://c0.wp.com/p/woocommerce/5.1.0/assets/js/jquery-cookie/jquery.cookie.min.js' id='jquery-cookie-js'></script>
<script type='text/javascript' src='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/vendor/socialshareprivacy/js/socialshareprivacy.js?ver=1.0.1' id='social-share-privacy-js'></script>
<script type='text/javascript' id='social-share-privacy-icons-js-extra'>
/* <![CDATA[ */
var schneierSocial = {"path":"https:\/\/www.schneier.com\/wp-content\/themes\/schneier\/assets\/vendor\/socialshareprivacy\/"};
/* ]]> */
</script>
<script type='text/javascript' src='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/vendor/socialshareprivacy/js/icons.js?ver=1.0.0' id='social-share-privacy-icons-js'></script>
<script type='text/javascript' id='schneier-comment-js-extra'>
/* <![CDATA[ */
var schneierComment = {"translateErrorSecurityAnswerWrong":"Your response to the challenge question ('The name of this blog is Schneier on ____') was not correct. Please try again.","ajax_url":"https:\/\/www.schneier.com\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type='text/javascript' src='https://149400697.v2.pressablecdn.com/wp-content/themes/schneier/assets/js/comment.js?ver=1.0.1' id='schneier-comment-js'></script>
<script type='text/javascript' src='https://c0.wp.com/c/5.7/wp-includes/js/wp-embed.min.js' id='wp-embed-js'></script>

</body>

</html>
